var utils=(function(){var F;var l=2000;var u;var w=5000;var i={admin:2,normal:1};function a(M){$(M).dialog({autoOpen:false,modal:true,buttons:{OK:function(){$(this).dialog("close")}}})}function E(){$("#progress_status").ajaxSend(function(M,O,N){if(N.url.indexOf(log.run_url)==0||N.url.indexOf(dashboard.data_url)==0||N.url.indexOf(patchupgrade.upgrade_log_run_url)==0||N.url.indexOf(patchupgrade.checkserver_url)==0){return}$(this).show()});$("#progress_status").ajaxComplete(function(){$(this).hide()})}function G(){$(document).ajaxError(function(M,O,N,P){if(N.url.indexOf(dashboard.data_url)==0||N.url.indexOf(patchupgrade.checkserver_url)==0){return}c(O.responseText)});$("#error-dialog").dialog({autoOpen:false,modal:true,width:700,height:500,buttons:{OK:function(){$(this).dialog("close")}}})}function I(P,N){var O=p();var M=[O.left,O.top];$(P).dialog({autoOpen:false,width:O.width-3,resizable:false,draggable:true,modal:false,stack:false,zIndex:1000,position:M,close:N})}function D(M){$(M).dialog({autoOpen:false,modal:true})}function z(M){$("#panel_body > .list_row").mouseout(function(){if(u){clearTimeout(u)}u=setTimeout(function(){$("#panel_tooltip").hide()},w)});$("#panel_body > .list_row").mouseenter(function(N){if(u){clearTimeout(u)}var S=$(this);var R=$("#menu");var U=S.attr("id");var T=S.offset();var O=S.width();var Q=R.width()*2+50;var P=T.top+10;$("#panel_tooltip_body").empty();$.getJSON(M,{id:U},function(V){if(V.id==U){$("#panel_tooltip_body").html(V.content);$("#panel_tooltip").position({my:"center",at:"left",of:$("body"),offset:Q+" "+P});$("#panel_tooltip").show()}})});$("#panel_tooltip").mouseenter(function(){if(u){clearTimeout(u)}});$("#panel_tooltip").mouseout(function(){if(u){clearTimeout(u)}u=setTimeout(function(){$("#panel_tooltip").hide()},w)})}function g(O,M){var N=$.inArray(O,M);return(N>=0?true:false)}function k(M){$(M).dialog("destroy");$(M).remove()}function r(){k("div[id^='dialog-message']");k("div[id^='list-panel']");k("div[id^='confirm']");k("div[id^='dialog']")}function x(){$("#left_box").hide()}function H(P,M){var N=P-1;var O=(N<1?"":"_"+N);$(M+O).dialog("close")}function v(M,N){if(M==1){$("#dialog_msg").html(N)}else{$("#dialog_msg").text(N)}$("#dialog-message").dialog("open")}function c(M){$("#error_dialog").html(M);$("#error_dialog style").remove();$("#error-dialog").dialog("open")}function j(M){M.hover(function(){$(this).toggleClass("ui-state-hover")},function(){$(this).toggleClass("ui-state-hover")})}function e(M){M.click(function(){if(this.checked){M.not(this).removeAttr("checked")}})}function A(O){var M=O.indexOf("_");if(M<0){return 0}var N=O.substr(M+1);return parseInt(N,10)}function o(O){var N=O.lastIndexOf("-");var M=O.lastIndexOf("_");if(N<5){return""}else{if(O.indexOf("export-form")==0&&N<7){return""}else{return O.substring(N+1,M)}}}function B(N){var M=A(N);return(M>0?M-1:0)}function m(N){var M=A(N);return M+1}function s(N){var M=A(N);return(M==0?"":"_"+M)}function b(N,O,M){N.removeData(O);N.data(O,M)}function J(M){C();F=setTimeout(M,l)}function C(){clearTimeout(F)}function L(M,P){var O=$(M);for(var N=0;N<P;N++){O=O.parent()}return O}function K(M,N){$(".ui-draggable-dragging").addClass("ui-state-hover")}function q(M,N){$(".ui-draggable-dragging").removeClass("ui-state-hover")}function d(M){$(M+" > div").removeClass("ui-state-default");$(M+" > div").removeClass("ui-state-hover");$(M+" > div:odd").addClass("ui-state-default");$(M+" > div:even").addClass("ui-state-hover")}function y(M){var N=M.indexOf("_");if(N>=0){var O=M.substr(N+1);return parseInt(O,10)}return -1}function h(O){var N={errors:O};var M=new EJS({url:"/media/tpl/form_error.ejs"}).render(N);return M}function n(M){var Q=null;if(document.cookie&&document.cookie!=""){var P=document.cookie.split(";");for(var O=0;O<P.length;O++){var N=jQuery.trim(P[O]);if(N.substring(0,M.length+1)==(M+"=")){Q=decodeURIComponent(N.substring(M.length+1));break}}}return Q}function f(M){return M-$(document).scrollTop()}function p(){var Q=$("#menu");var N=Q.width();N+=5;var P=Q.offset();var O=P.left;var M=P.top;O-=5;return{width:N,left:O,top:M}}function t(M){try{var O="/wizard_profile_switch/";var P={status:M};$.post(O,P,function(Q){if(Q.status=="success"){window.location.replace("/wizardReRun/")}if(Q.status=="error"){alert(Q.error_info)}})}catch(N){alert(N.message)}}return{init_alert_dialog:a,init_progress:E,init_server_error_dialog:G,init_list_panel:I,init_confirm_delete:D,init_panel_tooltip:z,item_exist:g,remove_dialog:k,clear_dialogs:r,cancel_form:x,cancel_dialog:H,show_dialog:v,show_error_dialog:c,bind_hover:j,set_mutual_exclusive:e,get_form_level:A,get_form_scope:o,get_next_form_level:m,get_prefix:s,set_data:b,typing_timer:F,done_typing_interval:l,tooltip_timer:u,tooltip_delay:w,accesstype:i,countdown_filter:J,stop_filter_timer:C,get_parent:L,add_drag_css:K,remove_drag_css:q,set_alt_css:d,get_itemid:y,get_errors:h,get_cookie:n,get_elm_top:f,switch_wizard:t}}());$.ajaxSetup({cache:false});var theme=(function(){var f=true;var b="/setting/";var d="darkhive";function e(){var i=$("#id_accesstype_").val();utils.init_progress();utils.init_server_error_dialog();var h=$("#theme_wizard_select .save_button");h.click(function(){utils.switch_wizard("1")});utils.bind_hover(h);var g=$("#theme_option .cancelicon");g.click(function(){$("#theme_option").slideUp()});$.get(b+"?name=theme",function(j){if(j.success==1){d=(j.theme==""?"darkhive":j.theme)}$.themes.init({themes:["mintchoc","darkhive","trontastic","humanity","cupertino","sunny","smoothness"],defaultTheme:d,onSelect:a});if(i==utils.accesstype.admin){$("#theme_body").themes()}});if(i==utils.accesstype.admin){$("#proxy_options").click(c);utils.bind_hover($("#proxy_options"))}}function c(){$("#theme_option").slideToggle()}function a(j,i,g){if(!f&&$.browser.msie){}if(f==false){var h={name:"theme",value:j};$.post(b,h,function(k){})}f=false}return{init:e}}());$(document).ready(theme.init);