var adinfo=(function(){var c="/adinfo/save/";function d(){var j=f();$.post(c,j,function(k){if(k.success==1){stat.show_status(0,k.msg)}else{if(k.error==1){var l=utils.get_errors(k.errors);stat.show_status(1,l)}else{stat.show_status(1,k)}}});return false}function f(){var j={adserver:$("#id_adserver").val(),addomain:$("#id_addomain").val(),adusername:$("#id_adusername").val(),adpassword:$("#id_adpassword").val(),id:"",save_type:""};var k=$("#id_id").val();if(k!=""){j.id=k;j.save_type="update"}return j}function h(){$(".save_button.save").click(d);if($("#id_id").val()!=""){$("#id_adpassword").val("**********")}$(".save_button.save").css("margin-right","0");utils.bind_hover($(".save_button"))}function g(){return menu.get(c,h)}return{load:g}}());var admin=(function(){var c="/administration/save/";function d(){var j=f();$.post(c,j,function(k){if(k.success==1){stat.show_status(0,k.msg)}else{if(k.error==1){var l=utils.get_errors(k.errors);stat.show_status(1,l)}else{stat.show_status(1,k)}}});return false}function f(){var j={datetime:$("#id_datetime").val(),timezone:$("#id_timezone").val(),id:"",save_type:""};var k=$("#id_id").val();if(k!=""){j.id=k;j.save_type="update"}return j}function h(){$(".save_button.save").click(d);$(".save_button.save").css("margin-right","0");utils.bind_hover($(".save_button"))}function g(){return menu.get(c,h)}return{load:g}}());var appctrlrule=(function(){var Q="/appctrlrule/save/";var af="/appctrlrule/delete/";var al="/appctrlrule/save/enable/";var ay="/appctrlrule/save/location/";var E="/appctrlrule/list/";var J={save_url:"/appctrl/save/"};var ai=null;var ah=null;var ag=null;var X=null;function Z(){ai={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"skiplist",drag:utils.add_drag_css,stop:utils.remove_drag_css};ah={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"applyto",drag:utils.add_drag_css,stop:utils.remove_drag_css};ag={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"whichapp",drag:utils.add_drag_css,stop:utils.remove_drag_css};X={items:"tr",start:function(az,aA){var aB=$(".list_table > tbody > tr > td[id]").sortable("toArray");$(".list_table").data("arrold",aB);utils.set_data($(".list_table"),"arrold",aB)},update:V}}function H(){$("#left_box").load(Q,null,function(){var az=$("#save-form");aw(az);$("#left_box").css("width","300px");$(".save_button.save").click(v);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);I();au();R();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function aw(az){utils.set_data(az.find("#id_skiplist"),"skiplist",[]);utils.set_data(az.find("#id_applyto"),"applyto",[]);utils.set_data(az.find("#id_whichapp"),"whichapp",[])}function I(){$("#skiplist .img_folder").click(B);$("#skiplist .img_add").click(ao);$("#applyto .img_folder").click(y);$("#applyto .img_add").click(an);$("#whichapp .img_folder").click(u)}function au(){var az="ui-state-active";$("#id_skiplist").droppable({hoverClass:az,scope:"skiplist",drop:function(aA,aB){var aC=aB.draggable;F(aC)}});$("#id_applyto").droppable({hoverClass:az,scope:"applyto",drop:function(aA,aB){var aC=aB.draggable;w(aC)}});$("#id_whichapp").droppable({hoverClass:az,scope:"whichapp",drop:function(aA,aB){var aC=aB.draggable;N(aC)}})}function R(){$("#dialog-add-skiplist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-skiplist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-applyto").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-applyto").dialog(defnet.get_ui_opt().popup_dialog_opt)}function d(){utils.cancel_form();ac();nav_list.show_list()}function g(aB){var az=$(aB.self).parent().attr("id");var aA=(aB.clone==null?"":"&clone=1");$("#left_box").load(Q+"?id="+az+aA,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(aB.clone==null){return n(az)}else{return v()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);I();au();R();P();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function v(){var az=f($("#save-form"),"","");var aA={url:Q,data:az,func_success:d};return list_form.save(aA)}function t(){var az=this;g({self:az,clone:null})}function n(az){var aA=f($("#save-form"),az,"update");var aB={url:Q,data:aA,func_success:d};return list_form.save(aB)}function A(){var aG=$(this).parent();var aH=aG.attr("id");var az=$("#id_pg").val();var aC=az.split(",");var aF=parseInt(aC[3],10);--aF;var aA=$("#id_display").val();var aE=$("#id_selection").val();var aD=$("#id_query").val();var aB={id:aH,pgnum:aF,pgsize:aA,find:aE,text:aD};$.post(af,aB,function(aI){if(aI.indexOf("success")==0){nav_list.update_list()}else{utils.show_dialog(2,aI)}})}function p(){var az=this;g({self:az,clone:1})}function r(){var aA=$(this);var aC=utils.get_parent(this,2);var az=aC.prev().attr("id");var aB=null;if(aA.hasClass("sw-on")){aB={id:az,enable:1};$.post(al,aB,function(aD){if(aD=="success"){aA.next().removeClass("redicon");aA.next().addClass("greyicon");aA.removeClass("greyicon");aA.addClass("greenicon")}else{utils.show_dialog(2,aD)}})}else{aB={id:az,enable:0};$.post(al,aB,function(aD){if(aD=="success"){aA.prev().removeClass("greenicon");aA.prev().addClass("greyicon");aA.removeClass("greyicon");aA.addClass("redicon")}else{utils.show_dialog(2,aD)}})}return false}function V(aH,aG){var aB=$(".list_table > tbody > tr > td[id]").sortable("toArray");var aC=$(".list_table").data("arrold");var aA=aG.item.children().attr("id");var aF=0;for(var aE=0;aE<aB.length;aE++){if(aB[aE].id==aA){aF=aE+1;break}}var az=aC[aF-1].id;var aD={id:aA,swapid:az};$.post(ay,aD,function(aI){if(aI=="success"){nav_list.update_list()}else{utils.show_dialog(2,aI)}})}function f(aC,az,aA){var aG=aC.find("#id_skiplist").data("skiplist");var aB=aC.find("#id_applyto").data("applyto");var aE=aG.join(",");var aF=aB.join(",");var aD={name:aC.find("#id_name").val(),location:aC.find("#id_location").val(),action:aC.find("#id_action").val(),comment:aC.find("#id_comment").val(),skiplist:aE,applyto:aF,id:az,save_type:aA};return aD}function ac(){var az=$("#list-panel").dialog("isOpen");if(az){$("#list-panel").dialog("close")}$("#leftcolumn").show()}function B(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(c);$(".drag_zone").draggable(ai);$("#id_filters").change(Y);$("#id_filter_text").keyup(function(){utils.countdown_filter(Y)});$("#id_filter_text").keydown(utils.stop_filter_timer);init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function Y(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defnet.list.select+aA,null,function(){$(".drag_zone").draggable(ai);defnet.init_tooltip()})}function y(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(l);$(".drag_zone").draggable(ah);$("#id_filters").change(W);$("#id_filter_text").keyup(function(){utils.countdown_filter(W)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function W(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defnet.list.select+aA,null,function(){$(".drag_zone").draggable(ah);defnet.init_tooltip()})}function u(){$("#leftcolumn").hide();$("#list_body").load("/appctrlapplist/list/panel/",null,function(){$(".add_button").click(k);$(".drag_zone").draggable(ag);$("#id_filters").change(U);$("#id_filter_text").keyup(function(){utils.countdown_filter(U)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function U(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load("/appctrlapplist/list/select/"+aA,null,function(){$(".drag_zone").draggable(ag)})}function at(){return T(defnet.add_members,this)}function ar(){return T(defnet.add_members,this)}function T(aB,az){var aC=$("#list-panel").dialog("isOpen");if(aC){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var aA=utils.get_parent(az,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){aB(aA)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(aq);$("#id_filter_text").keyup(function(){utils.countdown_filter(aq)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aq(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defnet.list.select+aA,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function ao(){var az=this;var aA={self:az,scope:"skiplist",func_save:j,func_show_all:at,func_show_add:O};G(aA);return false}function an(){var az=this;var aA={self:az,scope:"applyto",func_save:h,func_show_all:ar,func_show_add:M};G(aA);return false}function O(){var az=this;var aA={self:az,scope:"skiplist",func_show_all:at,func_show_add:O};S(aA);return false}function M(){var az=this;var aA={self:az,scope:"applyto",func_show_all:ar,func_show_add:M};S(aA);return false}function G(az){az.level=1;az.prefix="";defnet.init_form(az)}function S(az){var aA=defnet.get_level_data(az.self);az.level=aA.level;az.prefix=aA.prefix;defnet.init_form(az)}function j(){var az={level:1,scope:"skiplist",func_add:C};return defnet.save_inner_form(az)}function h(){var az={level:1,scope:"applyto",func_add:aj};return defnet.save_inner_form(az)}function F(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");C(aC,az)}function C(aE,aA){var aB=parseInt(aE,10);var az=$("#id_skiplist").data("skiplist");if(!utils.item_exist(aB,az)){az.push(aB);utils.set_data($("#id_skiplist"),"skiplist",az);var aD={id_prefix:"skiplist_",id:aB,click:"appctrlrule.remove_skiplist(this)",editclick:"appctrlrule.edit_skiplist(this)",name:aA};var aC=new EJS({url:"/media/tpl/list_item.ejs"}).render(aD);$("#id_skiplist").append(aC)}utils.set_alt_css("#id_skiplist")}function w(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");aj(aC,az)}function aj(aE,aA){var aB=parseInt(aE,10);var az=$("#id_applyto").data("applyto");if(!utils.item_exist(aB,az)){az.push(aB);utils.set_data($("#id_applyto"),"applyto",az);var aD={id_prefix:"applyto_",id:aB,click:"appctrlrule.remove_applyto(this)",editclick:"appctrlrule.edit_applyto(this)",name:aA};var aC=new EJS({url:"/media/tpl/list_item.ejs"}).render(aD);$("#id_applyto").append(aC)}utils.set_alt_css("#id_applyto")}function N(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");L(aC,az)}function L(aE,aA){var aB=parseInt(aE,10);var az=$("#id_whichapp").data("whichapp");if(!utils.item_exist(aB,az)){az.push(aB);utils.set_data($("#id_whichapp"),"whichapp",az);var aD={id_prefix:"whichapp_",id:aB,click:"appctrlrule.remove_whichapp(this)",editclick:"false",name:aA};var aC=new EJS({url:"/media/tpl/list_item.ejs"}).render(aD);$("#id_whichapp").append(aC)}utils.set_alt_css("#id_whichapp")}function c(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();C(aB,az)})}function l(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();aj(aB,az)})}function k(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();L(aB,az)})}function ae(aE){var aD=$(aE);var aF=aD.parent().attr("id");var aB=utils.get_itemid(aF);var aC=utils.get_parent(aD,5);var az=aC.find("#id_skiplist").data("skiplist");var aA=$.inArray(aB,az);if(aA>=0){az.splice(aA,1);utils.set_data(aC.find("#id_skiplist"),"skiplist",az)}aC.find("#"+aF).remove();utils.set_alt_css("#id_skiplist");return false}function ad(aE){var aD=$(aE);var aF=aD.parent().attr("id");var aB=utils.get_itemid(aF);var aC=utils.get_parent(aD,5);var az=aC.find("#id_applyto").data("applyto");var aA=$.inArray(aB,az);if(aA>=0){az.splice(aA,1);utils.set_data(aC.find("#id_applyto"),"applyto",az)}aC.find("#"+aF).remove();utils.set_alt_css("#id_applyto");return false}function ax(aE){var aD=$(aE);var aF=aD.parent().attr("id");var aB=utils.get_itemid(aF);var aC=utils.get_parent(aD,5);var az=aC.find("#id_whichapp").data("whichapp");var aA=$.inArray(aB,az);if(aA>=0){az.splice(aA,1);utils.set_data(aC.find("#id_whichapp"),"whichapp",az)}aC.find("#"+aF).remove();utils.set_alt_css("#id_whichapp");return false}function m(aD){var aB=$(aD);var aE=aB.parent().attr("id");var aA=utils.get_itemid(aE);var az=aB;var aC={self:az,id:aA,level:1,prefix:"",scope:"skiplist",func_update:ap,func_show_all:at,func_show_add:O};defnet.init_edit_form(aC);return false}function ap(aC,aA,az){$(az).next().html(aA);var aB=$("#list-panel").dialog("isOpen");if(aB){Y()}}function D(aD){var aB=$(aD);var aE=aB.parent().attr("id");var aA=utils.get_itemid(aE);var az=aB;var aC={self:az,id:aA,level:1,prefix:"",scope:"applyto",func_update:q,func_show_all:ar,func_show_add:M};defnet.init_edit_form(aC);return false}function q(aC,aA,az){$(az).next().html(aA);var aB=$("#list-panel").dialog("isOpen");if(aB){W()}}function P(){var aA=$("#save-form");var aB=[];var aC=[];var az=[];aA.find("#id_skiplist > div").each(function(){var aE=$(this).attr("id");var aD=utils.get_itemid(aE);if(!utils.item_exist(aD,aB)){aB.push(aD)}});aA.find("#id_applyto > div").each(function(){var aE=$(this).attr("id");var aD=utils.get_itemid(aE);if(!utils.item_exist(aD,aC)){aC.push(aD)}});aA.find("#id_whichapp > div").each(function(){var aE=$(this).attr("id");var aD=utils.get_itemid(aE);if(!utils.item_exist(aD,az)){az.push(aD)}});utils.set_data(aA.find("#id_skiplist"),"skiplist",aB);utils.set_data(aA.find("#id_applyto"),"applyto",aC);utils.set_data(aA.find("#id_whichapp"),"whichapp",az);utils.set_alt_css("#id_skiplist");utils.set_alt_css("#id_applyto");utils.set_alt_css("#id_whichapp")}function av(){var az={value:1};$.post(J.save_url,az,function(aA){if(aA=="success"){$("#sw > .sw-off").removeClass("redicon");$("#sw > .sw-off").addClass("greyicon");$("#sw > .sw-on").removeClass("greyicon");$("#sw > .sw-on").addClass("greenicon")}})}function K(){var az={value:0};$.post(J.save_url,az,function(aA){if(aA=="success"){$("#sw > .sw-on").removeClass("greenicon");$("#sw > .sw-on").addClass("greyicon");$("#sw > .sw-off").removeClass("greyicon");$("#sw > .sw-off").addClass("redicon")}})}function am(){$(".list_button.edit").click(t);$(".list_button.delete").click(A);$(".list_button.clone").click(p);$(".switch_button > .sw-on").click(r);$(".switch_button > .sw-off").click(r);$(".list_table").sortable(X)}function ak(){Z();$("#left_box").hide();$("#id_add").click(H);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#sw > .sw-on").click(av);$("#sw > .sw-off").click(K);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("#dialog-add-skiplist");utils.remove_dialog("#dialog-edit-skiplist");utils.remove_dialog("#dialog-add-applyto");utils.remove_dialog("#dialog-edit-applyto");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",ac);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=E;nav_list.config.list_func=am;nav_list.init()}function ab(){return menu.get("/appctrlrule/",ak)}return{load:ab,edit_skiplist:m,remove_skiplist:ae,edit_applyto:D,remove_applyto:ad,remove_whichapp:ax}}());var auth=(function(){var c="/login/";var f="/logout/";var h=false;function g(){var l={username:$("#id_username").val(),password:$("#id_password").val()};if(h){return false}h=true;$.ajax({url:c,data:l,type:"POST",async:false,success:function(m,q,p){h=false;if(m.success==1){$(".login_box").effect("fold",null,500,function(){$("#id_accesstype_").val(m.accesstype);menu.load();if(m.accesstype==utils.accesstype.admin){$("#section_logo").next().html(m.themeselect)}theme.init()})}else{if(m.error==1){var n=utils.get_errors(m.errors);stat.show_status(1,n)}else{stat.show_status(1,m)}}},error:function(m,p,n){h=false}});return false}function k(l){if(l.keyCode=="13"){l.preventDefault();l.stopPropagation();g()}}function d(){dashboard.stop_refresh_timer();h=false;$.ajax({url:f,type:"POST",async:false,success:function(l,n,m){if(l.success==1){$("#leftcolumn div.innertube").empty();$("#section_logo").next().empty();$("#contentcolumn div.innertube").html(l.loginform);utils.clear_dialogs();j()}}});return false}function j(){utils.init_server_error_dialog();var l=$("#id_username");if(l.length==1){$("#id_username,#id_password").keypress(k);$(".login_button").click(g);utils.bind_hover($(".login_button"))}else{menu.init()}}return{init:j,logout:d}}());$(document).ready(auth.init);var theme=(function(){var j=true;var d="/setting/";var g="darkhive";function h(){var m=$("#id_accesstype_").val();utils.init_progress();utils.init_server_error_dialog();var l=$("#theme_wizard_select .save_button");l.click(function(){utils.switch_wizard("1")});utils.bind_hover(l);var k=$("#theme_option .cancelicon");k.click(function(){$("#theme_option").slideUp()});$.get(d+"?name=theme",function(n){if(n.success==1){g=(n.theme==""?"darkhive":n.theme)}$.themes.init({themes:["mintchoc","darkhive","trontastic","humanity","cupertino","sunny","smoothness"],defaultTheme:g,onSelect:c});if(m==utils.accesstype.admin){$("#theme_body").themes()}});if(m==utils.accesstype.admin){$("#proxy_options").click(f);utils.bind_hover($("#proxy_options"))}}function f(){$("#theme_option").slideToggle()}function c(n,m,k){if(!j&&$.browser.msie){}if(j==false){var l={name:"theme",value:n};$.post(d,l,function(p){})}j=false}return{init:h}}());$(document).ready(theme.init);var utils=(function(){var S;var an=2000;var ae;var ac=5000;var aq={admin:2,normal:1};function az(c){$(c).dialog({autoOpen:false,modal:true,buttons:{OK:function(){$(this).dialog("close")}}})}function T(){$("#progress_status").ajaxSend(function(f,c,d){if(d.url.indexOf(log.run_url)==0||d.url.indexOf(dashboard.data_url)==0||d.url.indexOf(patchupgrade.upgrade_log_run_url)==0||d.url.indexOf(patchupgrade.checkserver_url)==0){return}$(this).show()});$("#progress_status").ajaxComplete(function(){$(this).hide()})}function R(){$(document).ajaxError(function(g,d,f,c){if(f.url.indexOf(dashboard.data_url)==0||f.url.indexOf(patchupgrade.checkserver_url)==0){return}ax(d.responseText)});$("#error-dialog").dialog({autoOpen:false,modal:true,width:700,height:500,buttons:{OK:function(){$(this).dialog("close")}}})}function P(c,f){var d=aj();var g=[d.left,d.top];$(c).dialog({autoOpen:false,width:d.width-3,resizable:false,draggable:true,modal:false,stack:false,zIndex:1000,position:g,close:f})}function U(c){$(c).dialog({autoOpen:false,modal:true})}function Y(c){$("#panel_body > .list_row").mouseout(function(){if(ae){clearTimeout(ae)}ae=setTimeout(function(){$("#panel_tooltip").hide()},ac)});$("#panel_body > .list_row").mouseenter(function(m){if(ae){clearTimeout(ae)}var g=$(this);var h=$("#menu");var d=g.attr("id");var f=g.offset();var l=g.width();var j=h.width()*2+50;var k=f.top+10;$("#panel_tooltip_body").empty();$.getJSON(c,{id:d},function(n){if(n.id==d){$("#panel_tooltip_body").html(n.content);$("#panel_tooltip").position({my:"center",at:"left",of:$("body"),offset:j+" "+k});$("#panel_tooltip").show()}})});$("#panel_tooltip").mouseenter(function(){if(ae){clearTimeout(ae)}});$("#panel_tooltip").mouseout(function(){if(ae){clearTimeout(ae)}ae=setTimeout(function(){$("#panel_tooltip").hide()},ac)})}function at(c,f){var d=$.inArray(c,f);return(d>=0?true:false)}function ao(c){$(c).dialog("destroy");$(c).remove()}function ah(){ao("div[id^='dialog-message']");ao("div[id^='list-panel']");ao("div[id^='confirm']");ao("div[id^='dialog']")}function ab(){$("#left_box").hide()}function Q(c,g){var f=c-1;var d=(f<1?"":"_"+f);$(g+d).dialog("close")}function ad(d,c){if(d==1){$("#dialog_msg").html(c)}else{$("#dialog_msg").text(c)}$("#dialog-message").dialog("open")}function ax(c){$("#error_dialog").html(c);$("#error_dialog style").remove();$("#error-dialog").dialog("open")}function ap(c){c.hover(function(){$(this).toggleClass("ui-state-hover")},function(){$(this).toggleClass("ui-state-hover")})}function av(c){c.click(function(){if(this.checked){c.not(this).removeAttr("checked")}})}function X(c){var f=c.indexOf("_");if(f<0){return 0}var d=c.substr(f+1);return parseInt(d,10)}function ak(c){var d=c.lastIndexOf("-");var f=c.lastIndexOf("_");if(d<5){return""}else{if(c.indexOf("export-form")==0&&d<7){return""}else{return c.substring(d+1,f)}}}function W(c){var d=X(c);return(d>0?d-1:0)}function am(c){var d=X(c);return d+1}function ag(c){var d=X(c);return(d==0?"":"_"+d)}function ay(d,c,f){d.removeData(c);d.data(c,f)}function O(c){V();S=setTimeout(c,an)}function V(){clearTimeout(S)}function M(g,c){var d=$(g);for(var f=0;f<c;f++){d=d.parent()}return d}function N(d,c){$(".ui-draggable-dragging").addClass("ui-state-hover")}function ai(d,c){$(".ui-draggable-dragging").removeClass("ui-state-hover")}function aw(c){$(c+" > div").removeClass("ui-state-default");$(c+" > div").removeClass("ui-state-hover");$(c+" > div:odd").addClass("ui-state-default");$(c+" > div:even").addClass("ui-state-hover")}function Z(f){var d=f.indexOf("_");if(d>=0){var c=f.substr(d+1);return parseInt(c,10)}return -1}function ar(c){var d={errors:c};var f=new EJS({url:"/media/tpl/form_error.ejs"}).render(d);return f}function al(h){var c=null;if(document.cookie&&document.cookie!=""){var d=document.cookie.split(";");for(var f=0;f<d.length;f++){var g=jQuery.trim(d[f]);if(g.substring(0,h.length+1)==(h+"=")){c=decodeURIComponent(g.substring(h.length+1));break}}}return c}function au(c){return c-$(document).scrollTop()}function aj(){var c=$("#menu");var g=c.width();g+=5;var d=c.offset();var f=d.left;var h=d.top;f-=5;return{width:g,left:f,top:h}}function af(g){try{var d="/wizard_profile_switch/";var c={status:g};$.post(d,c,function(h){if(h.status=="success"){window.location.replace("/wizardReRun/")}if(h.status=="error"){alert(h.error_info)}})}catch(f){alert(f.message)}}return{init_alert_dialog:az,init_progress:T,init_server_error_dialog:R,init_list_panel:P,init_confirm_delete:U,init_panel_tooltip:Y,item_exist:at,remove_dialog:ao,clear_dialogs:ah,cancel_form:ab,cancel_dialog:Q,show_dialog:ad,show_error_dialog:ax,bind_hover:ap,set_mutual_exclusive:av,get_form_level:X,get_form_scope:ak,get_next_form_level:am,get_prefix:ag,set_data:ay,typing_timer:S,done_typing_interval:an,tooltip_timer:ae,tooltip_delay:ac,accesstype:aq,countdown_filter:O,stop_filter_timer:V,get_parent:M,add_drag_css:N,remove_drag_css:ai,set_alt_css:aw,get_itemid:Z,get_errors:ar,get_cookie:al,get_elm_top:au,switch_wizard:af}}());$.ajaxSetup({cache:false});var theme=(function(){var j=true;var g="/setting/";var l="darkhive";function k(){var c=$("#id_accesstype_").val();utils.init_progress();utils.init_server_error_dialog();var d=$("#theme_wizard_select .save_button");d.click(function(){utils.switch_wizard("1")});utils.bind_hover(d);var f=$("#theme_option .cancelicon");f.click(function(){$("#theme_option").slideUp()});$.get(g+"?name=theme",function(n){if(n.success==1){l=(n.theme==""?"darkhive":n.theme)}$.themes.init({themes:["mintchoc","darkhive","trontastic","humanity","cupertino","sunny","smoothness"],defaultTheme:l,onSelect:h});if(c==utils.accesstype.admin){$("#theme_body").themes()}});if(c==utils.accesstype.admin){$("#proxy_options").click(m);utils.bind_hover($("#proxy_options"))}}function m(){$("#theme_option").slideToggle()}function h(c,d,n){if(!j&&$.browser.msie){}if(j==false){var f={name:"theme",value:c};$.post(g,f,function(p){})}j=false}return{init:k}}());$(document).ready(theme.init);var utils=(function(){var N;var q=2000;var C;var E=5000;var m={admin:2,normal:1};function c(U){$(U).dialog({autoOpen:false,modal:true,buttons:{OK:function(){$(this).dialog("close")}}})}function M(){$("#progress_status").ajaxSend(function(U,W,V){if(V.url.indexOf(log.run_url)==0||V.url.indexOf(dashboard.data_url)==0||V.url.indexOf(patchupgrade.upgrade_log_run_url)==0||V.url.indexOf(patchupgrade.checkserver_url)==0){return}$(this).show()});$("#progress_status").ajaxComplete(function(){$(this).hide()})}function O(){$(document).ajaxError(function(U,W,V,X){if(V.url.indexOf(dashboard.data_url)==0||V.url.indexOf(patchupgrade.checkserver_url)==0){return}f(W.responseText)});$("#error-dialog").dialog({autoOpen:false,modal:true,width:700,height:500,buttons:{OK:function(){$(this).dialog("close")}}})}function Q(X,V){var W=v();var U=[W.left,W.top];$(X).dialog({autoOpen:false,width:W.width-3,resizable:false,draggable:true,modal:false,stack:false,zIndex:1000,position:U,close:V})}function L(U){$(U).dialog({autoOpen:false,modal:true})}function H(U){$("#panel_body > .list_row").mouseout(function(){if(C){clearTimeout(C)}C=setTimeout(function(){$("#panel_tooltip").hide()},E)});$("#panel_body > .list_row").mouseenter(function(V){if(C){clearTimeout(C)}var ab=$(this);var Z=$("#menu");var ad=ab.attr("id");var ac=ab.offset();var W=ab.width();var Y=Z.width()*2+50;var X=ac.top+10;$("#panel_tooltip_body").empty();$.getJSON(U,{id:ad},function(ae){if(ae.id==ad){$("#panel_tooltip_body").html(ae.content);$("#panel_tooltip").position({my:"center",at:"left",of:$("body"),offset:Y+" "+X});$("#panel_tooltip").show()}})});$("#panel_tooltip").mouseenter(function(){if(C){clearTimeout(C)}});$("#panel_tooltip").mouseout(function(){if(C){clearTimeout(C)}C=setTimeout(function(){$("#panel_tooltip").hide()},E)})}function k(W,U){var V=$.inArray(W,U);return(V>=0?true:false)}function p(U){$(U).dialog("destroy");$(U).remove()}function y(){p("div[id^='dialog-message']");p("div[id^='list-panel']");p("div[id^='confirm']");p("div[id^='dialog']")}function F(){$("#left_box").hide()}function P(X,U){var V=X-1;var W=(V<1?"":"_"+V);$(U+W).dialog("close")}function D(U,V){if(U==1){$("#dialog_msg").html(V)}else{$("#dialog_msg").text(V)}$("#dialog-message").dialog("open")}function f(U){$("#error_dialog").html(U);$("#error_dialog style").remove();$("#error-dialog").dialog("open")}function n(U){U.hover(function(){$(this).toggleClass("ui-state-hover")},function(){$(this).toggleClass("ui-state-hover")})}function h(U){U.click(function(){if(this.checked){U.not(this).removeAttr("checked")}})}function I(W){var U=W.indexOf("_");if(U<0){return 0}var V=W.substr(U+1);return parseInt(V,10)}function u(W){var V=W.lastIndexOf("-");var U=W.lastIndexOf("_");if(V<5){return""}else{if(W.indexOf("export-form")==0&&V<7){return""}else{return W.substring(V+1,U)}}}function J(V){var U=I(V);return(U>0?U-1:0)}function r(V){var U=I(V);return U+1}function A(V){var U=I(V);return(U==0?"":"_"+U)}function d(V,W,U){V.removeData(W);V.data(W,U)}function R(U){K();N=setTimeout(U,q)}function K(){clearTimeout(N)}function T(U,X){var W=$(U);for(var V=0;V<X;V++){W=W.parent()}return W}function S(U,V){$(".ui-draggable-dragging").addClass("ui-state-hover")}function w(U,V){$(".ui-draggable-dragging").removeClass("ui-state-hover")}function g(U){$(U+" > div").removeClass("ui-state-default");$(U+" > div").removeClass("ui-state-hover");$(U+" > div:odd").addClass("ui-state-default");$(U+" > div:even").addClass("ui-state-hover")}function G(U){var V=U.indexOf("_");if(V>=0){var W=U.substr(V+1);return parseInt(W,10)}return -1}function l(W){var V={errors:W};var U=new EJS({url:"/media/tpl/form_error.ejs"}).render(V);return U}function t(U){var Y=null;if(document.cookie&&document.cookie!=""){var X=document.cookie.split(";");for(var W=0;W<X.length;W++){var V=jQuery.trim(X[W]);if(V.substring(0,U.length+1)==(U+"=")){Y=decodeURIComponent(V.substring(U.length+1));break}}}return Y}function j(U){return U-$(document).scrollTop()}function v(){var Y=$("#menu");var V=Y.width();V+=5;var X=Y.offset();var W=X.left;var U=X.top;W-=5;return{width:V,left:W,top:U}}function B(U){try{var W="/wizard_profile_switch/";var X={status:U};$.post(W,X,function(Y){if(Y.status=="success"){window.location.replace("/wizardReRun/")}if(Y.status=="error"){alert(Y.error_info)}})}catch(V){alert(V.message)}}return{init_alert_dialog:c,init_progress:M,init_server_error_dialog:O,init_list_panel:Q,init_confirm_delete:L,init_panel_tooltip:H,item_exist:k,remove_dialog:p,clear_dialogs:y,cancel_form:F,cancel_dialog:P,show_dialog:D,show_error_dialog:f,bind_hover:n,set_mutual_exclusive:h,get_form_level:I,get_form_scope:u,get_next_form_level:r,get_prefix:A,set_data:d,typing_timer:N,done_typing_interval:q,tooltip_timer:C,tooltip_delay:E,accesstype:m,countdown_filter:R,stop_filter_timer:K,get_parent:T,add_drag_css:S,remove_drag_css:w,set_alt_css:g,get_itemid:G,get_errors:l,get_cookie:t,get_elm_top:j,switch_wizard:B}}());$.ajaxSetup({cache:false});var theme=(function(){var j=true;var d="/setting/";var g="darkhive";function h(){var m=$("#id_accesstype_").val();utils.init_progress();utils.init_server_error_dialog();var l=$("#theme_wizard_select .save_button");l.click(function(){utils.switch_wizard("1")});utils.bind_hover(l);var k=$("#theme_option .cancelicon");k.click(function(){$("#theme_option").slideUp()});$.get(d+"?name=theme",function(n){if(n.success==1){g=(n.theme==""?"darkhive":n.theme)}$.themes.init({themes:["mintchoc","darkhive","trontastic","humanity","cupertino","sunny","smoothness"],defaultTheme:g,onSelect:c});if(m==utils.accesstype.admin){$("#theme_body").themes()}});if(m==utils.accesstype.admin){$("#proxy_options").click(f);utils.bind_hover($("#proxy_options"))}}function f(){$("#theme_option").slideToggle()}function c(n,m,k){if(!j&&$.browser.msie){}if(j==false){var l={name:"theme",value:n};$.post(d,l,function(p){})}j=false}return{init:h}}());$(document).ready(theme.init);var conf=(function(){var j="/setting/conf/";var g="/setting/conf/import/";var l="/setting/conf/export/";var c={target:"",dataType:"json",async:false,timeout:300000,beforeSubmit:f,success:d};function k(){$("#upload-form").ajaxSubmit(c);return false}function h(){open(l,"_blank");return false}function f(r,q,p){$("#status_import").show();return true}function d(q,r,t,p){$("#status_import").hide();if(r=="success"){if(q.success==1){stat.show_status(0,q.msg);window.location.replace(window.location.href)}else{stat.show_status(1,q.msg)}}else{stat.show_status(1,q)}}function n(){$("#.save_button.import").click(k);$(".save_button.export").click(h);utils.bind_hover($(".save_button"))}function m(){return menu.get(j,n)}return{load:m,func_export:h}}());$(document).ajaxSend(function(f,j,d){function c(k){var p=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var m=0;m<n.length;m++){var l=jQuery.trim(n[m]);if(l.substring(0,k.length+1)==(k+"=")){p=decodeURIComponent(l.substring(k.length+1));break}}}return p}function h(l){var n=document.location.host;var p=document.location.protocol;var m="//"+n;var k=p+m;return(l==k||l.slice(0,k.length+1)==k+"/")||(l==m||l.slice(0,m.length+1)==m+"/")||!(/^(\/\/|http:|https:).*/.test(l))}function g(k){return(/^(GET|HEAD|OPTIONS|TRACE)$/.test(k))}if(!g(d.type)&&h(d.url)){j.setRequestHeader("X-CSRFToken",c("csrftoken"))}});var dashboard=(function(){var f="/dashboard/data/";var l=null;function j(){c();var n=$("#id_refresh").val();if(n!=null&&n!="0"){var m=parseInt(n);if(!$.isNumeric(m)||n==0){return}m*=1000;l=setTimeout(g,m)}}function c(){clearTimeout(l)}function k(){$("#id_refresh").change(j);j()}function h(){return menu.get("/dashboard/",k)}function g(){$.ajax({url:f,dataType:"json",data:null,cache:false,success:function(m,p,n){d(m)},complete:function(m,n){j()}})}function d(m){if(m.currdate!=""){$("#id_currdate").text(m.currdate)}if(m.error==1){return}$("#id_avpattern").text(m.avpattern);$("#id_pgbarcpu .ui-progressbar-value").css("width",m.cpu+"%");$("#id_pgbarcpu .dashboard_pgbar_text").html(m.cpu+"%");$("#id_pgbarram .ui-progressbar-value").css("width",m.ram+"%");$("#id_pgbarram .dashboard_pgbar_text .ram_val").html(m.ram+"%");$("#id_pgbarswap .ui-progressbar-value").css("width",m.swap+"%");$("#id_pgbarswap .dashboard_pgbar_text .swap_val").html(m.swap+"%");$("#id_pgbarhd .ui-progressbar-value").css("width",m.hd+"%");$("#id_pgbarhd .dashboard_pgbar_text .hd_val").html(m.hd+"%");$("#id_request").text(m.request);$("#id_block").text(m.block);$("#id_malware").text(m.malware);$(".dashboard_tbl2 > tbody").html(m.niclist)}return{load:h,data_url:f,stop_refresh_timer:c}}());var defnet=(function(){var N="/defnet/save/";var Y="/defnet/delete/";var F="/defnet/list/";var ac="/defnet/info/";var E={panel:"/defnet/list/panel/",select:"/defnet/list/select/",panel_custom1:"/defnet/list/panel/custom1/",select_custom1:"/defnet/list/select/custom1/",panel_custom2:"/defnet/list/panel/custom2/",select_custom2:"/defnet/list/select/custom2/",panel_custom3:"/defnet/list/panel/custom3/",select_custom3:"/defnet/list/select/custom3/"};var af="/defnet/save/temp/";var K={panel:"/defnet/list/panel/temp/",select:"/defnet/list/select/temp/"};var ad=null;var y=null;var f="defnet";var v=false;function V(){ad={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1000};y={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:f,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function T(){V();return{popup_dialog_opt:ad,drag_opt:y}}function m(am){var ao=$(am.self).offset();var aj=[ao.left,utils.get_elm_top(ao.top)];var ai="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);utils.remove_dialog("#dialog-add"+al+am.scope+ai);$("#dialog_edit_body"+al+am.scope+am.prefix).empty();$("#dialog-edit"+al+am.scope+am.prefix).dialog("close");var ak=(am.url==null?N:am.url);$("#dialog-add"+al+am.scope+am.prefix).dialog("option","position",aj);$("#dialog_body"+al+am.scope+am.prefix).load(ak+"?level="+am.level+an,null,function(){var ap=$("#save-form"+al+am.scope+ai);utils.set_data(ap.find("#members"),"members",[]);ap.find("#id_type").change(P);ap.find(".save_button.save").click(function(){if((am.scope==""||am.level>1)&&am.savetemp==null){return S(am)}else{if(am.level==1||am.savetemp!=null){return am.func_save()}}return false});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-add"+al+am.scope);C()});if(jQuery.isFunction(am.func_show_all)&&jQuery.isFunction(am.func_show_add)){ap.find(".img_folder").click(am.func_show_all);ap.find(".img_add").click(am.func_show_add);ap.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(aq,ar){var at=ar.draggable;j(ap,at)}})}$("#dialog-add"+al+am.scope+ai).dialog(T().popup_dialog_opt);$("#dialog-edit"+al+am.scope+ai).dialog(T().popup_dialog_opt);R(ap,1);utils.bind_hover(ap.find(".save_button"));$("#dialog-edit"+al+am.scope+am.prefix).dialog("close");$("#dialog-add"+al+am.scope+am.prefix).dialog("open")})}function q(am){var ao=$(am.self).offset();var aj=[ao.left,utils.get_elm_top(ao.top)];var ai="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);utils.remove_dialog("#dialog-edit"+al+am.scope+ai);$("#dialog_body"+al+am.scope+am.prefix).empty();$("#dialog-add"+al+am.scope+am.prefix).dialog("close");var ak=(am.url==null?N:am.url);$("#dialog-edit"+al+am.scope+am.prefix).dialog("option","position",aj);$("#dialog_edit_body"+al+am.scope+am.prefix).load(ak+"?id="+am.id+"&level="+am.level+an,null,function(){var ap=$("#save-form"+al+am.scope+ai);ap.find("#id_type").change(P);ap.find(".save_button.save").click(function(){return c(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-edit"+al+am.scope);C()});if(jQuery.isFunction(am.func_show_all)&&jQuery.isFunction(am.func_show_add)){ap.find(".img_folder").click(am.func_show_all);ap.find(".img_add").click(am.func_show_add);ap.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(aq,ar){var at=ar.draggable;j(ap,at)}})}$("#dialog-add"+al+am.scope+ai).dialog(T().popup_dialog_opt);$("#dialog-edit"+al+am.scope+ai).dialog(T().popup_dialog_opt);M(ap);utils.bind_hover(ap.find(".save_button"));$("#dialog-add"+al+am.scope+am.prefix).dialog("close");$("#dialog-edit"+al+am.scope+am.prefix).dialog("open")})}function G(am){var ao=$(am.self).offset();var aj=[ao.left,utils.get_elm_top(ao.top)];var ai="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);utils.remove_dialog("#dialog-add"+al+am.scope+ai);$("#dialog_edit_body"+al+am.scope+am.prefix).empty();$("#dialog-edit"+al+am.scope+am.prefix).dialog("close");var ak=(am.url==null?N:am.url);$("#dialog-add"+al+am.scope+am.prefix).dialog("option","position",aj);$("#dialog_body"+al+am.scope+am.prefix).load(ak+"?level="+am.level+an,null,function(){var ap=$("#save-form"+al+am.scope+ai);utils.set_data(ap.find("#members"),"members",[]);ap.find("#id_type").change(P);ap.find(".save_button.save").click(function(){return am.func_save()});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-add"+al+am.scope)});obj_type=ap.find("#id_type").children();$($(obj_type).get(3)).remove();if(jQuery.isFunction(am.func_show_all)&&jQuery.isFunction(am.func_show_add)){ap.find(".img_folder").click(am.func_show_all);ap.find(".img_add").hide();ap.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(aq,ar){var at=ar.draggable;j(ap,at)}})}$("#dialog-add"+al+am.scope+ai).dialog(T().popup_dialog_opt);$("#dialog-edit"+al+am.scope+ai).dialog(T().popup_dialog_opt);ap.find(".img_add").hide();R(ap,3);ap.find("#id_type").val(3);utils.bind_hover(ap.find(".save_button"));$("#dialog-edit"+al+am.scope+am.prefix).dialog("close");$("#dialog-add"+al+am.scope+am.prefix).dialog("open")})}function w(an){var ap=$(an.self).offset();var aj=[ap.left,utils.get_elm_top(ap.top)];var ai="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);var ak=(an.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+am+an.scope+ai);$("#dialog_body"+am+an.scope+an.prefix).empty();$("#dialog-add"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?N:an.url);$("#dialog-edit"+am+an.scope+an.prefix).dialog("option","position",aj);$("#dialog_edit_body"+am+an.scope+an.prefix).load(al+"?id="+an.id+"&level="+an.level+ao+ak,null,function(){var aq=$("#save-form"+am+an.scope+ai);aq.find("#id_type").change(P);aq.find(".save_button.save").click(function(){return c(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-edit"+am+an.scope);C()});if(jQuery.isFunction(an.func_show_all)&&jQuery.isFunction(an.func_show_add)){aq.find(".img_folder").click(an.func_show_all);aq.find(".img_add").click(an.func_show_add);aq.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ar,at){var au=at.draggable;j(aq,au)}})}$("#dialog-add"+am+an.scope+ai).dialog(T().popup_dialog_opt);$("#dialog-edit"+am+an.scope+ai).dialog(T().popup_dialog_opt);M(aq);utils.bind_hover(aq.find(".save_button"));$("#dialog-edit"+am+an.scope+an.prefix).dialog("open")})}function I(){$("#left_box").load(N,null,function(){var ai=$("#save-form");utils.set_data(ai.find("#members"),"members",[]);$("#left_box").css("width","300px");$(".save_button.save").click(B);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_type").change(P);$(".img_folder").click(u);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(aj,ak){var al=ak.draggable;j(ai,al)}});$("#dialog-add").dialog(ad);$("#dialog-edit").dialog(ad);R(ai,1);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function P(){var ai=utils.get_parent(this,2);var aj=$(this).val();var ak=parseInt(aj,10);R(ai,ak)}function k(){utils.cancel_form();X();nav_list.show_list()}function Q(){utils.cancel_form();C()}function n(ak){var ai=$(ak.self).parent().attr("id");var aj=(ak.clone==null?"":"&clone=1");$("#left_box").load(N+"?id="+ai+aj,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(ak.clone==null){return r(ai)}else{return B()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_folder").click(u);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(al,am){var an=am.draggable;j($("#save-form"),an)}});$("#dialog-add").dialog(ad);$("#dialog-edit").dialog(ad);M($("#save-form"));utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function B(){var ai=$("#save-form");var aj=l(ai,"","");var ak={url:N,data:aj,func_success:k};list_form.save(ak);C();return false}function A(){var ai=this;n({self:ai,clone:null})}function r(ai){var aj=$("#save-form");var ak=l(aj,ai,"update");var al={url:N,data:ak,func_success:k};list_form.save(al);C();return false}function D(){var ap=$(this).parent();var aq=ap.attr("id");var ai=$("#id_pg").val();var al=ai.split(",");var ao=parseInt(al[3],10);--ao;var aj=$("#id_display").val();var an=$("#id_selection").val();var am=$("#id_query").val();var ak={id:aq,pgnum:ao,pgsize:aj,find:an,text:am,confirm:""};d(ak,ap)}function t(){var ai=this;n({self:ai,clone:1})}function d(aj,ai){$.post(Y,aj,function(ak){if(ak.hasgroups==1){$("#confirm_delete_body").html(ak.msg);var am=$("#confirm-delete");am.dialog("open");am.find(".save_button.save").click(function(){aj.confirm=1;am.dialog("close");d(aj,ai)});am.find(".save_button.cancel").click(function(){am.dialog("close")});utils.bind_hover(am.find(".save_button"))}else{if(ak.success==1){nav_list.set_item_msg(ak.itemscount);var al=ai.parent();al.remove();delete al}else{utils.show_dialog(2,ak)}}})}function S(aj){var am=aj.level-1;var aq=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var ar=(am<1?"":"_"+am);var ap=$("#save-form"+aq+aj.scope+an);var ao=$("#save-form"+aq+aj.scope+ar);var al=(aj.savetemp==null?"":aj.savetemp);var ak=l(ap,"",al);ak.level=aj.level;var ai=(aj.url==null?N:aj.url);$.post(ai,ak,function(at){if(at.success==1){if((aj.level==1&&aj.scope!="")||(al!=""&&aj.scope!="")){aj.func_add(at.id,at.name)}else{O(ao,at.id,at.name)}utils.cancel_dialog(aj.level,"#dialog-add"+aq+aj.scope)}else{if(at.error==1){err=utils.get_errors(at.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,at)}}});return false}function c(aj){var am=aj.level-1;var aq=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var ar=(am<1?"":"_"+am);var ap=$("#save-form"+aq+aj.scope+an);var ao=$("#save-form"+aq+aj.scope+ar);var al=(aj.savetemp==null?"update":aj.savetemp);var ak=l(ap,aj.id,al);ak.level=aj.level;var ai=(aj.url==null?N:aj.url);$.post(ai,ak,function(at){if(at.success==1){if(aj.level==1&&aj.scope!=""){aj.func_update(at.id,at.name,aj.self)}else{if(aj.level==2&&aj.savetemp!=null){aj.func_update(at.id,at.name,aj.self)}else{v=true;L(ao,at.id,at.name,aj.self)}}utils.cancel_dialog(aj.level,"#dialog-edit"+aq+aj.scope)}else{if(at.error==1){err=utils.get_errors(at.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,at)}}});return false}function l(ak,ai,aj){var am=ak.find("#id_type").val();var al={name:ak.find("#id_name").val(),type:am,comment:ak.find("#id_comment").val(),id:ai,save_type:aj};if(am=="1"){al.host=ak.find("#id_host").val()}else{if(am=="2"){al.hostname=ak.find("#id_hostname").val()}else{if(am=="3"){al.ipaddress=ak.find("#id_ipaddress").val();al.netmask=ak.find("#id_netmask").val()}else{if(am=="4"){arr=ak.find("#members").data("members");al.members=arr.join(",")}}}}return al}function R(ak,aj){for(var ai=1;ai<5;ai++){if(ai==aj){ak.find(".defnet_form"+aj).show()}else{ak.find(".defnet_form"+ai).hide()}}}function X(){var ai=$("#list-panel").dialog("isOpen");if(ai){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function u(){var aj=$("#list-panel").dialog("isOpen");if(aj){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var ai=utils.get_parent(this,4);$("#list_body").load(E.panel,null,function(){$(".add_button").click(function(){Z(ai)});$(".drag_zone").draggable(y);$("#id_filters").change(ah);$("#id_filter_text").keyup(function(){utils.countdown_filter(ah)});$("#id_filter_text").keydown(utils.stop_filter_timer);ag();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ah(){var ak="?find="+$("#id_filters").val();var ai=$("#id_filter_text").val();var aj=(ak=="?find=0"&&ai==""?"":ak+"&text="+ai);$("#panel_body").load(E.select+aj,null,function(){$(".drag_zone").draggable(y);ag()})}function ag(){utils.init_panel_tooltip(ac)}function g(){var ak=J(this);var ai=this;var aj={self:ai,level:ak.level,prefix:ak.prefix,scope:"",func_show_all:u,func_show_add:g};m(aj);return false}function j(ak,al){var aj=$(al);var ai=aj.html();var am=aj.parent().attr("id");O(ak,am,ai)}function O(am,ao,aj){var ak=parseInt(ao,10);var ai=am.find("#members").data("members");if(!utils.item_exist(ak,ai)){ai.push(ak);utils.set_data(am.find("#members"),"members",ai);var an={id_prefix:"item_",id:ak,click:"defnet.remove_member(this)",editclick:"defnet.edit_member(this)",name:aj};var al=new EJS({url:"/media/tpl/list_item.ejs"}).render(an);am.find("#members").append(al)}h(am,"#members")}function Z(ai){$("input[name=chklist]:checked").each(function(){var ak=$(this);var al=ak.parent().attr("id");var aj=ak.next().html();O(ai,al,aj)})}function p(an){var am=$(an);var ao=am.parent().attr("id");var ak=utils.get_itemid(ao);var al=utils.get_parent(am,5);var ai=al.find("#members").data("members");var aj=$.inArray(ak,ai);if(aj>=0){ai.splice(aj,1);utils.set_data(al.find("#members"),"members",ai)}al.find("#"+ao).remove();h(al,"#members");return false}function U(an){var al=$(an);var ap=al.parent().attr("id");var aj=utils.get_itemid(ap);var ak=utils.get_parent(al,5);var ao=H(ak);var ai=al;var am={self:ai,id:aj,level:ao.level,prefix:ao.prefix,scope:ao.scope,func_show_all:u,func_show_add:g};q(am);return false}function L(ak,am,aj,ai){$(ai).next().html(aj);var al=$("#list-panel").dialog("isOpen");if(al){ah()}}function J(ai){var aj=utils.get_parent(ai,4);return H(aj)}function H(ak){var ai=ak.attr("id");var am=utils.get_next_form_level(ai);var al=utils.get_prefix(ai);var aj=utils.get_form_scope(ai);return{level:am,prefix:al,scope:aj}}function M(ai){var aj=ai.find("#id_type").val();if(aj!="4"){return}arr=[];ai.find("#members > div").each(function(){var al=$(this).attr("id");var ak=utils.get_itemid(al);if(!utils.item_exist(ak,arr)){arr.push(ak)}});utils.set_data(ai.find("#members"),"members",arr);h(ai,"#members")}function h(aj,ai){aj.find(ai+" > div").removeClass("ui-state-default");aj.find(ai+" > div").removeClass("ui-state-hover");aj.find(ai+" > div:odd").addClass("ui-state-default");aj.find(ai+" > div:even").addClass("ui-state-hover")}function C(){if(v){v=false;nav_list.show_list()}}function ae(){$(".list_button.edit").click(A);$(".list_button.delete").click(D);$(".list_button.clone").click(t)}function ab(){V();$("#left_box").hide();$("#id_add").click(I);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("#dialog-add");utils.remove_dialog("#dialog-edit");utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.init_list_panel("#list-panel",X);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=F;nav_list.config.list_func=ae;nav_list.init()}function W(){return menu.get("/defnet/",ab)}return{load:W,list:E,add_members:Z,edit_member:U,remove_member:p,get_level_data:J,init_form:m,init_edit_form:q,init_tooltip:ag,save_inner_form:S,get_ui_opt:T,drop_scope:f,save_temp_url:af,list_temp:K,init_form_wizard:G,init_edit_form_wizard:w}}());var defschedule=(function(){var B="/schedule_add/";var Q="/schedule/save/temp/";var F="/schedule_edit/";var k="/schedule_edit_temp/";var M="/schedule_delete/";var u="/schedule/list/";var t={panel:"/schedule/list/panel/",select:"schedule/list/panel_search/"};var y={panel:"/schedule/list/panel/temp/",select:"/schedule/list/panel_search/temp/"};var O=null;function J(){O={autoOpen:false,width:340,resizable:false,draggable:false,modal:false,stack:false,zIndex:10000}}function H(){J();return{popup_dialog_opt:O}}function j(W){var Y=$(W.self).offset();var T=[Y.left,utils.get_elm_top(Y.top)];var S="_"+W.level;var V=(W.scope==""?"":"-");var X=(W.scope==""?"":"&scope="+W.scope);utils.remove_dialog("#dialog-add"+V+W.scope+S);$("#dialog_edit_body"+V+W.scope+W.prefix).empty();$("#dialog-edit"+V+W.scope+W.prefix).dialog("close");var U=(W.url==null?B:W.url);$("#dialog-add"+V+W.scope+W.prefix).dialog("option","position",T);$("#dialog_body"+V+W.scope+W.prefix).load(U+"?level="+W.level+X,null,function(){var Z=$("#save-form"+V+W.scope+S);f(Z);Z.find("#id_type").change(C);Z.find(".save_button.save").click(function(){if(W.level==2&&W.scope=="schedule-profile"){return W.func_save()}else{if(W.scope==""||W.level>1){var ab={level:W.level,scope:W.scope};return G(ab)}else{if(W.level==1){return W.func_save()}}}return false});Z.find(".save_button.cancel").click(function(){utils.cancel_dialog(W.level,"#dialog-add"+V+W.scope)});E(Z,1);utils.bind_hover(Z.find(".save_button"));$("#dialog-add"+V+W.scope+W.prefix).dialog("open")})}function m(X){var Z=$(X.self).offset();var T=[Z.left,utils.get_elm_top(Z.top)];var S="_"+X.level;var W=(X.scope==""?"":"-");var Y=(X.scope==""?"":"&scope="+X.scope);var U=(X.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+W+X.scope+S);$("#dialog_body"+W+X.scope+X.prefix).empty();$("#dialog-add"+W+X.scope+X.prefix).dialog("close");var V=(X.url==null?k:X.url);$("#dialog-edit"+W+X.scope+X.prefix).dialog("option","position",T);$("#dialog_edit_body"+W+X.scope+X.prefix).load(V+X.id+"/?level="+X.level+Y+U,null,function(){var ab=$("#save-form"+W+X.scope+S);f(ab);ab.find("#id_type").change(C);ab.find(".save_button.save").click(function(){return c(X)});ab.find(".save_button.cancel").click(function(){utils.cancel_dialog(X.level,"#dialog-edit"+W+X.scope)});var ad=ab.find("#id_type").val();var ac=parseInt(ad,10);E(ab,ac);utils.bind_hover(ab.find(".save_button"));$("#dialog-edit"+W+X.scope+X.prefix).dialog("open")})}function w(){$("#left_box").load(B,null,function(){var S=$("#save-form");$("#left_box").css("width","330px");f(S);$(".save_button.save").click(function(){return q("0")});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_type").change(C);E(S,1);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function C(){var S=utils.get_parent(this,3);var T=$(this).val();var U=parseInt(T,10);E(S,U)}function l(U){var S=$(U.self).parent().attr("id");var T="/schedule_edit/";if(U.clone==1){T="/schedule_clone/"}T+=S+"/";$("#left_box").load(T,null,function(){var X=$("#save-form");$("#left_box").css("width","330px");f(X);$(".save_button.save").click(function(){return q(0)});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_type").change(C);utils.bind_hover($(".save_button,.form_title div.close"));var W=$("#id_type").val();var V=parseInt(W,10);E(X,V);$("#left_box").show()})}function q(){var S=$("#save-form");var U=g(S);var T=$("#id_action").val();if(T=="edit"){P(U)}else{h(U)}}function G(T){var W=T.level-1;var ab=(T.scope==""?"":"-");var X=(T.level<1?"":"_"+T.level);var ac=(W<1?"":"_"+W);var Z=$("#save-form"+ab+T.scope+X);var Y=$("#save-form"+ab+T.scope+ac);var V=(!("savetemp" in T)?"":T.savetemp);var S=(!("url" in T)?B:T.url);var U=g(Z);U.level=T.level;U.savetemp=V;$.post(S,U,function(ad){if(ad.success==1){T.func_add(ad.id,ad.name);utils.cancel_dialog(T.level,"#dialog-add"+ab+T.scope)}else{if(ad.error==1){err=utils.get_errors(ad.errors);utils.show_dialog(1,err)}else{if(ad.invalid){err=utils.get_errors(ad.invalid);utils.show_dialog(1,err)}else{err=utils.get_errors(ad.errors);utils.show_dialog(2,err)}}}});return false}function c(T){var W=T.level-1;var ab=(T.scope==""?"":"-");var X=(T.level<1?"":"_"+T.level);var ac=(W<1?"":"_"+W);var Z=$("#save-form"+ab+T.scope+X);var Y=$("#save-form"+ab+T.scope+ac);var V=(T.savetemp==null?"update":T.savetemp);var U=g(Z);U.savetemp=V;U.level=T.level;var S=(T.url==null?F:T.url);$.post(S+U.id+"/",U,function(ad){if(ad.success==1){if(T.level==1&&T.scope!=""){T.func_update(ad.id,ad.name,T.self)}if(T.level==2){T.func_update(ad.id,ad.name,T.self)}utils.cancel_dialog(T.level,"#dialog-edit"+ab+T.scope)}else{if(ad.error==1){err=utils.get_errors(ad.errors);utils.show_dialog(1,err)}else{if(ad.invalid){err=utils.get_errors(ad.invalid);utils.show_dialog(1,err)}else{utils.show_dialog(2,ad)}}}});return false}function q(Y){var V=Y-1;var X=(Y<1?"":"_"+Y);var S=(V<1?"":"_"+V);var T=$("#save-form"+X);var U=$("#save-form"+S);action=$("#id_action").val();var W=null;if(Y==0){W=g(U)}else{W=g(T);W.level=Y}if(action=="edit"){P(W)}else{h(W)}}function p(){var S=this;l({self:S,clone:null})}function P(S){var T=$("#id_id").val();url="/schedule_edit/"+T+"/";$.post(url,S,function(U){I(U)})}function r(){var ab=$(this).parent();var ac=ab.attr("id");var T=$("#id_pg").val();var W=T.split(",");var Z=parseInt(W[3],10);--Z;var U=$("#id_display").val();var Y=$("#id_selection").val();var X=$("#id_query").val();var V={id:ac,pgnum:Z,pgsize:U,find:Y,text:X,confirm:""};var S="/schedule_delete/"+ac+"/";d(S,V,ab)}function d(S,U,T){$.post(S,U,function(V){if(V.hasgroups==1){$("#confirm_delete_body").html(V.msg);var X=$("#confirm-delete");X.dialog("open");X.find(".save_button.save").click(function(){U.confirm=1;X.dialog("close");d(S,U,T)});X.find(".save_button.cancel").click(function(){X.dialog("close")});utils.bind_hover(X.find(".save_button"))}else{if(V.success==1){nav_list.set_item_msg(V.itemscount);var W=T.parent();W.remove();delete W}else{utils.show_dialog(2,V)}}})}function n(){var S=this;l({self:S,clone:1})}function I(S){if(S.Success){utils.cancel_form();nav_list.show_list()}if(S.invalid){err=utils.get_errors(S.invalid);utils.show_dialog(1,err)}if(S.error){utils.show_dialog(2,S.error)}}function D(V){var U=["0","0","0","0","0","0","0","0"];for(var T=0;T<V.length;T++){U[V[T]]="1"}var S=U.join("");return S}function L(U){var S=[];var T=null;U.find("input[name='checkbox_day']").each(function(){if($(this).attr("checked")=="checked"){var V=$(this).val();S.push(V)}});T=D(S);return T}function g(S){nameVar=S.find("#id_name").val();id=S.find("#id_id").val();typeVar=S.find("#id_type").val();commentVar=S.find("#id_comment").val();startTimeHourRecuringVar=S.find("#id_start_time_hour_recuring").val();startTimeMinRecuringVar=S.find("#id_start_time_min_recuring").val();endTimeHourRecuringVar=S.find("#id_end_time_hour_recuring").val();endTimeMinRecuringVar=S.find("#id_end_time_min_recuring").val();checkbox_dayVar=L(S);startdayyearSingleVar=S.find("#id_start_day_year_single").val();startdaymonthSingleVar=S.find("#id_start_day_month_single").val();startdaydaySingleVar=S.find("#id_start_day_day_single").val();starttimehourSingleVar=S.find("#id_start_time_hour_single").val();starttimeminSingleVar=S.find("#id_start_time_min_single").val();enddayyearSingleVar=S.find("#id_end_day_year_single").val();enddaymonthSingleVar=S.find("#id_end_day_month_single").val();enddaydaySingleVar=S.find("#id_end_day_day_single").val();endtimehourSingleVar=S.find("#id_end_time_hour_single").val();endtimeminSingleVar=S.find("#id_end_time_min_single").val();nameexistedVar=S.find("#id_nameexisted").val();var T={id:id,name:nameVar,type:typeVar,comment:commentVar,start_day_year_single:startdayyearSingleVar,start_day_month_single:startdaymonthSingleVar,start_day_day_single:startdaydaySingleVar,start_time_hour_single:starttimehourSingleVar,start_time_min_single:starttimeminSingleVar,end_day_year_single:enddayyearSingleVar,end_day_month_single:enddaymonthSingleVar,end_day_day_single:enddaydaySingleVar,end_time_hour_single:endtimehourSingleVar,end_time_min_single:endtimeminSingleVar,start_time_hour_recuring:startTimeHourRecuringVar,start_time_min_recuring:startTimeMinRecuringVar,end_time_hour_recuring:endTimeHourRecuringVar,end_time_min_recuring:endTimeMinRecuringVar,checkbox_temp:checkbox_dayVar,nameexisted:nameexistedVar};return T}function h(S){url="/schedule_add/";$.post(url,S,function(T){I(T)})}function E(T,S){if(S==1){T.find(".recuring").hide();T.find(".single").show()}else{T.find(".single").hide();T.find(".recuring").show()}}function R(){$(".list_button.edit").click(p);$(".list_button.delete").click(r);$(".list_button.clone").click(n)}function N(){$("#left_box").hide();$("#id_add").click(w);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_prev").click(nav_list.go_prev);$("#id_next").click(nav_list.go_next);utils.bind_hover($("#id_add,#id_find"));utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");nav_list.config.list_url=u;nav_list.config.list_func=R;nav_list.init()}function f(T){A(T);v(T);var S=new Date();$("#id_start_day_year_single").val(S.getFullYear());$("#id_start_day_month_single").val(S.getMonth()+1);$("#id_start_day_day_single").val(S.getDate());$("#start_datetime").val(S);$("#id_end_day_year_single").val(S.getFullYear());$("#id_end_day_month_single").val(S.getMonth()+1);$("#id_end_day_day_single").val(S.getDate());$("#end_datetime").val(S)}function A(T){startdayyearSingleVar=T.find("#id_start_day_year_single").val();startdaymonthSingleVar=T.find("#id_start_day_month_single").val();startdaydaySingleVar=T.find("#id_start_day_day_single").val();s=startdaymonthSingleVar+"/"+startdaydaySingleVar+"/"+startdayyearSingleVar;T.find("#start_datetime").val(s);var S={showOn:"button",buttonImage:"../media/css/img/SpriteImage/16/0255.png",constrainInput:true,showOtherMonths:true,buttonImageOnly:true,showButtonPanel:true,onSelect:function(V){var V=$(this).datepicker("getDate");var X=$(this).datepicker("getDate").getDate();var U=$(this).datepicker("getDate").getMonth()+1;var W=$(this).datepicker("getDate").getFullYear();T.find("#id_start_day_year_single").val(W);T.find("#id_start_day_month_single").val(U);T.find("#id_start_day_day_single").val(X)}};T.find("#start_datetime").datepicker(S)}function v(S){enddayyearSingleVar=S.find("#id_end_day_year_single").val();enddaymonthSingleVar=S.find("#id_end_day_month_single").val();enddaydaySingleVar=S.find("#id_end_day_day_single").val();e=enddaymonthSingleVar+"/"+enddaydaySingleVar+"/"+enddayyearSingleVar;S.find("#end_datetime").val(e);var T={showOn:"button",buttonImage:"../media/css/img/SpriteImage/16/0255.png",showOtherMonths:true,constrainInput:true,buttonImageOnly:true,showButtonPanel:true,onSelect:function(V){var V=$(this).datepicker("getDate");var X=$(this).datepicker("getDate").getDate();var U=$(this).datepicker("getDate").getMonth()+1;var W=$(this).datepicker("getDate").getFullYear();S.find("#id_end_day_year_single").val(W);S.find("#id_end_day_month_single").val(U);S.find("#id_end_day_day_single").val(X)}};S.find("#end_datetime").datepicker(T)}function K(){return menu.get("/schedule_list/",N)}return{load:K,list:t,list_temp:y,init_form:j,init_edit_form:m,save_inner_form:G,get_ui_opt:H,get_data:g,save_temp_url:Q,edit_temp_url:k}}());var defservices=(function(){var N="/defservices/save/";var Y="/defservices/delete/";var H="/defservices/list/";var ac="/defservices/info/";var G={panel:"/defservices/list/panel/",select:"/defservices/list/select/",panel_custom1:"/defservices/list/panel/custom1/",select_custom1:"/defservices/list/select/custom1/"};var t="/defservices/icmp/types/";var q="/defservices/icmp/codes/";var ad=null;var m=null;var B=null;var f="defservices";var A=false;function U(){ad={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};m={autoOpen:false,width:300,height:400,modal:false};B={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:f,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function S(){U();return{popup_dialog_opt:ad,popup_icmp_types_opt:m,drag_opt:B}}function n(al){var an=$(al.self).offset();var ai=[an.left,utils.get_elm_top(an.top)];var ah="_"+al.level;var ak=(al.scope==""?"":"-");var am=(al.scope==""?"":"&scope="+al.scope);utils.remove_dialog("#dialog-add"+ak+al.scope+ah);$("#dialog_edit_body"+ak+al.scope+al.prefix).empty();$("#dialog-edit"+ak+al.scope+al.prefix).dialog("close");var aj=(al.url==null?N:al.url);$("#dialog-add"+ak+al.scope+al.prefix).dialog("option","position",ai);$("#dialog_body"+ak+al.scope+al.prefix).load(aj+"?level="+al.level+am,null,function(){var ao=$("#save-form"+ak+al.scope+ah);utils.set_data(ao.find("#members"),"members",[]);ao.find("#id_type").change(P);ao.find(".save_button.save").click(function(){if(al.scope==""||al.level>1){var ap={level:al.level,scope:al.scope};return R(ap)}else{if(al.level==1){return al.func_save()}}return false});ao.find(".save_button.cancel").click(function(){utils.cancel_dialog(al.level,"#dialog-add"+ak+al.scope)});if(jQuery.isFunction(al.func_show_all)&&jQuery.isFunction(al.func_show_add)){ao.find(".img_folder").click(al.func_show_all);ao.find(".img_add").click(al.func_show_add);ao.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ap,aq){var ar=aq.draggable;j(ao,ar)}})}$("#dialog-add"+ak+al.scope+ah).dialog(S().popup_dialog_opt);$("#dialog-edit"+ak+al.scope+ah).dialog(S().popup_dialog_opt);ao.find(".icmptype_link").click(X);$("#dialog-icmptype"+ak+al.scope+ah).dialog(S().popup_icmp_types_opt);Q(ao,1);utils.bind_hover(ao.find(".save_button"));$("#dialog-edit"+ak+al.scope+al.prefix).dialog("close");$("#dialog-add"+ak+al.scope+al.prefix).dialog("open")})}function u(al){var an=$(al.self).offset();var ai=[an.left,utils.get_elm_top(an.top)];var ah="_"+al.level;var ak=(al.scope==""?"":"-");var am=(al.scope==""?"":"&scope="+al.scope);utils.remove_dialog("#dialog-edit"+al.edit+ak+al.scope+ah);$("#dialog_body"+ak+al.scope+al.prefix).empty();$("#dialog-add"+ak+al.scope+al.prefix).dialog("close");var aj=(al.url==null?N:al.url);$("#dialog-edit"+ak+al.scope+al.prefix).dialog("option","position",ai);$("#dialog_edit_body"+ak+al.scope+al.prefix).load(aj+"?id="+al.id+"&level="+al.level+am,null,function(){var ao=$("#save-form"+ak+al.scope+ah);ao.find("#id_type").change(P);ao.find(".save_button.save").click(function(){return c(al)});ao.find(".save_button.cancel").click(function(){utils.cancel_dialog(al.level,"#dialog-edit"+ak+al.scope);E()});if(jQuery.isFunction(al.func_show_all)&&jQuery.isFunction(al.func_show_add)){ao.find(".img_folder").click(al.func_show_all);ao.find(".img_add").click(al.func_show_add);ao.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ap,aq){var ar=aq.draggable;j(ao,ar)}})}$("#dialog-add"+ak+al.scope+ah).dialog(S().popup_dialog_opt);$("#dialog-edit"+ak+al.scope+ah).dialog(S().popup_dialog_opt);ao.find(".icmptype_link").click(X);$("#dialog-icmptype"+ak+al.scope+ah).dialog(S().popup_icmp_types_opt);M(ao);utils.bind_hover(ao.find(".save_button"));$("#dialog-add"+ak+al.scope+al.prefix).dialog("close");$("#dialog-edit"+ak+al.scope+al.prefix).dialog("open")})}function J(){$("#left_box").load(N,null,function(){var ah=$("#save-form");utils.set_data(ah.find("#members"),"members",[]);$("#left_box").css("width","300px");$(".save_button.save").click(function(){return D()});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_type").change(P);$(".img_folder").click(y);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ai,aj){var ak=aj.draggable;j(ah,ak)}});$("#dialog-add").dialog(ad);$("#dialog-edit").dialog(ad);$(".icmptype_link").click(X);$("#dialog-icmptype").dialog(m);utils.bind_hover($(".save_button,.form_title div.close"));Q(ah,1);$("#left_box").show()});return false}function P(){var ah=utils.get_parent(this,2);var ai=$(this).val();var aj=parseInt(ai,10);Q(ah,aj)}function k(){utils.cancel_form();W();nav_list.show_list()}function p(aj){var ah=$(aj.self).parent().attr("id");var ai=(aj.clone==null?"":"&clone=1");$("#left_box").load(N+"?id="+ah,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(aj.clone==null){return v(ah)}else{return D()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_folder").click(y);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ak,al){var am=al.draggable;j($("#save-form"),am)}});$("#dialog-add").dialog(ad);$("#dialog-edit").dialog(ad);$(".icmptype_link").click(X);$("#dialog-icmptype").dialog(S().popup_icmp_types_opt);M($("#save-form"));utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function D(){var ah=$("#save-form");var ai=l(ah,"","");var aj={url:N,data:ai,func_success:k};list_form.save(aj);E();return false}function C(){var ah=this;p({self:ah,clone:null})}function v(ah){var ai=$("#save-form");var aj=l(ai,ah,"update");var ak={url:N,data:aj,func_success:k};list_form.save(ak);E();return false}function F(){var ao=$(this).parent();var ap=ao.attr("id");var ah=$("#id_pg").val();var ak=ah.split(",");var an=parseInt(ak[3],10);--an;var ai=$("#id_display").val();var am=$("#id_selection").val();var al=$("#id_query").val();var aj={id:ap,pgnum:an,pgsize:ai,find:am,text:al,confirm:""};d(aj,ao)}function w(){var ah=this;p({self:ah,clone:1})}function d(ai,ah){$.post(Y,ai,function(aj){if(aj.hasgroups==1){$("#confirm_delete_body").html(aj.msg);var al=$("#confirm-delete");al.dialog("open");al.find(".save_button.save").click(function(){ai.confirm=1;al.dialog("close");d(ai,ah)});al.find(".save_button.cancel").click(function(){al.dialog("close")});utils.bind_hover(al.find(".save_button"))}else{if(aj.success==1){nav_list.set_item_msg(aj.itemscount);var ak=ah.parent();ak.remove();delete ak}else{utils.show_dialog(2,aj)}}})}function R(ao){var al=ao.level-1;var aj=(ao.scope==""?"":"-");var an=(ao.level<1?"":"_"+ao.level);var ah=(al<1?"":"_"+al);var ai=$("#save-form"+aj+ao.scope+an);var ak=$("#save-form"+aj+ao.scope+ah);var am=l(ai,"","");am.level=ao.level;$.post(N,am,function(ap){if(ap.success==1){if(ao.level==1&&ao.scope!=""){ao.func_add(ap.id,ap.name)}else{O(ak,ap.id,ap.name)}utils.cancel_dialog(ao.level,"#dialog-add"+aj+ao.scope)}else{if(ap.error==1){err=utils.get_errors(ap.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,ap)}}});return false}function c(ao){var al=ao.level-1;var aj=(ao.scope==""?"":"-");var an=(ao.level<1?"":"_"+ao.level);var ah=(al<1?"":"_"+al);var ai=$("#save-form"+aj+ao.scope+an);var ak=$("#save-form"+aj+ao.scope+ah);var am=l(ai,ao.id,"update");am.level=ao.level;$.post(N,am,function(ap){if(ap.success==1){if(ao.level==1&&ao.scope!=""){ao.func_update(ap.id,ap.name,ao.self)}else{A=true;L(ak,ap.id,ap.name,ao.self)}utils.cancel_dialog(ao.level,"#dialog-edit"+aj+ao.scope)}else{if(ap.error==1){err=utils.get_errors(ap.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,ap)}}});return false}function l(aj,ah,ai){var am=aj.find("#id_type").val();var ak={name:aj.find("#id_name").val(),type:am,comment:aj.find("#id_comment").val(),id:ah,save_type:ai};if(am=="1"||am=="2"){var al=aj.find(".defservices_form"+am);ak.dstport=al.find("#id_dstport").val();ak.srcport=al.find("#id_srcport").val()}else{if(am=="3"){ak.icmptype=aj.find("#id_icmptype").val();ak.code=aj.find("#id_code").val()}else{if(am=="4"){ak.protocol=aj.find("#id_protocol").val()}else{if(am=="5"){arr=aj.find("#members").data("members");ak.members=arr.join(",")}}}}return ak}function Q(aj,ai){for(var ah=1;ah<6;ah++){if(ah==ai){aj.find(".defservices_form"+ai).show()}else{aj.find(".defservices_form"+ah).hide()}}}function W(){var ah=$("#list-panel").dialog("isOpen");if(ah){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function y(){var ai=$("#list-panel").dialog("isOpen");if(ai){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var ah=utils.get_parent(this,4);$("#list_body").load(G.panel,null,function(){$(".add_button").click(function(){Z(ah)});$(".drag_zone").draggable(B);$("#id_filters").change(ag);$("#id_filter_text").keyup(function(){utils.countdown_filter(ag)});$("#id_filter_text").keydown(utils.stop_filter_timer);af();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ag(){var aj="?find="+$("#id_filters").val();var ah=$("#id_filter_text").val();var ai=(aj=="?find=0"&&ah==""?"":aj+"&text="+ah);$("#panel_body").load(G.select+ai,null,function(){$(".drag_zone").draggable(B);af()})}function af(){utils.init_panel_tooltip(ac)}function g(){var aj=K(this);var ah=this;var ai={self:ah,level:aj.level,prefix:aj.prefix,scope:"",func_show_all:y,func_show_add:g};n(ai);return false}function X(){var aj=utils.get_parent(this,2);var ah=aj.attr("id");var ao=utils.get_form_level(ah);var al=utils.get_form_scope(ah);var ai=(al==""?"":"-");var an=utils.get_prefix(ah);var ak=(ao<1?"":"?level="+ao);var am=(ao<1?"":"&level="+ao);$("#dialog_icmptype"+ai+al+an).load(t+ak,null,function(){$("#tb_icmp_types"+an+" tbody").selectable({selected:function(ap,ar){var at=$(ar.selected);at.addClass("ui-priority-primary ui-state-active");var aq=at.find(".icmp_type").text();$("#codes"+an).load(q+"?type="+aq+am,null,function(){$("#tb_icmp_codes"+an+" tbody").selectable({selected:function(au,av){$(av.selected).addClass("ui-priority-primary ui-state-active")},unselected:function(au,av){$(av.unselected).removeClass("ui-priority-primary ui-state-active")}})})},unselected:function(ap,aq){$(aq.unselected).removeClass("ui-priority-primary ui-state-active")}});$("#icmp_btn"+an).find(".save_button.ok").click(function(){var ap=$("#tb_icmp_types"+an+" tbody").find(".ui-selected td.icmp_type").text();var aq=$("#tb_icmp_codes"+an+" tbody").find(".ui-selected td.icmp_code").text();ap=(ap==null?"":ap);aq=(aq==null?"":aq);aj.find("#id_icmptype").val(ap);aj.find("#id_code").val(aq);$("#dialog-icmptype"+ai+al+an).dialog("close")});$("#icmp_btn"+an).find(".save_button.cancel").click(function(){$("#dialog-icmptype"+an).dialog("close")});utils.bind_hover($("#icmp_btn"+an).find(".save_button"))});$("#dialog-icmptype"+ai+al+an).dialog("open");return false}function j(aj,ak){var ai=$(ak);var ah=ai.html();var al=ai.parent().attr("id");O(aj,al,ah)}function O(al,an,ai){var aj=parseInt(an,10);var ah=al.find("#members").data("members");if(!utils.item_exist(aj,ah)){ah.push(aj);utils.set_data(al.find("#members"),"members",ah);var am={id_prefix:"item_",id:aj,click:"defservices.remove_member(this)",editclick:"defservices.edit_member(this)",name:ai};var ak=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.find("#members").append(ak)}h(al,"#members")}function Z(ah){$("input[name=chklist]:checked").each(function(){var aj=$(this);var ak=aj.parent().attr("id");var ai=aj.next().html();O(ah,ak,ai)})}function r(am){var al=$(am);var an=al.parent().attr("id");var aj=utils.get_itemid(an);var ak=utils.get_parent(al,5);var ah=ak.find("#members").data("members");var ai=$.inArray(aj,ah);if(ai>=0){ah.splice(ai,1);utils.set_data(ak.find("#members"),"members",ah)}ak.find("#"+an).remove();h(ak,"#members");return false}function T(am){var ak=$(am);var ao=ak.parent().attr("id");var ai=utils.get_itemid(ao);var aj=utils.get_parent(ak,5);var an=I(aj);var ah=ak;var al={self:ah,id:ai,level:an.level,prefix:an.prefix,scope:an.scope,func_show_all:y,func_show_add:g};u(al);return false}function L(aj,al,ai,ah){$(ah).next().html(ai);var ak=$("#list-panel").dialog("isOpen");if(ak){ag()}}function K(ah){var ai=utils.get_parent(ah,4);return I(ai)}function I(aj){var ah=aj.attr("id");var al=utils.get_next_form_level(ah);var ak=utils.get_prefix(ah);var ai=utils.get_form_scope(ah);return{level:al,prefix:ak,scope:ai}}function M(ah){var ai=ah.find("#id_type").val();if(ai!="5"){return}arr=[];$("#save-form").find("#members > div").each(function(){var ak=$(this).attr("id");var aj=utils.get_itemid(ak);if(!utils.item_exist(aj,arr)){arr.push(aj)}});utils.set_data(ah.find("#members"),"members",arr);h(ah,"#members")}function h(ai,ah){ai.find(ah+" > div").removeClass("ui-state-default");ai.find(ah+" > div").removeClass("ui-state-hover");ai.find(ah+" > div:odd").addClass("ui-state-default");ai.find(ah+" > div:even").addClass("ui-state-hover")}function E(){if(A){A=false;nav_list.show_list()}}function ae(){$(".list_button.edit").click(C);$(".list_button.delete").click(F);$(".list_button.clone").click(w)}function ab(){U();$("#left_box").hide();$("#id_add").click(J);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection,#id_find").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("#dialog-add");utils.remove_dialog("#dialog-edit");utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.init_list_panel("#list-panel",W);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=H;nav_list.config.list_func=ae;nav_list.init()}function V(){return menu.get("/defservices/",ab)}return{load:V,list:G,add_members:Z,edit_member:T,remove_member:r,get_level_data:K,init_form:n,init_edit_form:u,init_tooltip:af,save_inner_form:R,get_ui_opt:S,drop_scope:f}}());var defuser=(function(){var L="/defuser/save/";var W="/defuser/delete/";var E="/defuser/list/";var D={panel:"/defuser/list/panel/",select:"/defuser/list/select/"};var I={panel:"/defuser/list/panel/temp/",select:"/defuser/list/select/temp/"};var Z=null;var w=null;var f="defuser";var v=false;function T(){Z={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};w={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:f,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function R(){T();return{popup_dialog_opt:Z,drag_opt:w}}function m(ah){var aj=$(ah.self).offset();var ae=[aj.left,utils.get_elm_top(aj.top)];var ad="_"+ah.level;var ag=(ah.scope==""?"":"-");var ai=(ah.scope==""?"":"&scope="+ah.scope);utils.remove_dialog("#dialog-add"+ag+ah.scope+ad);$("#dialog_edit_body"+ag+ah.scope+ah.prefix).empty();$("#dialog-edit"+ag+ah.scope+ah.prefix).dialog("close");var af=(ah.url==null?L:ah.url);$("#dialog-add"+ag+ah.scope+ah.prefix).dialog("option","position",ae);$("#dialog_body"+ag+ah.scope+ah.prefix).load(af+"?level="+ah.level+ai,null,function(){var ak=$("#save-form"+ag+ah.scope+ad);utils.set_data(ak.find("#members"),"members",[]);ak.find("#id_type").change(M);ak.find(".save_button.save").click(function(){if(ah.scope==""||ah.level>1){var al={level:ah.level,scope:ah.scope};return Q(al)}else{if(ah.level==1){return ah.func_save()}}return false});ak.find(".save_button.cancel").click(function(){utils.cancel_dialog(ah.level,"#dialog-add"+ag+ah.scope);B()});if(jQuery.isFunction(ah.func_show_all)&&jQuery.isFunction(ah.func_show_add)){ak.find(".img_folder").click(ah.func_show_all);ak.find(".img_add").click(ah.func_show_add);ak.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(al,am){var an=am.draggable;j(ak,an)}})}$("#dialog-add"+ag+ah.scope+ad).dialog(R().popup_dialog_opt);$("#dialog-edit"+ag+ah.scope+ad).dialog(R().popup_dialog_opt);P(ak,1);utils.bind_hover(ak.find(".save_button"));$("#dialog-edit"+ag+ah.scope+ah.prefix).dialog("close");$("#dialog-add"+ag+ah.scope+ah.prefix).dialog("open")})}function q(ah){var aj=$(ah.self).offset();var ae=[aj.left,utils.get_elm_top(aj.top)];var ad="_"+ah.level;var ag=(ah.scope==""?"":"-");var ai=(ah.scope==""?"":"&scope="+ah.scope);utils.remove_dialog("#dialog-edit"+ag+ah.scope+ad);$("#dialog_body"+ag+ah.scope+ah.prefix).empty();$("#dialog-add"+ag+ah.scope+ah.prefix).dialog("close");var af=(ah.url==null?L:ah.url);$("#dialog-edit"+ag+ah.scope+ah.prefix).dialog("option","position",ae);$("#dialog_edit_body"+ag+ah.scope+ah.prefix).load(af+"?id="+ah.id+"&level="+ah.level+ai,null,function(){var ak=$("#save-form"+ag+ah.scope+ad);ak.find("#id_type").change(M);ak.find(".save_button.save").click(function(){return c(ah)});ak.find(".save_button.cancel").click(function(){utils.cancel_dialog(ah.level,"#dialog-edit"+ag+ah.scope);B()});if(jQuery.isFunction(ah.func_show_all)&&jQuery.isFunction(ah.func_show_add)){ak.find(".img_folder").click(ah.func_show_all);ak.find(".img_add").click(ah.func_show_add);ak.find("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(al,am){var an=am.draggable;j(ak,an)}})}ak.find("#id_password").val("**********");$("#dialog-add"+ag+ah.scope+ad).dialog(R().popup_dialog_opt);$("#dialog-edit"+ag+ah.scope+ad).dialog(R().popup_dialog_opt);K(ak);utils.bind_hover(ak.find(".save_button"));$("#dialog-add"+ag+ah.scope+ah.prefix).dialog("close");$("#dialog-edit"+ag+ah.scope+ah.prefix).dialog("open")})}function G(){$("#left_box").load(L,null,function(){var ad=$("#save-form");utils.set_data(ad.find("#members"),"members",[]);$("#left_box").css("width","300px");$(".save_button.save").click(A);$(".save_button.cancel,.form_title div.close").click(O);$("#id_type").change(M);$(".img_folder").click(u);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ae,af){var ag=af.draggable;j(ad,ag)}});$("#dialog-add").dialog(Z);$("#dialog-edit").dialog(Z);utils.bind_hover($(".save_button,.form_title div.close"));P(ad,1);$("#left_box").show()});return false}function M(){var ad=utils.get_parent(this,2);var ae=$(this).val();var af=parseInt(ae,10);P(ad,af)}function k(){utils.cancel_form();V();nav_list.show_list()}function O(){utils.cancel_form();B()}function n(af){var ad=$(af.self).parent().attr("id");var ae=(af.clone==null?"":"&clone=1");$("#left_box").load(L+"?id="+ad+ae,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(af.clone==null){return r(ad)}else{return A()}});$(".save_button.cancel,.form_title div.close").click(O);$(".img_folder").click(u);$(".img_add").click(g);$("#members_dropzone").droppable({hoverClass:"ui-state-active",scope:f,drop:function(ag,ah){var ai=ah.draggable;j($("#save-form"),ai)}});$("#id_password").val("**********");$("#dialog-add").dialog(Z);$("#dialog-edit").dialog(Z);K($("#save-form"));utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function A(){var ad=$("#save-form");var ae=l(ad,"","");var af={url:L,data:ae,func_success:k};list_form.save(af);B();return false}function y(){var ad=this;n({self:ad,clone:null})}function r(ad){var ae=$("#save-form");var af=l(ae,ad,"update");var ag={url:L,data:af,func_success:k};list_form.save(ag);B();return false}function C(){var ak=$(this).parent();var al=ak.attr("id");var ad=$("#id_pg").val();var ag=ad.split(",");var aj=parseInt(ag[3],10);--aj;var ae=$("#id_display").val();var ai=$("#id_selection").val();var ah=$("#id_query").val();var af={id:al,pgnum:aj,pgsize:ae,find:ai,text:ah,confirm:""};d(af,ak)}function t(){var ad=this;n({self:ad,clone:1})}function d(ae,ad){$.post(W,ae,function(af){if(af.hasgroups==1){$("#confirm_delete_body").html(af.msg);var ah=$("#confirm-delete");ah.dialog("open");ah.find(".save_button.save").click(function(){ae.confirm=1;ah.dialog("close");d(ae,ad)});ah.find(".save_button.cancel").click(function(){ah.dialog("close")});utils.bind_hover(ah.find(".save_button"))}else{if(af.success==1){nav_list.set_item_msg(af.itemscount);var ag=ad.parent();ag.remove();delete ag}else{utils.show_dialog(2,af)}}})}function Q(ak){var ah=ak.level-1;var af=(ak.scope==""?"":"-");var aj=(ak.level<1?"":"_"+ak.level);var ad=(ah<1?"":"_"+ah);var ae=$("#save-form"+af+ak.scope+aj);var ag=$("#save-form"+af+ak.scope+ad);var ai=l(ae,"","");ai.level=ak.level;$.post(L,ai,function(al){if(al.success==1){if(ak.level==1&&ak.scope!=""){ak.func_add(al.id,al.name)}else{N(ag,al.id,al.name)}utils.cancel_dialog(ak.level,"#dialog-add"+af+ak.scope)}else{if(al.error==1){err=utils.get_errors(al.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,al)}}});return false}function c(ak){var ah=ak.level-1;var af=(ak.scope==""?"":"-");var aj=(ak.level<1?"":"_"+ak.level);var ad=(ah<1?"":"_"+ah);var ae=$("#save-form"+af+ak.scope+aj);var ag=$("#save-form"+af+ak.scope+ad);var ai=l(ae,ak.id,"update");ai.level=ak.level;$.post(L,ai,function(al){if(al.success==1){if(ak.level==1&&ak.scope!=""){ak.func_update(al.id,al.name,ak.self)}else{v=true;J(ag,al.id,al.name,ak.self)}utils.cancel_dialog(ak.level,"#dialog-edit"+af+ak.scope)}else{if(al.error==1){err=utils.get_errors(al.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,al)}}});return false}function l(af,ad,ae){var ah=af.find("#id_type").val();var ag={name:af.find("#id_name").val(),type:ah,accesstype:af.find("#id_accesstype").val(),comment:af.find("#id_comment").val(),id:ad,save_type:ae};if(ah=="1"){ag.displayname=af.find("#id_displayname").val();ag.password=af.find("#id_password").val();if(ae===""){ag.confirm_password=af.find("#id_confirm_password").val()}}else{if(ah=="2"){arr=af.find("#members").data("members");ag.members=arr.join(",")}}return ag}function P(af,ae){for(var ad=1;ad<3;ad++){if(ad==ae){af.find(".defuser_form"+ae).show()}else{af.find(".defuser_form"+ad).hide()}}}function V(){var ad=$("#list-panel").dialog("isOpen");if(ad){$("#list-panel").dialog("close")}$("#leftcolumn").show()}function u(){var ae=$("#list-panel").dialog("isOpen");if(ae){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var ad=utils.get_parent(this,4);$("#list_body").load(D.panel,null,function(){$(".add_button").click(function(){X(ad)});$(".drag_zone").draggable(w);$("#id_filters").change(ac);$("#id_filter_text").keyup(function(){utils.countdown_filter(ac)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ac(){var af="?find="+$("#id_filters").val();var ad=$("#id_filter_text").val();var ae=(af=="?find=0"&&ad==""?"":af+"&text="+ad);$("#panel_body").load(D.select+ae,null,function(){$(".drag_zone").draggable(w)})}function g(){var af=H(this);var ad=this;var ae={self:ad,level:af.level,prefix:af.prefix,scope:"",func_show_all:u,func_show_add:g};m(ae);return false}function j(af,ag){var ae=$(ag);var ad=ae.html();var ah=ae.parent().attr("id");N(af,ah,ad)}function N(ah,aj,ae){var af=parseInt(aj,10);var ad=ah.find("#members").data("members");if(!utils.item_exist(af,ad)){ad.push(af);utils.set_data(ah.find("#members"),"members",ad);var ai={id_prefix:"item_",id:af,click:"defuser.remove_member(this)",editclick:"defuser.edit_member(this)",name:ae};var ag=new EJS({url:"/media/tpl/list_item.ejs"}).render(ai);ah.find("#members").append(ag)}h(ah,"#members")}function X(ad){$("input[name=chklist]:checked").each(function(){var af=$(this);var ag=af.parent().attr("id");var ae=af.next().html();N(ad,ag,ae)})}function p(ai){var ah=$(ai);var aj=ah.parent().attr("id");var af=utils.get_itemid(aj);var ag=utils.get_parent(ah,5);var ad=ag.find("#members").data("members");var ae=$.inArray(af,ad);if(ae>=0){ad.splice(ae,1);utils.set_data(ag.find("#members"),"members",ad)}ag.find("#"+aj).remove();h(ag,"#members");return false}function S(ai){var ag=$(ai);var ak=ag.parent().attr("id");var ae=utils.get_itemid(ak);var af=utils.get_parent(ag,5);var aj=F(af);var ad=ag;var ah={self:ad,id:ae,level:aj.level,prefix:aj.prefix,scope:aj.scope,func_show_all:u,func_show_add:g};q(ah);return false}function J(af,ah,ae,ad){$(ad).next().html(ae);var ag=$("#list-panel").dialog("isOpen");if(ag){ac()}}function H(ad){var ae=utils.get_parent(ad,4);return F(ae)}function F(af){var ad=af.attr("id");var ah=utils.get_next_form_level(ad);var ag=utils.get_prefix(ad);var ae=utils.get_form_scope(ad);return{level:ah,prefix:ag,scope:ae}}function K(ad){var ae=ad.find("#id_type").val();if(ae!="2"){return}arr=[];ad.find("#members > div").each(function(){var ag=$(this).attr("id");var af=utils.get_itemid(ag);if(!utils.item_exist(af,arr)){arr.push(af)}});utils.set_data(ad.find("#members"),"members",arr);h(ad,"#members")}function h(ae,ad){ae.find(ad+" > div").removeClass("ui-state-default");ae.find(ad+" > div").removeClass("ui-state-hover");ae.find(ad+" > div:odd").addClass("ui-state-default");ae.find(ad+" > div:even").addClass("ui-state-hover")}function B(){if(v){v=false;nav_list.show_list()}}function ab(){$(".list_button.edit").click(y);$(".list_button.delete").click(C);$(".list_button.clone").click(t)}function Y(){T();$("#left_box").hide();$("#id_add").click(G);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection,#id_find").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("#dialog-add");utils.remove_dialog("#dialog-edit");utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.init_list_panel("#list-panel",V);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=E;nav_list.config.list_func=ab;nav_list.init()}function U(){return menu.get("/defuser/",Y)}return{load:U,list:D,list_temp:I,get_data:l,add_members:X,add_member:N,edit_member:S,remove_member:p,get_level_data:H,init_form:m,init_edit_form:q,save_inner_form:Q,get_ui_opt:R}}());var lic=(function(){var g="/lic/";var f="/lic/activate/";var k="/lic/deactivate/";function d(){var l={licensekey:$("#id_licensekey").val()};$.post(f,l,function(m){if(m.success==1){stat.show_status(0,m.msg);$("#info").html(m.contents)}else{if(m.error==1){var n=utils.get_errors(m.errors);stat.show_status(1,n)}else{stat.show_status(1,m)}}});return false}function c(){var m=$("#id_id").val();if(m==""){m="0"}var l={licensekey:$("#id_licensekey").val(),id:m};$.post(k,l,function(n){if(n.success==1){stat.show_status(0,n.msg);$("#info").html(n.contents)}else{if(n.error==1){var p=utils.get_errors(n.errors);stat.show_status(1,p)}else{stat.show_status(1,n)}}});return false}function j(){$(".save_button.activate").click(d);$(".save_button.deactivate").click(c);utils.bind_hover($(".save_button"))}function h(){return menu.get(g,j)}return{load:h}}());var list_form=(function(){function c(d){$.post(d.url,d.data,function(f){if(f=="success"){d.func_success()}else{if(f.error==1){var g=utils.get_errors(f.errors);utils.show_dialog(1,g)}else{utils.show_dialog(2,f)}}});return false}return{save:c}}());var log=(function(){var f="/log/";var k="/log/init/";var m="/log/run/";var j="/log/files/";var c;var d=1000;function g(){clearTimeout(c)}function h(){g();if($("#id_pause").attr("checked")!="checked"){c=setTimeout(q,d)}}function p(){g();var v=$("#id_filter").val();v=$.trim(v);var w=($("#id_autoscroll").attr("checked")=="checked"?true:false);var y={type:$("#id_type").val(),file:$("#id_file").val(),filter:v};$.post(k,y,function(A){$("#id_content").html(A);if(w){$("#id_content").scrollTop($("#id_content")[0].scrollHeight)}h()})}function q(){var v=$("#id_filter").val();v=$.trim(v);var w=($("#id_autoscroll").attr("checked")=="checked"?true:false);var y={type:$("#id_type").val(),file:$("#id_file").val(),filter:v};$.post(m,y,function(A){if(A!="failure"&&A!=""){$("#id_content").append(A);if(w){$("#id_content").scrollTop($("#id_content")[0].scrollHeight)}}h()})}function l(v){if(v.keyCode=="13"){v.preventDefault();v.stopPropagation();p()}}function u(){if(this.checked){g()}else{q()}}function n(){var w=$(this).val();$.get(j,{type:w},function(v){$("#id_file").html(v);var y=$("#id_file").children().length;if(y==1){p()}})}function t(){$("#id_type").change(n);$("#id_file").change(p);$("#id_filter").keypress(l);$("#id_pause").click(u);$("#id_pause").button();var v=$("#id_file").children().length;if(v==1){p()}}function r(){return menu.get(f,t)}return{load:r,run_url:m,stop_log_timer:g}}());var menu=(function(){function d(k,l,j){utils.clear_dialogs();dashboard.stop_refresh_timer();log.stop_log_timer();$("#contentcolumn div.innertube").load(k,null,l);return false}function c(){$("#menu a").removeClass("menu_active");$(this).addClass("menu_active")}function g(){var j=$("#id_accesstype_").val();$("#menu").accordion({autoHeight:false,animated:false,change:h});$("#menu a").click(c);if(j==utils.accesstype.admin){$("#menu_dashboard").next().hide();$("#menu_dashboard > a").addClass("menu_active");dashboard.load()}else{$("#menu_changepwd").next().hide();$("#menu_changepwd > a").addClass("menu_active");user.load()}}function f(){$("#leftcolumn div.innertube").load("/menu/",null,g)}function h(j,l){dashboard.stop_refresh_timer();log.stop_log_timer();patchupgrade.stop_log_timer();var k=$(l.newHeader);var m=k.attr("id");if(m=="menu_dashboard"||m=="menu_logout"||m=="menu_changepwd"){k.next().hide()}}return{load:f,get:d,init:g}}());var nat=(function(){var d={select:c,load:h};var f=null;function g(){var l=$("#list-panel").dialog("isOpen");if(l){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function c(l,m){g();$("#nat_tabs > div[id^='nat']").empty();utils.clear_dialogs()}function h(l,n){var m=n.index;f[m]()}function k(){f=[natpf.init,natmasq.init,natdnatsnat.init];$("#nat_tabs").tabs(d)}function j(){$("#nat_tabs").tabs("destroy");$("#nat_tabs").remove();return menu.get("/nat/",k)}return{load:j,hide_panel:g}}());var natdnatsnat=(function(){var T="/nat/dnatsnat/save/";var Z="/nat/dnatsnat/delete/";var ap="/nat/dnatsnat/list/";var a7=null;var a6=null;var a5=null;var a3=null;var a1=null;var a0=null;var aZ=null;function a8(){a7={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};a6={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defservices.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};a5={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};a3={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};a1={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defservices.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};a0={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};aZ={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defservices.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function L(){$("#left_box").load(T,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(aW);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_mode").change(V);ag("1");bq();K();X();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function V(){var br=$(this).val();ag(br)}function bq(){$("#orgsrc .img_folder").click(aK);$("#orgsrc .img_add").click(w);$("#orgport .img_folder").click(aI);$("#orgport .img_add").click(v);$("#orgdest .img_folder").click(aG);$("#orgdest .img_add").click(t);$("#newdesthost .img_folder").click(aE);$("#newdesthost .img_add").click(r);$("#newdestport .img_folder").click(aB);$("#newdestport .img_add").click(q);$("#newsrcaddr .img_folder").click(az);$("#newsrcaddr .img_add").click(p);$("#newsrcport .img_folder").click(ay);$("#newsrcport .img_add").click(n)}function K(){var br="ui-state-active";$("#id_originalsource").droppable({hoverClass:br,scope:defnet.drop_scope,drop:function(bs,bt){var bu=bt.draggable;ao(bu)}});$("#id_originalport").droppable({hoverClass:br,scope:defservices.drop_scope,drop:function(bs,bt){var bu=bt.draggable;au(bu)}});$("#id_originaldest").droppable({hoverClass:br,scope:defnet.drop_scope,drop:function(bs,bt){var bu=bt.draggable;M(bu)}});$("#id_newdesthost").droppable({hoverClass:br,scope:defnet.drop_scope,drop:function(bs,bt){var bu=bt.draggable;A(bu)}});$("#id_newdestport").droppable({hoverClass:br,scope:defservices.drop_scope,drop:function(bs,bt){var bu=bt.draggable;aC(bu)}});$("#id_newsrcaddr").droppable({hoverClass:br,scope:defnet.drop_scope,drop:function(bs,bt){var bu=bt.draggable;bo(bu)}});$("#id_newsrcport").droppable({hoverClass:br,scope:defservices.drop_scope,drop:function(bs,bt){var bu=bt.draggable;a4(bu)}})}function X(){$("#dialog-add-orgsrc").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-orgsrc").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-orgport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-edit-orgport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-add-orgdest").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-orgdest").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-newdesthost").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-newdesthost").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-newdestport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-edit-newdestport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-add-newsrcaddr").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-newsrcaddr").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-newsrcport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-edit-newsrcport").dialog(defservices.get_ui_opt().popup_dialog_opt)}function j(){utils.cancel_form();nav_list.show_list()}function a2(bt){var br=$(bt.self).parent().attr("id");var bs=(bt.clone==null?"":"&clone=1");$("#left_box").load(T+"?id="+br+bs,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(bt.clone==null){return J(br)}else{return aW()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_mode").change(V);bq();K();X();bn();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function aW(){var br=$("#save-form");var bs=ar(br,"","");var bt={url:T,data:bs,func_success:j};return list_form.save(bt)}function B(){var br=this;a2({self:br,clone:null})}function J(br){var bs=$("#save-form");var bt=ar(bs,br,"update");var bu={url:T,data:bt,func_success:j};return list_form.save(bu)}function bd(){var bw=$(this).parent();var bs=bw.attr("id");var by=$("#id_pg").val();var br=by.split(",");var bu=parseInt(br[3],10);--bu;var bv=$("#id_display").val();var bt=$("#id_query").val();var bx={id:bs,pgnum:bu,pgsize:bv,text:bt};$.post(Z,bx,function(bA){if(bA.indexOf("success")==0){var bz=bA.split("|");nav_list.set_item_msg(bz[1]);var bB=bw.parent();bB.remove();delete bB}else{utils.show_dialog(2,bA)}})}function aL(){var br=this;a2({self:br,clone:1})}function ar(bs,bD,bt){var bv=$("#id_originalsource").data("orgsrc");var by=$("#id_originalport").data("orgport");var br=$("#id_originaldest").data("orgdest");var bz=bs.find("#id_mode").val();var bu=$("#id_newdesthost").data("newdesthost");var bA=$("#id_newdestport").data("newdestport");var bC=$("#id_newsrcaddr").data("newsrcaddr");var bx=$("#id_newsrcport").data("newsrcport");var bB=(bs.find("#id_autoCreatePFRule").attr("checked")=="checked"?1:0);var bw={originalSource:bv,originalPort:by,originalDestination:br,mode:bz,autoCreatePFRule:bB,comment:bs.find("#id_comment").val(),id:bD,save_type:bt};if(bz=="1"||bz=="3"){bw.newDestinationHost=bu;bw.newDestinationPort=bA}else{if(bz=="2"||bz=="3"){bw.newSourceAddress=bC;bw.newSourcePort=bx}}return bw}function aK(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(aT);$(".drag_zone").draggable(a7);$("#id_filters").change(aP);$("#id_filter_text").keyup(function(){utils.countdown_filter(aP)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aP(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defnet.list.select_custom2+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a7);defnet.init_tooltip()})}function aI(){$("#leftcolumn").hide();$("#list_body").load(defservices.list.panel_custom1,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(al);$(".drag_zone").draggable(a6);$("#id_filters").change(aM);$("#id_filter_text").keyup(function(){utils.countdown_filter(aM)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aM(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defservices.list.select_custom1+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a6);defservices.init_tooltip()})}function aG(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(ae);$(".drag_zone").draggable(a5);$("#id_filters").change(aJ);$("#id_filter_text").keyup(function(){utils.countdown_filter(aJ)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aJ(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defnet.list.select_custom2+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a5);defnet.init_tooltip()})}function aE(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(aQ);$(".drag_zone").draggable(a3);$("#id_filters").change(aH);$("#id_filter_text").keyup(function(){utils.countdown_filter(aH)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aH(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defnet.list.select_custom2+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a3);defnet.init_tooltip()})}function aB(){$("#leftcolumn").hide();$("#list_body").load(defservices.list.panel_custom1,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(u);$(".drag_zone").draggable(a1);$("#id_filters").change(aF);$("#id_filter_text").keyup(function(){utils.countdown_filter(aF)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aF(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defservices.list.select_custom1+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a1);defservices.init_tooltip()})}function az(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(ax);$(".drag_zone").draggable(a0);$("#id_filters").change(aD);$("#id_filter_text").keyup(function(){utils.countdown_filter(aD)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aD(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defnet.list.select_custom2+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(a0);defnet.init_tooltip()})}function ay(){$("#leftcolumn").hide();$("#list_body").load(defservices.list.panel_custom1,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(G);$(".drag_zone").draggable(aZ);$("#id_filters").change(aA);$("#id_filter_text").keyup(function(){utils.countdown_filter(aA)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aA(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defservices.list.select_custom1+bs,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(aZ);defservices.init_tooltip()})}function Y(){return k(defnet.add_members,this)}function W(){return ac(defservices.add_members,this)}function U(){return k(defnet.add_members,this)}function S(){return k(defnet.add_members,this)}function R(){return ac(defservices.add_members,this)}function Q(){return k(defnet.add_members,this)}function O(){return ac(defservices.add_members,this)}function k(bt,br){var bu=$("#list-panel").dialog("isOpen");if(bu){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var bs=utils.get_parent(br,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){bt(bs)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(aw);$("#id_filter_text").keyup(function(){utils.countdown_filter(aw)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aw(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defnet.list.select+bs,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function ac(bt,br){var bu=$("#list-panel").dialog("isOpen");if(bu){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var bs=utils.get_parent(br,4);$("#list_body").load(defservices.list.panel,null,function(){$(".add_button").click(function(){bt(bs)});$(".drag_zone").draggable(defservices.get_ui_opt().drag_opt);$("#id_filters").change(bh);$("#id_filter_text").keyup(function(){utils.countdown_filter(bh)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bh(){var bt="?find="+$("#id_filters").val();var br=$("#id_filter_text").val();var bs=(bt=="?find=0"&&br==""?"":bt+"&text="+br);$("#panel_body").load(defservices.list.select+bs,null,function(){$(".drag_zone").draggable(defservices.get_ui_opt().drag_opt);defservices.init_tooltip()})}function w(){var br=this;var bs={self:br,scope:"orgsrc",func_save:aY,func_show_all:Y,func_show_add:ak};be(bs);return false}function v(){var br=this;var bs={self:br,scope:"orgport",func_save:g,func_show_all:W,func_show_add:aj};c(bs);return false}function t(){var br=this;var bs={self:br,scope:"orgdest",func_save:bk,func_show_all:U,func_show_add:ai};be(bs);return false}function r(){var br=this;var bs={self:br,scope:"newdesthost",func_save:ba,func_show_all:S,func_show_add:ah};be(bs);return false}function q(){var br=this;var bs={self:br,scope:"newdestport",func_save:m,func_show_all:R,func_show_add:af};c(bs);return false}function p(){var br=this;var bs={self:br,scope:"newsrcaddr",func_save:bb,func_show_all:Q,func_show_add:ad};be(bs);return false}function n(){var br=this;var bs={self:br,scope:"newsrcport",func_save:av,func_show_all:O,func_show_add:ab};c(bs);return false}function ak(){var br=this;var bs={self:br,scope:"orgsrc",func_show_all:Y,func_show_add:ak};D(bs);return false}function aj(){var br=this;var bs={self:br,scope:"orgport",func_show_all:W,func_show_add:aj};bp(bs);return false}function ai(){var br=this;var bs={self:br,scope:"orgdest",func_show_all:U,func_show_add:ai};D(bs);return false}function ah(){var br=this;var bs={self:br,scope:"newdesthost",func_show_all:S,func_show_add:ah};D(bs);return false}function af(){var br=this;var bs={self:br,scope:"newdestport",func_show_all:R,func_show_add:af};bp(bs);return false}function ad(){var br=this;var bs={self:br,scope:"newsrcaddr",func_show_all:Q,func_show_add:ad};D(bs);return false}function ab(){var br=this;var bs={self:br,scope:"newsrcport",func_show_all:O,func_show_add:ab};bp(bs);return false}function be(br){br.level=1;br.prefix="";defnet.init_form(br)}function c(br){br.level=1;br.prefix="";defservices.init_form(br)}function D(br){var bs=defnet.get_level_data(br.self);br.level=bs.level;br.prefix=bs.prefix;defnet.init_form(br)}function bp(br){var bs=defservices.get_level_data(br.self);br.level=bs.level;br.prefix=bs.prefix;defservices.init_form(br)}function aY(){var br={level:1,scope:"orgsrc",func_add:I};return defnet.save_inner_form(br)}function g(){var br={level:1,scope:"orgport",func_add:N};return defservices.save_inner_form(br)}function bk(){var br={level:1,scope:"orgdest",func_add:C};return defnet.save_inner_form(br)}function ba(){var br={level:1,scope:"newdesthost",func_add:E};return defnet.save_inner_form(br)}function m(){var br={level:1,scope:"newdestport",func_add:aO};return defservices.save_inner_form(br)}function bb(){var br={level:1,scope:"newsrcaddr",func_add:bg};return defnet.save_inner_form(br)}function av(){var br={level:1,scope:"newsrcport",func_add:aN};return defservices.save_inner_form(br)}function ao(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");I(bu,br)}function I(bu,br){utils.set_data($("#id_originalsource"),"orgsrc",bu);var bt={id_prefix:"orgsrc_",id:bu,click:"natdnatsnat.remove_originalsource(this)",editclick:"natdnatsnat.edit_originalsource(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_originalsource").html(bs)}function aT(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();I(bt,br)})}function au(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");N(bu,br)}function N(bu,br){utils.set_data($("#id_originalport"),"orgport",bu);var bt={id_prefix:"orgport_",id:bu,click:"natdnatsnat.remove_originalport(this)",editclick:"natdnatsnat.edit_originalport(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_originalport").html(bs)}function al(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();N(bt,br)})}function M(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");C(bu,br)}function C(bu,br){utils.set_data($("#id_originaldest"),"orgdest",bu);var bt={id_prefix:"orgdest_",id:bu,click:"natdnatsnat.remove_originaldest(this)",editclick:"natdnatsnat.edit_originaldest(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_originaldest").html(bs)}function ae(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();C(bt,br)})}function A(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");E(bu,br)}function E(bu,br){utils.set_data($("#id_newdesthost"),"newdesthost",bu);var bt={id_prefix:"newdesthost_",id:bu,click:"natdnatsnat.remove_newdesthost(this)",editclick:"natdnatsnat.edit_newdesthost(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_newdesthost").html(bs)}function aQ(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();E(bt,br)})}function aC(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");aO(bu,br)}function aO(bu,br){utils.set_data($("#id_newdestport"),"newdestport",bu);var bt={id_prefix:"newdestport_",id:bu,click:"natdnatsnat.remove_newdestport(this)",editclick:"natdnatsnat.edit_newdestport(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_newdestport").html(bs)}function u(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();aO(bt,br)})}function bo(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");bg(bu,br)}function bg(bu,br){utils.set_data($("#id_newsrcaddr"),"newsrcaddr",bu);var bt={id_prefix:"newsrcaddr_",id:bu,click:"natdnatsnat.remove_newsrcaddr(this)",editclick:"natdnatsnat.edit_newsrcaddr(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_newsrcaddr").html(bs)}function ax(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();bg(bt,br)})}function a4(bt){var bs=$(bt);var br=bs.html();var bu=bs.parent().attr("id");aN(bu,br)}function aN(bu,br){utils.set_data($("#id_newsrcport"),"newsrcport",bu);var bt={id_prefix:"newsrcport_",id:bu,click:"natdnatsnat.remove_newsrcport(this)",editclick:"natdnatsnat.edit_newsrcport(this)",name:br};var bs=new EJS({url:"/media/tpl/list_item.ejs"}).render(bt);$("#id_newsrcport").html(bs)}function G(){$("input[name=chklist]:checked").each(function(){var bs=$(this);var bt=bs.parent().attr("id");var br=bs.next().html();aN(bt,br)})}function bm(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_originalsource").removeData("orgsrc");$("#"+bt).remove();return false}function d(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_originalport").removeData("orgport");$("#"+bt).remove();return false}function bj(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_originaldest").removeData("orgdest");$("#"+bt).remove();return false}function y(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_newdesthost").removeData("newdesthost");$("#"+bt).remove();return false}function at(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_newdestport").removeData("newdestport");$("#"+bt).remove();return false}function h(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_newsrcaddr").removeData("newsrcaddr");$("#"+bt).remove();return false}function bf(bs){var br=$(bs);var bt=br.parent().attr("id");$("#id_newsrcport").removeData("newsrcport");$("#"+bt).remove();return false}function F(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"orgsrc",func_update:P,func_show_all:Y,func_show_add:ak};defnet.init_edit_form(bu);return false}function P(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aP()}}function bc(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"orgport",func_update:aV,func_show_all:W,func_show_add:aj};defservices.init_edit_form(bu);return false}function aV(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aM()}}function aR(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"orgdest",func_update:am,func_show_all:U,func_show_add:ai};defnet.init_edit_form(bu);return false}function am(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aJ()}}function aX(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"newdesthost",func_update:aq,func_show_all:S,func_show_add:ah};defnet.init_edit_form(bu);return false}function aq(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aH()}}function f(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"newdestport",func_update:bl,func_show_all:R,func_show_add:af};defservices.init_edit_form(bu);return false}function bl(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aF()}}function a9(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"newsrcaddr",func_update:bi,func_show_all:Q,func_show_add:ad};defnet.init_edit_form(bu);return false}function bi(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aD()}}function an(bv){var bt=$(bv);var bw=bt.parent().attr("id");var bs=utils.get_itemid(bw);var br=bt;var bu={self:br,id:bs,level:1,prefix:"",scope:"newsrcport",func_update:aS,func_show_all:O,func_show_add:ab};defservices.init_edit_form(bu);return false}function aS(bu,bs,br){$(br).next().html(bs);var bt=$("#list-panel").dialog("isOpen");if(bt){aA()}}function ag(br){if(br=="1"){$(".row.new_src").hide();$(".row.new_dest").show()}else{if(br=="2"){$(".row.new_dest").hide();$(".row.new_src").show()}else{$(".row.new_dest,.row.new_src").show()}}}function bn(){var bA=$("#id_mode").val();var bv=$("#id_originalsource > div").attr("id");var bD=utils.get_itemid(bv);utils.set_data($("#id_originalsource"),"orgsrc",bD);var bz=$("#id_originalport > div").attr("id");var bw=utils.get_itemid(bz);utils.set_data($("#id_originalport"),"orgport",bw);var br=$("#id_originaldest > div").attr("id");var bF=utils.get_itemid(br);utils.set_data($("#id_originaldest"),"orgdest",bF);if(bA=="1"||bA=="3"){var bu=$("#id_newdesthost > div").attr("id");var bt=utils.get_itemid(bu);utils.set_data($("#id_newdesthost"),"newdesthost",bt);var bB=$("#id_newdestport > div").attr("id");var by=utils.get_itemid(bB);utils.set_data($("#id_newdestport"),"newdestport",by)}else{if(bA=="2"||bA=="3"){var bE=$("#id_newsrcaddr > div").attr("id");var bs=utils.get_itemid(bE);utils.set_data($("#id_newsrcaddr"),"newsrcaddr",bs);var bx=$("#id_newsrcport > div").attr("id");var bC=utils.get_itemid(bx);utils.set_data($("#id_newsrcport"),"newsrcport",bC)}}ag(bA)}function H(){$(".list_button.edit").click(B);$(".list_button.delete").click(bd);$(".list_button.clone").click(aL)}function aU(){a8();$("#left_box").hide();$("#id_add").click(L);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("div[id^='dialog-add']");utils.remove_dialog("div[id^='dialog-edit']");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",nat.hide_panel);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=ap;nav_list.config.list_func=H;nav_list.init()}function l(){return menu.get("/nat/dnatsnat/",aU)}return{load:l,init:aU,edit_originalsource:F,remove_originalsource:bm,edit_originalport:bc,remove_originalport:d,edit_originaldest:aR,remove_originaldest:bj,edit_newdesthost:aX,remove_newdesthost:y,edit_newdestport:f,remove_newdestport:at,edit_newsrcaddr:a9,remove_newsrcaddr:h,edit_newsrcport:an,remove_newsrcport:bf}}());var natmasq=(function(){var C="/nat/masq/save/";var L="/nat/masq/delete/";var V="/nat/masq/save/location/";var t="/nat/masq/list/";var N=null;var G=null;function I(){N={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};G={items:"tr",start:function(W,X){var Y=$(".list_table > tbody > tr > td[id]").sortable("toArray");$(".list_table").data("arrold",Y);utils.set_data($(".list_table"),"arrold",Y)},update:F}}function y(){$("#network .img_folder").click(r);$("#network .img_add").click(R)}function U(){var W="ui-state-active";$("#id_network").droppable({hoverClass:W,scope:defnet.drop_scope,drop:function(X,Y){var Z=Y.draggable;c(Z)}})}function D(){$("#dialog-add-network").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-network").dialog(defnet.get_ui_opt().popup_dialog_opt)}function w(){$("#left_box").load(C,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(p);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);y();U();D();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function d(){utils.cancel_form();nav_list.show_list()}function k(Y){var W=$(Y.self).parent().attr("id");var X=(Y.clone==null?"":"&clone=1");$("#left_box").load(C+"?id="+W+X,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(Y.clone==null){return l(W)}else{return p()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);y();U();D();B();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function p(){var W=$("#save-form");var X=g(W,"","");var Y={url:C,data:X,func_success:d};return list_form.save(Y)}function n(){var W=this;k({self:W,clone:null})}function l(W){var X=$("#save-form");var Y=g(X,W,"update");var Z={url:C,data:Y,func_success:d};return list_form.save(Z)}function q(){var ac=$(this).parent();var X=ac.attr("id");var ae=$("#id_pg").val();var W=ae.split(",");var Z=parseInt(W[3],10);--Z;var ab=$("#id_display").val();var Y=$("#id_query").val();var ad={id:X,pgnum:Z,pgsize:ab,text:Y};$.post(L,ad,function(ag){if(ag.indexOf("success")==0){var af=ag.split("|");nav_list.set_item_msg(af[1]);var ah=ac.parent();ah.remove();delete ah}else{show_dialog(2,ag)}})}function m(){var W=this;k({self:W,clone:1})}function F(af,ae){var Y=$(".list_table > tbody > tr > td[id]").sortable("toArray");var Z=$(".list_table").data("arrold");var X=ae.item.children().attr("id");var ad=0;for(var ac=0;ac<Y.length;ac++){if(Y[ac].id==X){ad=ac+1;break}}var W=Z[ad-1].id;var ab={id:X,swapid:W};$.post(V,ab,function(ag){if(ag=="success"){nav_list.update_list()}else{utils.show_dialog(2,ag)}})}function g(Z,W,X){var Y=$("#id_network").data("network");var ab={network:Y,location:Z.find("#id_location").val(),comment:Z.find("#id_comment").val(),id:W,save_type:X};ab["interface"]=Z.find("#id_interface").val();return ab}function r(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(K);$(".drag_zone").draggable(N);$("#id_filters").change(H);$("#id_filter_text").keyup(function(){utils.countdown_filter(H)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function H(){var Y="?find="+$("#id_filters").val();var W=$("#id_filter_text").val();var X=(Y=="?find=0"&&W==""?"":Y+"&text="+W);$("#panel_body").load(defnet.list.select_custom2+X,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(N);defnet.init_tooltip()})}function T(){return E(defnet.add_members,this)}function E(Y,W){var Z=$("#list-panel").dialog("isOpen");if(Z){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var X=utils.get_parent(W,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){Y(X)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(h);$("#id_filter_text").keyup(function(){utils.countdown_filter(h)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function h(){var Y="?find="+$("#id_filters").val();var W=$("#id_filter_text").val();var X=(Y=="?find=0"&&W==""?"":Y+"&text="+W);$("#panel_body").load(defnet.list.select+X,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function R(){var W=this;var X={self:W,scope:"network",func_save:M,func_show_all:T,func_show_add:A};Q(X);return false}function A(){var W=this;var X={self:W,scope:"network",func_show_all:T,func_show_add:A};j(X);return false}function Q(W){W.level=1;W.prefix="";defnet.init_form(W)}function j(W){var X=defnet.get_level_data(W.self);W.level=X.level;W.prefix=X.prefix;defnet.init_form(W)}function M(){var W={level:1,scope:"network",func_add:v};return defnet.save_inner_form(W)}function c(Y){var X=$(Y);var W=X.html();var Z=X.parent().attr("id");v(Z,W)}function v(Z,W){utils.set_data($("#id_network"),"network",Z);var Y={id_prefix:"network_",id:Z,click:"natmasq.remove_network(this)",editclick:"natmasq.edit_network(this)",name:W};var X=new EJS({url:"/media/tpl/list_item.ejs"}).render(Y);$("#id_network").html(X)}function K(){$("input[name=chklist]:checked").each(function(){var X=$(this);var Y=X.parent().attr("id");var W=X.next().html();v(Y,W)})}function u(X){var W=$(X);var Y=W.parent().attr("id");$("#id_network").removeData("network");$("#"+Y).remove();return false}function f(ab){var Y=$(ab);var ac=Y.parent().attr("id");var X=utils.get_itemid(ac);var W=Y;var Z={self:W,id:X,level:1,prefix:"",scope:"network",func_update:S,func_show_all:T,func_show_add:A};defnet.init_edit_form(Z);return false}function S(Z,X,W){$(W).next().html(X);var Y=$("#list-panel").dialog("isOpen");if(Y){H()}}function B(){var X=$("#id_network > div").attr("id");var W=utils.get_itemid(X);utils.set_data($("#id_network"),"network",W)}function P(){$(".list_button.edit").click(n);$(".list_button.delete").click(q);$(".list_button.clone").click(m);$(".list_table").sortable(G)}function O(){I();$("#left_box").hide();$("#id_add").click(w);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("div[id^='dialog-add']");utils.remove_dialog("div[id^='dialog-edit']");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",nat.hide_panel);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=t;nav_list.config.list_func=P;nav_list.init()}function J(){return menu.get("/nat/pf/",O)}return{load:J,init:O,edit_network:f,remove_network:u}}());var natpf=(function(){var U="/nat/pf/save/";var ag="/nat/pf/delete/";var G="/nat/pf/list/";var aj=null;var ai=null;var ah=null;function ad(){aj={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defservices.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};ai={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};ah={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defservices.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function K(){$("#orgport .img_folder").click(E);$("#orgport .img_add").click(ar);$("#host .img_folder").click(C);$("#host .img_add").click(aq);$("#newservice .img_folder").click(y);$("#newservice .img_add").click(ao)}function ay(){var az="ui-state-active";$("#id_originalport").droppable({hoverClass:az,scope:defservices.drop_scope,drop:function(aA,aB){var aC=aB.draggable;M(aC)}});$("#id_host").droppable({hoverClass:az,scope:defnet.drop_scope,drop:function(aA,aB){var aC=aB.draggable;R(aC)}});$("#id_newservice").droppable({hoverClass:az,scope:defservices.drop_scope,drop:function(aA,aB){var aC=aB.draggable;H(aC)}})}function V(){$("#dialog-add-orgport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-edit-orgport").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-add-host").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-host").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-newservice").dialog(defservices.get_ui_opt().popup_dialog_opt);$("#dialog-edit-newservice").dialog(defservices.get_ui_opt().popup_dialog_opt)}function J(){$("#left_box").load(U,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(A);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);K();ay();V();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function f(){utils.cancel_form();nav_list.show_list()}function m(aB){var az=$(aB.self).parent().attr("id");var aA=(aB.clone==null?"":"&clone=1");$("#left_box").load(U+"?id="+az+aA,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(aB.clone==null){return t(az)}else{return A()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);K();ay();V();T();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function A(){var az=$("#save-form");var aA=j(az,"","");var aB={url:U,data:aA,func_success:f};return list_form.save(aB)}function v(){var az=this;m({self:az,clone:null})}function t(az){var aA=$("#save-form");var aB=j(aA,az,"update");var aC={url:U,data:aB,func_success:f};return list_form.save(aC)}function D(){var aE=$(this).parent();var aA=aE.attr("id");var aG=$("#id_pg").val();var az=aG.split(",");var aC=parseInt(az[3],10);--aC;var aD=$("#id_display").val();var aB=$("#id_query").val();var aF={id:aA,pgnum:aC,pgsize:aD,text:aB};$.post(ag,aF,function(aI){if(aI.indexOf("success")==0){var aH=aI.split("|");nav_list.set_item_msg(aH[1]);var aJ=aE.parent();aJ.remove();delete aJ}else{utils.show_dialog(2,aI)}})}function u(){var az=this;m({self:az,clone:1})}function j(aC,az,aA){var aE=$("#id_originalport").data("orgport");var aB=$("#id_host").data("host");var aF=$("#id_newservice").data("newservice");var aD={originalPort:aE,host:aB,newService:aF,comment:aC.find("#id_comment").val(),id:az,save_type:aA};aD["interface"]=aC.find("#id_interface").val();return aD}function E(){$("#leftcolumn").hide();$("#list_body").load(defservices.list.panel_custom1,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(W);$(".drag_zone").draggable(aj);$("#id_filters").change(ac);$("#id_filter_text").keyup(function(){utils.countdown_filter(ac)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ac(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defservices.list.select_custom1+aA,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(aj);defservices.init_tooltip()})}function C(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(w);$(".drag_zone").draggable(ai);$("#id_filters").change(ab);$("#id_filter_text").keyup(function(){utils.countdown_filter(ab)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ab(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defnet.list.select_custom2+aA,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(ai);defnet.init_tooltip()})}function y(){$("#leftcolumn").hide();$("#list_body").load(defservices.list.panel_custom1,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(Y);$(".drag_zone").draggable(ah);$("#id_filters").change(Z);$("#id_filter_text").keyup(function(){utils.countdown_filter(Z)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function Z(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defservices.list.select_custom1+aA,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(ah);defservices.init_tooltip()})}function ax(){return F(defservices.add_members,this)}function av(){return X(defnet.add_members,this)}function at(){return F(defservices.add_members,this)}function X(aB,az){var aC=$("#list-panel").dialog("isOpen");if(aC){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var aA=utils.get_parent(az,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){aB(aA)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(k);$("#id_filter_text").keyup(function(){utils.countdown_filter(k)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function k(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defnet.list.select+aA,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function F(aB,az){var aC=$("#list-panel").dialog("isOpen");if(aC){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var aA=utils.get_parent(az,4);$("#list_body").load(defservices.list.panel,null,function(){$(".add_button").click(function(){aB(aA)});$(".drag_zone").draggable(defservices.get_ui_opt().drag_opt);$("#id_filters").change(aw);$("#id_filter_text").keyup(function(){utils.countdown_filter(aw)});$("#id_filter_text").keydown(utils.stop_filter_timer);defservices.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function aw(){var aB="?find="+$("#id_filters").val();var az=$("#id_filter_text").val();var aA=(aB=="?find=0"&&az==""?"":aB+"&text="+az);$("#panel_body").load(defservices.list.select+aA,null,function(){$(".drag_zone").draggable(defservices.get_ui_opt().drag_opt);defservices.init_tooltip()})}function ar(){var az=this;var aA={self:az,scope:"orgport",func_save:q,func_show_all:ax,func_show_add:S};p(aA);return false}function aq(){var az=this;var aA={self:az,scope:"host",func_save:au,func_show_all:av,func_show_add:Q};ap(aA);return false}function ao(){var az=this;var aA={self:az,scope:"newservice",func_save:n,func_show_all:at,func_show_add:O};p(aA);return false}function S(){var az=this;var aA={self:az,scope:"orgport",func_show_all:ax,func_show_add:S};am(aA);return false}function Q(){var az=this;var aA={self:az,scope:"host",func_show_all:av,func_show_add:Q};l(aA);return false}function O(){var az=this;var aA={self:az,scope:"newservice",func_show_all:at,func_show_add:O};am(aA);return false}function ap(az){az.level=1;az.prefix="";defnet.init_form(az)}function p(az){az.level=1;az.prefix="";defservices.init_form(az)}function l(az){var aA=defnet.get_level_data(az.self);az.level=aA.level;az.prefix=aA.prefix;defnet.init_form(az)}function am(az){var aA=defservices.get_level_data(az.self);az.level=aA.level;az.prefix=aA.prefix;defservices.init_form(az)}function q(){var az={level:1,scope:"orgport",func_add:ak};return defservices.save_inner_form(az)}function au(){var az={level:1,scope:"host",func_add:N};return defnet.save_inner_form(az)}function n(){var az={level:1,scope:"mewservice",func_add:L};return defservices.save_inner_form(az)}function M(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");ak(aC,az)}function ak(aC,az){utils.set_data($("#id_originalport"),"orgport",aC);var aB={id_prefix:"orgport_",id:aC,click:"natpf.remove_originalport(this)",editclick:"natpf.edit_originalport(this)",name:az};var aA=new EJS({url:"/media/tpl/list_item.ejs"}).render(aB);$("#id_originalport").html(aA)}function W(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();ak(aB,az)})}function R(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");N(aC,az)}function N(aC,az){utils.set_data($("#id_host"),"host",aC);var aB={id_prefix:"host_",id:aC,click:"natpf.remove_host(this)",editclick:"natpf.edit_host(this)",name:az};var aA=new EJS({url:"/media/tpl/list_item.ejs"}).render(aB);$("#id_host").html(aA)}function w(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();N(aB,az)})}function H(aB){var aA=$(aB);var az=aA.html();var aC=aA.parent().attr("id");L(aC,az)}function L(aC,az){utils.set_data($("#id_newservice"),"newservice",aC);var aB={id_prefix:"newsrv_",id:aC,click:"natpf.remove_newservice(this)",editclick:"natpf.edit_newservice(this)",name:az};var aA=new EJS({url:"/media/tpl/list_item.ejs"}).render(aB);$("#id_newservice").html(aA)}function Y(){$("input[name=chklist]:checked").each(function(){var aA=$(this);var aB=aA.parent().attr("id");var az=aA.next().html();L(aB,az)})}function c(aA){var az=$(aA);var aB=az.parent().attr("id");$("#id_originalport").removeData("orgport");$("#"+aB).remove();return false}function B(aA){var az=$(aA);var aB=az.parent().attr("id");$("#id_host").removeData("host");$("#"+aB).remove();return false}function I(aA){var az=$(aA);var aB=az.parent().attr("id");$("#id_newservice").removeData("newservice");$("#"+aB).remove();return false}function h(aD){var aB=$(aD);var aE=aB.parent().attr("id");var aA=utils.get_itemid(aE);var az=aB;var aC={self:az,id:aA,level:1,prefix:"",scope:"orgport",func_update:af,func_show_all:ax,func_show_add:S};defservices.init_edit_form(aC);return false}function af(aC,aA,az){$(az).next().html(aA);var aB=$("#list-panel").dialog("isOpen");if(aB){ac()}}function g(aD){var aB=$(aD);var aE=aB.parent().attr("id");var aA=utils.get_itemid(aE);var az=aB;var aC={self:az,id:aA,level:1,prefix:"",scope:"host",func_update:d,func_show_all:av,func_show_add:Q};defnet.init_edit_form(aC);return false}function d(aC,aA,az){$(az).next().html(aA);var aB=$("#list-panel").dialog("isOpen");if(aB){ab()}}function P(aD){var aB=$(aD);var aE=aB.parent().attr("id");var aA=utils.get_itemid(aE);var az=aB;var aC={self:az,id:aA,level:1,prefix:"",scope:"newservice",func_update:r,func_show_all:at,func_show_add:O};defservices.init_edit_form(aC);return false}function r(aC,aA,az){$(az).next().html(aA);var aB=$("#list-panel").dialog("isOpen");if(aB){Z()}}function T(){var aD=$("#id_originalport > div").attr("id");var aA=utils.get_itemid(aD);utils.set_data($("#id_originalport"),"orgport",aA);var aC=$("#id_host > div").attr("id");var az=utils.get_itemid(aC);utils.set_data($("#id_host"),"host",az);var aE=$("#id_newservice > div").attr("id");var aB=utils.get_itemid(aE);utils.set_data($("#id_newservice"),"newservice",aB)}function an(){$(".list_button.edit").click(v);$(".list_button.delete").click(D);$(".list_button.clone").click(u)}function al(){ad();$("#left_box").hide();$("#id_add").click(J);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("div[id^='dialog-add']");utils.remove_dialog("div[id^='dialog-edit']");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",nat.hide_panel);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=G;nav_list.config.list_func=an;nav_list.init()}function ae(){return menu.get("/nat/pf/",al)}return{load:ae,init:al,edit_originalport:h,remove_originalport:c,edit_host:g,remove_host:B,edit_newservice:P,remove_newservice:I}}());var nav_list=(function(){var f={list_url:"",list_func:null};function h(){$("#id_display").data("pgnum",1);k()}function k(){var u=$("#id_display").val();var r=$("#id_display").data("pgnum");var t=n();$("#right_box").load(f.list_url+"?pgnum="+r+"&pgsize="+u+t,null,function(){l()})}function c(){var u=$("#id_pg").val();var r=u.split(",");var t=$("#id_display").val();$("#id_display").data("pgnum",r[2]);k()}function g(){var u=$("#id_pg").val();var r=u.split(",");var t=$("#id_display").val();$("#id_display").data("pgnum",r[3]);k()}function p(r){if(r.keyCode=="13"){r.preventDefault();r.stopPropagation();utils.stop_filter_timer();h()}}function m(r){if(r.keyCode!="13"){utils.countdown_filter(h)}}function d(r){$(".item_display").text(r)}function l(){$("#id_display").data("pgnum",1);if($.isFunction(f.list_func)){f.list_func()}var t=$("#id_pg").val();var r=t.split(",");if(r[0]=="False"){j("#id_prev",1,null)}else{j("#id_prev",0,c)}if(r[1]=="False"){j("#id_next",1,null)}else{j("#id_next",0,g)}d(r[4]);utils.bind_hover($(".list_button"))}function j(v,r,t){var u=$(v);u.unbind("click");if(r==1){u.attr("disabled","disabled");u.removeClass("hover");u.addClass("ui-state-disabled");u.unbind("mouseenter");u.unbind("mouseleave")}else{u.removeAttr("disabled");u.removeClass("ui-state-disabled");u.addClass("hover");u.click(t);utils.bind_hover(u)}}function n(){var r=$("#id_selection");var v=(r[0]==null?"":"&find="+r.val());var t=$("#id_query").val();var u=(v=="&find=0"&&t==""?"":v+"&text="+encodeURIComponent(t));return u}function q(){l()}return{init:q,config:f,show_list:h,update_list:k,query_keypress:p,query_keyup:m,set_item_msg:d}}());var netdhcp=(function(){var p="/netdhcp/save/";var f="/netdhcp/delete/";var c="/netdhcp/list/";function n(){$("#left_box").load(p,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(j);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function h(){utils.cancel_form();nav_list.show_list()}function r(y){var v=$(y.self).parent().attr("id");var w=(y.clone==null?"":"&clone=1");$("#left_box").load(p+"?netid="+v+w,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(y.clone==null){return d(v)}else{return j()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function j(){var v=u("","");var w={url:p,data:v,func_success:h};return list_form.save(w)}function l(){var v=this;r({self:v,clone:null})}function d(v){var w=u(v,"update");var y={url:p,data:w,func_success:h};return list_form.save(y)}function m(){var C=$(this).parent();var w=C.attr("id");var E=$("#id_pg").val();var v=E.split(",");var A=parseInt(v[3],10);--A;var B=$("#id_display").val();var y=$("#id_query").val();var D={netid:w,pgnum:A,pgsize:B,text:y};$.post(f,D,function(G){if(G.indexOf("success")==0){var F=G.split("|");nav_list.set_item_msg(F[1]);var H=C.parent();H.remove();delete H}else{utils.show_dialog(2,G)}})}function g(){var v=this;r({self:v,clone:1})}function u(v,w){var y={netid:$("#id_netid").val(),start:$("#id_start").val(),end:$("#id_end").val(),dnsserver1:$("#id_dnsserver1").val(),dnsserver2:$("#id_dnsserver2").val(),gateway:$("#id_gateway").val(),domain:$("#id_domain").val(),leasetime:$("#id_leasetime").val(),_netid:v,save_type:w};return y}function k(){$(".list_button.edit").click(l);$(".list_button.delete").click(m);$(".list_button.clone").click(g)}function t(){$("#left_box").hide();$("#id_add").click(n);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=c;nav_list.config.list_func=k;nav_list.init()}function q(){return menu.get("/netdhcp/",t)}return{load:q}}());var netdns=(function(){var l={save_url:"/netdns/allownet/save/",delete_url:"/netdns/allownet/delete/"};var k={save_url:"/netdns/relay/save/",delete_url:"/netdns/relay/delete/",defnet_save_url:"/netdns/relay/defnet/save/"};var N=null;var M=null;function H(){N={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};M={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"dns2",drag:utils.add_drag_css,stop:utils.remove_drag_css}}function w(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(h);$(".drag_zone").draggable(N);$("#id_filters").change(F);$("#id_filter_text").keyup(function(){utils.countdown_filter(F)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($("#list_body").find(".add_button"));$("#list-panel").dialog("open")});return false}function F(){var X="?find="+$("#id_filters").val();var V=$("#id_filter_text").val();var W=(X=="?find=0"&&V==""?"":X+"&text="+V);$("#panel_body").load(defnet.list.select+W,null,function(){$(".drag_zone").draggable(N);defnet.init_tooltip()})}function v(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom1,null,function(){$(".add_button").click(y);$(".drag_zone").draggable(M);$("#id_filters").change(E);$("#id_filter_text").keyup(function(){utils.countdown_filter(E)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($("#list_body").find(".add_button"));$("#list-panel").dialog("open")});return false}function E(){var X="?find="+$("#id_filters").val();var V=$("#id_filter_text").val();var W=(X=="?find=0"&&V==""?"":X+"&text="+V);$("#panel_body").load(defnet.list.select_custom1+W,null,function(){$(".drag_zone").draggable(M);defnet.init_tooltip()})}function J(){var V=$("#list-panel").dialog("isOpen");if(V){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function D(Z,V){var X=[Z];var Y=[V];var W=t(X);c(l.save_url,W,X,Y,p)}function h(){var W=[];var X=[];$("input[name=chklist]:checked").each(function(){var Z=$(this);var ab=Z.parent().attr("id");var Y=Z.next().html();W.push(parseInt(ab,10));X.push(Y)});var V=t(W);c(l.save_url,V,W,X,p)}function P(Z,V){var X=[Z];var Y=[V];var W=t(X);c(k.save_url,W,X,Y,n)}function y(){var W=[];var X=[];$("input[name=chklist]:checked").each(function(){var Z=$(this);var ab=Z.parent().attr("id");var Y=Z.next().html();W.push(parseInt(ab,10));X.push(Y)});var V=t(W);c(k.save_url,V,W,X,n)}function t(X){var V=X.join(",");var W={data:V};return W}function c(V,X,Y,Z,W){$.post(V,X,function(ab){if(ab=="success"){W(Y,Z)}else{if(ab.error==1){var ae=ab.fail_list;for(var ad=0;ad<ae.length;ad++){var af=parseInt(ae[ad],10);var ac=$.inArray(af,Y);if(ac>=0){Y.splice(ac,1);Z.splice(ac,1)}}W(Y,Z)}else{utils.show_dialog(2,ab)}}})}function G(Y){var W=$(Y);var Z=W.parent().attr("id");var V=utils.get_itemid(Z);var X={id:V};L(l.delete_url,X,Z,"#dnslist1")}function f(Y){var W=$(Y);var Z=W.parent().attr("id");var V=utils.get_itemid(Z);var X={id:V};L(k.delete_url,X,Z,"#dnslist2")}function L(V,X,Y,W){$.post(V,X,function(Z){if(Z=="success"){$(W).find("#"+Y).remove();utils.set_alt_css(W)}else{utils.show_dialog(2,Z)}})}function U(X){var ae=$(X);var V=ae.html();var W=ae.parent().attr("id");var ac=parseInt(W,10);var ad=[ac];var Y=[V];var ab=ad.join(",");var Z={data:ab};c(l.save_url,Z,ad,Y,p)}function K(X){var ae=$(X);var V=ae.html();var W=ae.parent().attr("id");var ac=parseInt(W,10);var ad=[ac];var Y=[V];var ab=ad.join(",");var Z={data:ab};c(k.save_url,Z,ad,Y,n)}function p(Z,ac){var ab=Z.length;var Y=$("#dnslist1");var X=null;var W=null;for(var V=0;V<ab;V++){X={id_prefix:"item_",id:Z[V],click:"netdns.delete_dns_allownet(this)",editclick:"netdns.edit_dns_allownet(this)",name:ac[V]};W=new EJS({url:"/media/tpl/list_item.ejs"}).render(X);Y.append(W)}utils.set_alt_css("#dnslist1")}function n(Z,ac){var ab=Z.length;var Y=$("#dnslist2");var X=null;var W=null;for(var V=0;V<ab;V++){X={id_prefix:"item_",id:Z[V],click:"netdns.delete_dns_relay(this)",editclick:"netdns.edit_dns_relay(this)",name:ac[V]};W=new EJS({url:"/media/tpl/list_item.ejs"}).render(X);Y.append(W)}utils.set_alt_css("#dnslist2")}function r(Z){var X=$(Z);var ab=X.parent().attr("id");var W=utils.get_itemid(ab);var V=X;var Y={self:V,id:W,level:1,prefix:"",scope:"dnslist1",func_update:g,func_show_all:T,func_show_add:u};defnet.init_edit_form(Y);return false}function d(Z){var X=$(Z);var ab=X.parent().attr("id");var W=utils.get_itemid(ab);var V=X;var Y={self:V,id:W,level:1,prefix:"",scope:"dnslist2",edit:"",func_update:q};defnet.init_edit_form(Y);return false}function B(){var V={level:1,scope:"dnslist1",func_add:D};return defnet.save_inner_form(V)}function j(){var V={level:1,scope:"dnslist2",func_add:P};return defnet.save_inner_form(V)}function g(Y,W,V){$(V).next().html(W);var X=$("#list-panel").dialog("isOpen");if(X){F()}}function q(Y,W,V){$(V).next().html(W);var X=$("#list-panel").dialog("isOpen");if(X){E()}}function T(){return C(defnet.add_members,this)}function C(X,V){var Y=$("#list-panel").dialog("isOpen");if(Y){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var W=utils.get_parent(V,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){X(W)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(S);$("#id_filter_text").keyup(function(){utils.countdown_filter(S)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function S(){var X="?find="+$("#id_filters").val();var V=$("#id_filter_text").val();var W=(X=="?find=0"&&V==""?"":X+"&text="+V);$("#panel_body").load(defnet.list.select+W,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function R(){var V=this;var W={self:V,scope:"dnslist1",func_save:B,func_show_all:T,func_show_add:u};m(W);return false}function Q(){var V=this;var W={self:V,scope:"dnslist2",url:k.defnet_save_url,func_save:j};m(W);return false}function u(){var V=this;var W={self:V,scope:"dnslist1",func_show_all:T,func_show_add:u};A(W);return false}function m(V){V.level=1;V.prefix="";defnet.init_form(V)}function A(V){var W=defnet.get_level_data(V.self);V.level=W.level;V.prefix=W.prefix;defnet.init_form(V)}function O(){H();utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",J);$("#dialog-add-dnslist1").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-dnslist1").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-dnslist2").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-dnslist2").dialog(defnet.get_ui_opt().popup_dialog_opt);var W=$("fieldset.dns1");W.find(".img_folder").click(w);W.find(".img_add").click(R);var V=$("fieldset.dns2");V.find(".img_folder").click(v);V.find(".img_add").click(Q);$("#dnslist1").droppable({hoverClass:"ui-state-active",scope:defnet.drop_scope,drop:function(X,Y){var Z=Y.draggable;U(Z)}});$("#dnslist2").droppable({hoverClass:"ui-state-active",scope:"dns2",drop:function(X,Y){var Z=Y.draggable;K(Z)}});utils.set_alt_css("#dnslist1");utils.set_alt_css("#dnslist2")}function I(){return menu.get("/netdns/",O)}return{load:I,edit_dns_allownet:r,delete_dns_allownet:G,edit_dns_relay:d,delete_dns_relay:f}}());var netint=(function(){var q="/netint/save/";var g="/netint/delete/";var d="/netint/list/";function p(){$("#left_box").load(q,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(k);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function j(){utils.cancel_form();nav_list.show_list()}function t(A){var w=$(A.self).parent().attr("id");var y=(A.clone==null?"":"&clone=1");$("#left_box").load(q+"?id="+w+y,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(A.clone==null){return f(w)}else{return k()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function k(){var w=v("","");var y={url:q,data:w,func_success:j};return list_form.save(y)}function m(){var w=this;t({self:w,clone:null})}function f(w){var y=v(w,"update");var A={url:q,data:y,func_success:j};return list_form.save(A)}function n(){var F=$(this).parent();var G=F.attr("id");var w=$("#id_pg").val();var B=w.split(",");var E=parseInt(B[3],10);--E;var y=$("#id_display").val();var D=$("#id_selection").val();var C=$("#id_query").val();var A={id:G,pgnum:E,pgsize:y,find:D,text:C,confirm:""};c(A,F)}function h(){var w=this;t({self:w,clone:1})}function c(y,w){$.post(g,y,function(A){if(A.hasgroups==1){$("#confirm_delete_body").html(A.msg);var C=$("#confirm-delete");C.dialog("open");C.find(".save_button.save").click(function(){y.confirm=1;C.dialog("close");c(y,w)});C.find(".save_button.cancel").click(function(){C.dialog("close")});utils.bind_hover(C.find(".save_button"))}else{if(A.success==1){nav_list.set_item_msg(A.itemscount);var B=w.parent();B.remove();delete B}else{utils.show_dialog(2,A)}}})}function v(w,y){var A={name:$("#id_name").val(),type:$("#id_type").val(),hardware:$("#id_hardware").val(),address:$("#id_address").val(),netmask:$("#id_netmask").val(),gateway:$("#id_gateway").val(),mtu:$("#id_mtu").val(),comment:$("#id_comment").val(),id:w,save_type:y};return A}function l(){$(".list_button.edit").click(m);$(".list_button.delete").click(n);$(".list_button.clone").click(h)}function u(){$("#left_box").hide();$("#id_add").click(p);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=d;nav_list.config.list_func=l;nav_list.init()}function r(){return menu.get("/netint/",u)}return{load:r}}());var netlb=(function(){var n="/netlb/save/";var g="/netlb/delete/";var c="/netlb/list/";var d="/netlb/loadbl/";var f="/togglenetlb/";function j(){$("#left_box").load(d,function(r){$("#left_box").css("width","280px");$("#left_box").html(r)})}function h(){var r=0;var u="/netlb/savelist/";var t=[];$("input[name=interface_balance]:checked").each(function(){var w=$(this);var y=w.attr("id");var v=y.split("_");t.push(v[1])});listBL=t.join(",");data={listBL:listBL};$.post(u,data,function(v){if(v=="success"){stat.show_status(0,"Net balancing was successfully updated.")}else{stat.show_status(1,v)}})}function m(){$("#left_box").load(n,null,function(){$("#left_box").css("width","280px");$(".save_button.save").click(h);$(".save_button.cancel").click(cancel_form);$("#left_box").show()});return false}function p(){return menu.get("/netlb/loadbl/",q)}function k(){var r={value:1,name:"NetBL"};$.post(f,r,function(t){if(t=="success"){$("#sw > .sw-off").removeClass("redicon");$("#sw > .sw-off").addClass("greyicon");$("#sw > .sw-on").removeClass("greyicon");$("#sw > .sw-on").addClass("greenicon")}})}function l(){var r={value:0,name:"NetBL"};$.post(f,r,function(t){if(t=="success"){$("#sw > .sw-on").removeClass("greenicon");$("#sw > .sw-on").addClass("greyicon");$("#sw > .sw-off").removeClass("greyicon");$("#sw > .sw-off").addClass("redicon")}})}function q(){$(".save_button.save").click(h);$("#sw > .sw-on").click(k);$("#sw > .sw-off").click(l);utils.bind_hover($(".save_button"))}return{load:p}}());var netroute=(function(){var F="/netroute/save/";var T="/netroute/delete/";var v="/netroute/list/";var J={defnet_save_url:"/netroute/gateway/defnet/save/"};var W=null;var V=null;function Q(){W={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};V={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"gwid",drag:utils.add_drag_css,stop:utils.remove_drag_css}}function A(){$("#left_box").load(F,null,function(){var ah=$("#save-form");$("#left_box").css("width","300px");$(".save_button.save").click(q);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);B();af();G();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function B(){$("#netid .img_folder").click(u);$("#netid .img_add").click(ab);$("#gwid .img_folder").click(r);$("#gwid .img_add").click(Z)}function af(){var ah="ui-state-active";$("#id_net").droppable({hoverClass:ah,scope:defnet.drop_scope,drop:function(ai,aj){var ak=aj.draggable;ac(ak)}});$("#id_gateway").droppable({hoverClass:ah,scope:"gwid",drop:function(ai,aj){var ak=aj.draggable;L(ak)}})}function G(){$("#dialog-add-netid").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-netid").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-gwid").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-gwid").dialog(defnet.get_ui_opt().popup_dialog_opt)}function f(){utils.cancel_form();S();nav_list.show_list()}function j(aj){var ah=$(aj.self).parent().attr("id");var ai=(aj.clone==null?"":"&clone=1");$("#left_box").load(F+"?id="+ah+ai,null,function(){$("#left_box").css("width","300px");$(".save_button.save").click(function(){if(aj.clone==null){return m(ah)}else{return q()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);B();af();G();E();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function q(){var ah=$("#save-form");var ai=g(ah,"","");var aj={url:F,data:ai,func_success:f};return list_form.save(aj)}function p(){var ah=this;j({self:ah,clone:null})}function m(ah){var ai=$("#save-form");var aj=g(ai,ah,"update");var ak={url:F,data:aj,func_success:f};return list_form.save(ak)}function t(){var ao=$(this).parent();var ap=ao.attr("id");var ah=$("#id_pg").val();var ak=ah.split(",");var an=parseInt(ak[3],10);--an;var ai=$("#id_display").val();var am=$("#id_selection").val();var al=$("#id_query").val();var aj={id:ap,pgnum:an,pgsize:ai,find:am,text:al};$.post(T,aj,function(ar){if(ar.indexOf("success")==0){var aq=ar.split("|");nav_list.set_item_msg(aq[1]);var at=ao.parent();at.remove();delete at}else{utils.show_dialog(2,ar)}})}function n(){var ah=this;j({self:ah,clone:1})}function g(al,ah,ai){var aj=$("#id_net").data("netid");var ak=$("#id_gateway").data("gwid");var am={netid:aj,gwid:ak,comment:al.find("#id_comment").val(),id:ah,save_type:ai};return am}function S(){var ah=$("#list-panel").dialog("isOpen");if(ah){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function u(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom2,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(P);$(".drag_zone").draggable(W);$("#id_filters").change(O);$("#id_filter_text").keyup(function(){utils.countdown_filter(O)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function O(){var aj="?find="+$("#id_filters").val();var ah=$("#id_filter_text").val();var ai=(aj=="?find=0"&&ah==""?"":aj+"&text="+ah);$("#panel_body").load(defnet.list.select_custom2+ai,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(W);defnet.init_tooltip()})}function r(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom3,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(l);$(".drag_zone").draggable(V);$("#id_filters").change(N);$("#id_filter_text").keyup(function(){utils.countdown_filter(N)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function N(){var aj="?find="+$("#id_filters").val();var ah=$("#id_filter_text").val();var ai=(aj=="?find=0"&&ah==""?"":aj+"&text="+ah);$("#panel_body").load(defnet.list.select_custom3+ai,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(V);defnet.init_tooltip()})}function ae(){return K(defnet.add_members,this)}function K(aj,ah){var ak=$("#list-panel").dialog("isOpen");if(ak){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var ai=utils.get_parent(ah,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){aj(ai)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(ad);$("#id_filter_text").keyup(function(){utils.countdown_filter(ad)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ad(){var aj="?find="+$("#id_filters").val();var ah=$("#id_filter_text").val();var ai=(aj=="?find=0"&&ah==""?"":aj+"&text="+ah);$("#panel_body").load(defnet.list.select+ai,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function ab(){var ah=this;var ai={self:ah,scope:"netid",func_save:U,func_show_all:ae,func_show_add:D};w(ai);return false}function Z(){var ah=this;var ai={self:ah,scope:"gwid",url:J.defnet_save_url,func_save:d};w(ai);return false}function D(){var ah=this;var ai={self:ah,scope:"netid",func_show_all:ae,func_show_add:D};I(ai);return false}function w(ah){ah.level=1;ah.prefix="";defnet.init_form(ah)}function I(ah){var ai=defnet.get_level_data(ah.self);ah.level=ai.level;ah.prefix=ai.prefix;defnet.init_form(ah)}function U(){var ah={level:1,scope:"netid",func_add:c};return defnet.save_inner_form(ah)}function d(){var ah={level:1,scope:"gwid",func_add:H};return defnet.save_inner_form(ah)}function ac(aj){var ai=$(aj);var ah=ai.html();var ak=ai.parent().attr("id");c(ak,ah)}function c(ak,ah){utils.set_data($("#id_net"),"netid",ak);var aj={id_prefix:"netid_",id:ak,click:"netroute.remove_netid(this)",editclick:"netroute.edit_netid(this)",name:ah};var ai=new EJS({url:"/media/tpl/list_item.ejs"}).render(aj);$("#id_net").html(ai)}function P(){$("input[name=chklist]:checked").each(function(){var ai=$(this);var aj=ai.parent().attr("id");var ah=ai.next().html();c(aj,ah)})}function L(aj){var ai=$(aj);var ah=ai.html();var ak=ai.parent().attr("id");H(ak,ah)}function H(ak,ah){utils.set_data($("#id_gateway"),"gwid",ak);var aj={id_prefix:"gwid_",id:ak,click:"netroute.remove_gwid(this)",editclick:"netroute.edit_gwid(this)",name:ah};var ai=new EJS({url:"/media/tpl/list_item.ejs"}).render(aj);$("#id_gateway").html(ai)}function l(){$("input[name=chklist]:checked").each(function(){var ai=$(this);var aj=ai.parent().attr("id");var ah=ai.next().html();H(aj,ah)})}function C(ai){var ah=$(ai);var aj=ah.parent().attr("id");$("#id_net").removeData("netid");$("#"+aj).remove();return false}function y(ai){var ah=$(ai);var aj=ah.parent().attr("id");$("#id_gateway").removeData("gwid");$("#"+aj).remove();return false}function M(al){var aj=$(al);var am=aj.parent().attr("id");var ai=utils.get_itemid(am);var ah=aj;var ak={self:ah,id:ai,level:1,prefix:"",scope:"netid",func_update:ag,func_show_all:ae,func_show_add:D};defnet.init_edit_form(ak);return false}function ag(ak,ai,ah){$(ah).next().html(ai);var aj=$("#list-panel").dialog("isOpen");if(aj){O()}}function k(al){var aj=$(al);var am=aj.parent().attr("id");var ai=utils.get_itemid(am);var ah=aj;var ak={self:ah,id:ai,level:1,prefix:"",scope:"gwid",func_update:h};defnet.init_edit_form(ak);return false}function h(ak,ai,ah){$(ah).next().html(ai);var aj=$("#list-panel").dialog("isOpen");if(aj){N()}}function E(){var ah=$("#id_net > div").attr("id");var ak=utils.get_itemid(ah);utils.set_data($("#id_net"),"netid",ak);var aj=$("#id_gateway > div").attr("id");var ai=utils.get_itemid(aj);utils.set_data($("#id_gateway"),"gwid",ai)}function Y(){$(".list_button.edit").click(p);$(".list_button.delete").click(t);$(".list_button.clone").click(n)}function X(){Q();$("#left_box").hide();$("#id_add").click(A);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("#dialog-add-netid");utils.remove_dialog("#dialog-edit-netid");utils.remove_dialog("#dialog-add-gwid");utils.remove_dialog("#dialog-edit-gwid");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",S);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=v;nav_list.config.list_func=Y;nav_list.init()}function R(){return menu.get("/netroute/",X)}return{load:R,edit_netid:M,remove_netid:C,edit_gwid:k,remove_gwid:y}}());var nettrusted=(function(){var v={save_url:"/nettrusted/net/save/",delete_url:"/nettrusted/net/delete/"};var g=null;function p(){g={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function D(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(y);$(".drag_zone").draggable(g);$("#id_filters").change(f);$("#id_filter_text").keyup(function(){utils.countdown_filter(f)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($("#list_body").find(".add_button"));$("#list-panel").dialog("open")});return false}function f(){var K="?find="+$("#id_filters").val();var I=$("#id_filter_text").val();var J=(K=="?find=0"&&I==""?"":K+"&text="+I);$("#panel_body").load(defnet.list.select+J,null,function(){$(".drag_zone").draggable(g);defnet.init_tooltip()})}function u(){var I=$("#list-panel").dialog("isOpen");if(I){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function d(M,I){var K=[M];var L=[I];var J=h(K);F(v.save_url,J,K,L,E)}function y(){var J=[];var K=[];$("input[name=chklist]:checked").each(function(){var M=$(this);var N=M.parent().attr("id");var L=M.next().html();J.push(parseInt(N,10));K.push(L)});var I=h(J);F(v.save_url,I,J,K,E)}function h(K){var I=K.join(",");var J={data:I};return J}function F(I,K,L,M,J){$.post(I,K,function(N){if(N=="success"){J(L,M)}else{if(N.error==1){var Q=N.fail_list;for(var P=0;P<Q.length;P++){var R=parseInt(Q[P],10);var O=$.inArray(R,L);if(O>=0){L.splice(O,1);M.splice(O,1)}}J(L,M)}else{utils.show_dialog(2,N)}}})}function q(L){var J=$(L);var M=J.parent().attr("id");var I=utils.get_itemid(M);var K={netid:I};c(v.delete_url,K,M,"#netlist")}function c(I,K,L,J){$.post(I,K,function(M){if(M=="success"){$(J).find("#"+L).remove();utils.set_alt_css(J)}else{utils.show_dialog(2,M)}})}function C(K){var Q=$(K);var I=Q.html();var J=Q.parent().attr("id");var O=parseInt(J,10);var P=[O];var L=[I];var N=P.join(",");var M={data:N};F(v.save_url,M,P,L,E)}function E(M,O){var N=M.length;var L=$("#netlist");var K=null;var J=null;for(var I=0;I<N;I++){K={id_prefix:"item_",id:M[I],click:"nettrusted.delete_net(this)",editclick:"nettrusted.edit_net(this)",name:O[I]};J=new EJS({url:"/media/tpl/list_item.ejs"}).render(K);L.append(J)}utils.set_alt_css("#netlist")}function l(M){var K=$(M);var N=K.parent().attr("id");var J=utils.get_itemid(N);var I=K;var L={self:I,id:J,level:1,prefix:"",scope:"netlist",func_update:G,func_show_all:n,func_show_add:B};defnet.init_edit_form(L);return false}function H(){var I={level:1,scope:"netlist",func_add:d};return defnet.save_inner_form(I)}function G(L,J,I){$(I).next().html(J);var K=$("#list-panel").dialog("isOpen");if(K){f()}}function n(){return j(defnet.add_members,this)}function j(K,I){var L=$("#list-panel").dialog("isOpen");if(L){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var J=utils.get_parent(I,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){K(J)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(r);$("#id_filter_text").keyup(function(){utils.countdown_filter(r)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function r(){var K="?find="+$("#id_filters").val();var I=$("#id_filter_text").val();var J=(K=="?find=0"&&I==""?"":K+"&text="+I);$("#panel_body").load(defnet.list.select+J,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function w(){var I=this;var J={self:I,scope:"netlist",func_save:H,func_show_all:n,func_show_add:B};k(J);return false}function B(){var I=this;var J={self:I,scope:"netlist",func_show_all:n,func_show_add:B};t(J);return false}function k(I){I.level=1;I.prefix="";defnet.init_form(I)}function t(I){var J=defnet.get_level_data(I.self);I.level=J.level;I.prefix=J.prefix;defnet.init_form(I)}function A(){p();utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",u);$("#dialog-add-netlist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-netlist").dialog(defnet.get_ui_opt().popup_dialog_opt);var I=$("fieldset.net");I.find(".img_folder").click(D);I.find(".img_add").click(w);$("#netlist").droppable({hoverClass:"ui-state-active",scope:defnet.drop_scope,drop:function(J,K){var L=K.draggable;C(L)}});utils.set_alt_css("#netlist")}function m(){return menu.get("/nettrusted/",A)}return{load:m,edit_net:l,delete_net:q}}());var patch=(function(){var f="/patch/";var d=null;function c(){d={load:g}}function g(k,m){var l=m.index;if(l==1){patchdowngrade.init()}}function j(){c();$("#patch_tabs").tabs(d);patchupgrade.init()}function h(){return menu.get(f,j)}return{load:h}}());var patchdowngrade=(function(){function c(){}return{init:c}}());var patchupgrade=(function(){var H="/patch/upgrade/list/";var j="/patch/upgrade/details/";var r="/patch/upgrade/confirm/";var d="/patch/upgrade/begin/";var w="/patch/upgrade/log/init/";var l="/patch/upgrade/log/run/";var G="/patch/restartserver/";var c="/checkserver/";var t=null;var A=null;var n=null;var F=null;var f=1000;var m=30000;function v(){t={autoOpen:false,modal:true,width:480,buttons:{OK:function(){$(this).dialog("close")}}};A={autoOpen:false,modal:true,width:600}}function D(){$("#id_showbeta").click(u);$(".save_button.refresh").click(E)}function J(){$("#confirm-upgrade").dialog({autoOpen:false,modal:true});$("#dialog-details").dialog(t)}function M(){$(".list_button.upgrade").click(p);$(".version_details").click(L);utils.bind_hover($(".list_button"))}function p(){var P=$(this).parent().parent().find(".version_details").attr("title");utils.remove_dialog("#dialog-upgrade");$("#confirm_upgrade_body").load(r+"?ver="+P,null,function(Q){$("#id_here").click(conf.func_export);var R=$("#confirm-upgrade");$("#dialog-upgrade").dialog(A);R.find(".save_button.save").click(function(){R.dialog("close");$("#dialog_upgrade_body").data("version",P);h()});R.find(".save_button.cancel").click(function(){R.dialog("close")});utils.bind_hover(R.find(".save_button"));R.dialog("open")});return false}function h(){var P=$("#dialog_upgrade_body").data("version");var Q=$("#dialog-upgrade");$("#dialog_upgrade_body").load(d+"?ver="+P,null,function(R){var S=$("#dialog-upgrade");B(S.find(".save_button.cancel"),1,null);B(S.find(".save_button.retry"),1,null);B(S.find(".save_button.restart"),1,null);utils.bind_hover($(".save_button"));k();S.dialog("open")})}function L(){var P=$(this).attr("title");$.get(j,"ver="+P,function(Q){$("#dialog_details_body").html(Q);$("#dialog-details").dialog("open")});return false}function u(){if(this.checked){$(".row_beta").show()}else{$(".row_beta").hide()}}function O(){clearTimeout(n)}function y(){O();n=setTimeout(C,f)}function q(){clearTimeout(F)}function K(){q();F=setTimeout(N,m)}function k(){O();var P=true;$.get(w,null,function(Q){if(Q.error==0){$("#id_content").html(Q.content);if(P){$("#id_content").scrollTop($("#id_content")[0].scrollHeight)}if(Q.complete==0){y()}else{O();var S=$("#dialog-upgrade");var R=function(){S.dialog("close")};B(S.find(".save_button.cancel"),0,R);B(S.find(".save_button.restart"),0,g)}}else{O();if(Q.content!=""){$("#id_content").html(Q.content)}var S=$("#dialog-upgrade");var R=function(){S.dialog("close")};B(S.find(".save_button.cancel"),0,R);B(S.find(".save_button.retry"),0,h)}})}function C(){var P=true;$.get(l,null,function(Q){if(Q.error==0){$("#id_content").append(Q.content);if(P){$("#id_content").scrollTop($("#id_content")[0].scrollHeight)}if(Q.complete==0){y()}else{O();var S=$("#dialog-upgrade");var R=function(){S.dialog("close")};B(S.find(".save_button.cancel"),0,R);B(S.find(".save_button.restart"),0,g)}}else{O();if(Q.content!=""){$("#id_content").append(Q.content)}var S=$("#dialog-upgrade");B(S.find(".save_button.retry"),0,h)}})}function g(){B($(this),1,null);$("#restart_progress").show();$.get(G,null,function(P){if(P=="success"){K()}})}function N(){$.ajax({type:"GET",url:c,success:function(P,S,Q){var R=Q.status;window.location.replace(window.location.href)},error:function(P,R,Q){K()}})}function B(R,P,Q){R.unbind("click");if(P==1){R.attr("disabled","disabled");R.removeClass("hover");R.addClass("ui-state-disabled");R.unbind("mouseenter");R.unbind("mouseleave")}else{R.removeAttr("disabled");R.removeClass("ui-state-disabled");R.addClass("hover");R.click(Q);utils.bind_hover(R)}}function E(){var P=($("#id_showbeta").attr("checked")=="checked"?1:0);var Q=(P==1?"?beta=1":"?beta=0");$(".upgrade_tbl > tbody").load(H+Q,null,function(){M()});return false}function I(){v();D();J();M();utils.bind_hover($(".save_button.refresh"))}return{init:I,upgrade_log_run_url:l,checkserver_url:c,stop_log_timer:O,stop_ping_timer:q}}());var report=function(){var aw="/reporthardware/";var al="/reportnetworkusage/";var w="/reportwebsecurity/";var X="/report_nav_list/";var at="/report_update_list/";var aC="/rpt_get_back_cache/";var A="/graphdata/";var l="/report_pdf/";var aD="/report_csv/";var ar="/download_file/";var ax="/report_loadsetting/";var r="/report_save_mail/";var n="/report_delete_mail/";var Z="/report_toggle_status/";var P="/report_loademailsettingreport/";var S="/report_save_host_mail/";var av="days";var ad="weeks";var c="_months";var u="_years";var L="";var am="";var f={seleced:1,show:d};var ao={selected:0,show:J};var ak={today:"Today",yesterday:"Yesterday",lastsevendays:"Last 7 Days",lastthirtydays:"Last 30 Days"};var W=5;var V=new Array("January","February","March","April","May","June","July","August","September","October","November","December");function v(aF){data={types:am,ispage:L};if(aF==0){data.typetime=av}if(aF==1){data.typetime=ad}if(aF==2){data.typetime=c}if(aF==3){data.typetime=u}return data}function d(aF,aG){index=aG.index;data=v(index);$("#"+index).load(A,data,function(){})}function J(aF,aG){index=aG.index;data={dataindex:index};$("#"+index).load(P,data,function(){$("#rptenable_days > .sw-on").click(an);$("#rptenable_days > .sw-off").click(ah);$("#rptnewemail_days").click(B);$("#rptenable_weeks > .sw-on").click(an);$("#rptenable_weeks > .sw-off").click(ah);$("#rptnewemail_weeks").click(B);$("#rptenable_months > .sw-on").click(an);$("#rptenable_months > .sw-off").click(ah);$("#rptnewemail_months").click(B);$("#rpt_rpt_days > .list_item").click(T);$("#rpt_rpt_weeks > .list_item").click(T);$("#rpt_rpt_months > .list_item").click(T);$("#rpt_dialog_setting").dialog({autoOpen:false,modal:true});$("#rpt_id_save_host_setting").click(af);utils.bind_hover($("#rpt_id_save_host_setting"));if($("#id_smtpuser").val()!=""){$("#id_smtppass").val("**********");$("#id_smtprepass").val("**********")}})}function j(aG,aF){if(aF=="hardware"){am=aG;L="hardware";return menu.get(aw,ai)}if(aF=="netusage"){am="";L="netusage";return menu.get(al,ai)}if(aF=="websecurity"){return menu.get(w,aA)}if(aF=="setting"){return menu.get(ax,N)}}function ai(){$("#rp_tabs").tabs(f)}function N(){$("#rpt_tabs_setting").tabs(ao)}function aA(){$("#rp_websecurity").tabs(y);ag();au();g();$("#rptsearch_time").change(I);$("#rptwebusage_type").change(ac);$("#id_prev").click(q);$("#id_next").click(ae);$("#rpt_update_button").click(E);$("#rpt_export_pdf").click(t);$("#rpt_export_csv").click(k);$("#rpt_dialog").dialog({autoOpen:false,modal:true,height:50,width:50});utils.bind_hover($("#rpt_update_button,#rpt_export_pdf,#rpt_export_csv"));$("#id_prev,#id_next").css("cursor","pointer");$("#rpt_search_panel").hide();$("#rp_websecurity1").click(function(){$("#rpt_search_panel").hide()});show_nav=$("#id_pg").val();lstnav=show_nav.split(",");try{if(lstnav[0]=="False"){$("#id_prev").addClass("ui-state-disabled");$("#id_prev").unbind("click")}if(lstnav[1]=="False"){$("#id_next").addClass("ui-state-disabled");$("#id_next").unbind("click")}$(".item_display").html(lstnav[2]);$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style")}catch(aF){}report_level.init()}var y={seleced:1};function ag(){W=5;timenow=new Date();for(i=0;i<W;i++){timenow.setMonth(timenow.getMonth()-1);month=timenow.getMonth()+1;if(month<10){month="0"+month}var aG=month+"-"+timenow.getFullYear();var aF=V[timenow.getMonth()];ak[aG]=aF}$.each(ak,function(aI,aH){$("#rptsearch_time").append($("<option>",{value:aI}).text(aH))});$("#rptsearch_time").append($("<option>",{value:"custom"}).text("custom"))}function au(){var aF={showOn:"button",buttonImage:"../media/css/img/SpriteImage/16/0255.png",constrainInput:true,showOtherMonths:true,buttonImageOnly:true,dateFormat:"yy-mm-dd",showButtonPanel:true};$("#rptcustom_start").datepicker(aF)}function g(){var aF={showOn:"button",buttonImage:"../media/css/img/SpriteImage/16/0255.png",constrainInput:true,showOtherMonths:true,buttonImageOnly:true,dateFormat:"yy-mm-dd",showButtonPanel:true};$("#rptcustom_end").datepicker(aF)}function I(){var aF=$("#rptsearch_time option:selected").attr("value");if(aF=="custom"){$("#rptsearch_time_custom").show()}else{$("#rptsearch_time_custom").hide()}}function ac(){var aF=$("#rptwebusage_type option:selected").attr("value");var aG=$("#rptsearch_time option:selected").attr("value");if(aF=="topusersbyhost"){$("#rptwebusage_user_row").hide();$("#rptwebusage_host_row").show();$("#rptwebusage_userbymime_row").hide();$("#rptwebusage_mimebyuser_row").hide()}else{if(aF=="tophostbyuser"){$("#rptwebusage_user_row").show();$("#rptwebusage_host_row").hide();$("#rptwebusage_userbymime_row").hide();$("#rptwebusage_mimebyuser_row").hide();$("#rptwebusage_destinationbymime_row").hide()}else{if(aF=="topuserbymime"){$("#rptwebusage_user_row").hide();$("#rptwebusage_host_row").hide();$("#rptwebusage_mimebyuser_row").hide();$("#rptwebusage_userbymime_row").show();$("#rptwebusage_destinationbymime_row").hide()}else{if(aF=="topmimebyuser"){$("#rptwebusage_user_row").hide();$("#rptwebusage_host_row").hide();$("#rptwebusage_userbymime_row").hide();$("#rptwebusage_mimebyuser_row").show();$("#rptwebusage_destinationbymime_row").hide()}else{if(aF=="topdestinationbymime"){$("#rptwebusage_user_row").hide();$("#rptwebusage_host_row").hide();$("#rptwebusage_userbymime_row").hide();$("#rptwebusage_mimebyuser_row").hide();$("#rptwebusage_destinationbymime_row").show()}else{$("#rptwebusage_user_row").hide();$("#rptwebusage_host_row").hide();$("#rptwebusage_userbymime_row").hide();$("#rptwebusage_mimebyuser_row").hide();$("#rptwebusage_destinationbymime_row").hide()}}}}}if(aG=="custom"){$("#rptsearch_time_custom").show()}else{$("#rptsearch_time_custom").hide()}}function q(){rpt_data=G();rpt_data.status="-1";$.ajax({url:X,data:rpt_data,type:"GET",success:function(aF,aH,aG){if(aF.success){if(aF.lstobject){$("#rpt_data_body").empty();$("#rpt_data_body").append(aF.lstobject)}R(aF);$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style")}else{alert(aF.error)}}})}function ay(aH,aI,aF,aG){rpt_data=aH;rpt_data.status="0";$.ajax({url:aC,data:rpt_data,type:"GET",success:function(aJ,aN,aM){if(aJ.success){if(aJ.lstobject){$("#rpt_list").empty();$("#rpt_list").append(aJ.lstobject)}R(aJ);$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style");$("#rptwebusage_type").val(aJ.nav_topic);$("#rptwebsecurity_nbrofrow").val(aJ.nav_nbrrow);$("#rptsearch_time").val(aJ.nav_timescale);$("#rptcustom_start").val(aJ.nav_timescale_start);$("#rptcustom_end").val(aJ.nav_timescale_end);var aL=aJ.nav_topic;if(aL=="tophostbyuser"){$("#rptwebusage_user").val(aJ.nav_topic_by)}if(aL=="topusersbyhost"){$("#rptwebusage_host").val(aJ.nav_topic_by)}if(aL=="topuserbymime"){$("#rptwebusage_userbymime").val(aJ.nav_topic_by)}if(aL=="topmimebyuser"){$("#rptwebusage_mimebyuser").val(aJ.nav_topic_by)}if(aL=="topdestinationbymime"){$("#rptwebusage_destinationbymime").val(aJ.nav_topic_by)}az(aJ);ac();var aK=report_level.gettext(aL);$("#rpt_link").html("<b>"+aK+" > </b>");Y();sortfield=$("#rpt_nav_sort").val();colsort="";colsortstatus="";if(sortfield=="host"){colsort="kbyte";colsortstatus="desc"}else{arraydata=[];arraydata=sortfield.split("_");colsort=arraydata[0];colsortstatus=arraydata[1]}obj=$("div[temp="+colsort+"]");objtd=obj.parent();objlst=$("#rpt_header_ls th table tr td span");$.each(objlst,function(){$(this).attr("class","")});if(colsortstatus==""){objtd.next().children().addClass("ui-icon ui-icon-triangle-1-n")}else{if(colsortstatus=="desc"){objtd.next().children().addClass("ui-icon ui-icon-triangle-1-s")}else{objtd.next().children().addClass("ui-icon ui-icon-triangle-1-n")}}}else{alert(aJ.error)}}})}function ae(){rpt_data=G();rpt_data.status="1";$.ajax({url:X,data:rpt_data,type:"GET",success:function(aF,aH,aG){if(aF.success){if(aF.lstobject){$("#rpt_data_body").empty();$("#rpt_data_body").append(aF.lstobject)}R(aF);$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style")}else{alert(aF.error)}}})}function G(){var aL=$("#rpt_nav_currentpage").val();var aM=$("#rpt_nav_page_size").val();var aH=$("#rpt_nav_topic").val();var aG=$("#rpt_nav_topic_by").val();var aI=$("#rpt_nav_starttime").val();var aJ=$("#rpt_nav_endtime").val();var aF=$("#rpt_nav_time").val();var aK=$("#rpt_nav_sort").val();data={currentpage:aL,sizepage:aM,topic:aH,topicby:aG,timescale:aF,starttimescale:aI,endtimescale:aJ,sortfield:aK};return data}function R(aF){$("#id_prev").unbind("click");$("#id_next").unbind("click");if(aF.hasprev==false){$("#id_prev").attr("disabled","disabled");$("#id_prev").addClass("ui-state-disabled")}if(aF.hasprev==true){$("#id_prev").removeAttr("disabled");$("#id_prev").removeClass("ui-state-disabled");$("#id_prev").click(q)}if(aF.hasnext==false){$("#id_next").attr("disabled","disabled");$("#id_next").addClass("ui-state-disabled")}if(aF.hasnext==true){$("#id_next").removeAttr("disabled");$("#id_next").removeClass("ui-state-disabled");$("#id_next").click(ae)}$(".item_display").html(aF.item_msg);$("#rpt_nav_currentpage").val(aF.currentpage)}function az(aF){$("#rpt_nav_topic").val(aF.nav_topic);$("#rpt_nav_topic_by").val(aF.nav_topic_by);$("#rpt_nav_page_size").val(aF.nav_nbrrow);$("#rpt_nav_time").val(aF.nav_timescale);$("#rpt_nav_starttime").val(aF.nav_timescale_start);$("#rpt_nav_endtime").val(aF.nav_timescale_end);$("#rpt_nav_sort").val(aF.nav_sort)}function E(aH,aF,aG){data=h();$.ajax({url:at,data:data,type:"GET",success:function(aT,aM,aP){if(aT.success){if(aT.lstobject){$("#rpt_list").empty();$("#rpt_list").append(aT.lstobject);rptlink="Nothing";if(aH==1){var aL=$("#rpt_nav_currentpage").val();var aR=$("#rpt_nav_sort").val();var aN=$("#rpt_nav_page_size").val();var aQ=$("#rpt_nav_topic").val();var aS=$("#rpt_nav_topic_by").val();var aK=$("#rpt_nav_time").val();var aO=$("#rpt_nav_starttime").val();var aJ=$("#rpt_nav_endtime").val();var aI=new step_report_store(aL,aN,aQ,aS,aK,aO,aJ,aR,aT.item_msg,aT.hasprev,aT.hasnext);rptlink=report_level.showlink(0,aF,aI,aG)}else{var aI=new step_report_store(aT.currentpage,aT.nav_nbrrow,aT.nav_topic,aT.nav_topic_by,aT.nav_timescale,aT.nav_timescale_start,aT.nav_timescale_end,aT.nav_sort,aT.item_msg,aT.hasprev,aT.hasnext);if(typeof aF=="undefined"){rptlink=report_level.showlink(0,aT.nav_topic,aI,"")}else{rptlink=report_level.showlink(0,aF,aI,aG)}}R(aT);az(aT);$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style");$("#rpt_link").html(rptlink)}}else{alert(aT.error)}}})}function h(){var aK=$("#rptwebusage_type option:selected").attr("value");var aP=$("#rptwebusage_user").val();var aL=$("#rptwebusage_host").val();var aF=$("#rptwebusage_userbymime").val();var aI=$("#rptwebusage_mimebyuser").val();var aN=$("#rptwebusage_destinationbymime").val();var aO=$("#rptsearch_time option:selected").attr("value");var aM=$("#rptcustom_start").val();var aG=$("#rptcustom_end").val();var aJ=$("#rptwebsecurity_nbrofrow option:selected").val();var aH={topic:aK,byuser:aP,byhost:aL,bymime:aF,mimebyuser:aI,destbymime:aN,timescale:aO,starttimescale:aM,endtimescale:aG,nbrrow:aJ};return aH}function H(aG){var aH=$(aG).attr("temp");objtd=$(aG).parent();statussort=objtd.next().children().attr("class");status="desc";if(statussort==""){status="desc"}else{if(statussort=="ui-icon ui-icon-triangle-1-s"){status="asc"}else{status="desc"}}strsort=aH+"_"+status;var aF=K();aF.sortfield=strsort;aF.status=0;$.ajax({url:X,data:aF,type:"GET",success:function(aI,aK,aJ){if(aI.success){if(aI.lstobject){$("#rpt_data_body").empty();$("#rpt_data_body").append(aI.lstobject)}R(aI);$("#rpt_nav_sort").val(aI.sortfield);Y();objlst=$("#rpt_header_ls th table tr td span");$.each(objlst,function(){$(this).attr("class","")});if(status==""){objtd.next().children().addClass("ui-icon ui-icon-triangle-1-n")}else{if(status=="desc"){objtd.next().children().addClass("ui-icon ui-icon-triangle-1-s")}else{objtd.next().children().addClass("ui-icon ui-icon-triangle-1-n")}}$("#rpt_data_body tr:last").addClass("ui-widget-header");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("onclick");$("#rpt_data_body tr:last").find("td:eq(1)").removeAttr("style")}else{alert(aI.error)}}})}function Y(){var aF=$("#rpt_topuser thead tr th span");$.each(aF,function(aG,aH){$(aH).removeClass("asc desc")})}function K(){var aK=$("#rpt_nav_currentpage").val();var aL=$("#rpt_nav_page_size").val();var aH=$("#rpt_nav_topic").val();var aG=$("#rpt_nav_topic_by").val();var aI=$("#rpt_nav_starttime").val();var aJ=$("#rpt_nav_endtime").val();var aF=$("#rpt_nav_time").val();data={currentpage:aK,sizepage:aL,topic:aH,topicby:aG,timescale:aF,starttimescale:aI,endtimescale:aJ};return data}function t(){data=K();var aF=$("#rpt_nav_sort").val();data.sortfield=aF;$.ajax({url:l,data:data,type:"GET",success:function(aG,aI,aH){if(aG.success){$("#rpt_dialog").dialog("open");$("#rpt_path_download").val(aG.success)}else{alert(aG.error)}}})}function k(){data=K();var aF=$("#rpt_nav_sort").val();data.sortfield=aF;$.ajax({url:aD,data:data,type:"GET",success:function(aG,aI,aH){if(aG.success){$("#rpt_dialog").dialog("open");$("#rpt_path_download").val(aG.success)}else{alert(aG.error)}}})}function D(aK,aH,aF){var aN=0;var aM=0;var aI=0;var aG=0;var aJ=this;_xvar=aF.clientX-10;_yvar=aF.clientY-10;$("#rpt_search_panel").css("top",_yvar);$("#rpt_search_panel").css("left",_xvar);var aL=$(aH).text();$("#rpt_search_info").html(aL);if(aK=="topbyuser"){$(".rpt_search_topuser").show();$(".rpt_search_topuser").attr("value",aL);$(".rpt_search_topmime").hide();$(".rpt_search_topmime").attr("value","")}if(aK=="topbymime"){$(".rpt_search_topmime").show();$(".rpt_search_topmime").attr("value",aL);$(".rpt_search_topuser").hide();$(".rpt_search_topuser").attr("value","")}$("#rpt_search_panel").show();if(aF.stopPropagation){aF.stopPropagation()}else{if(window.event){window.event.cancelBubble=true}}}function Q(aG){$("#rptwebusage_type").val("tophostbyuser");var aF=$(aG).attr("value");aF=$.trim(aF);$("#rptwebusage_user").val(aF);$("#rptwebusage_user_row").show();E(1,"topuser,tophostbyuser",aF);$("#rpt_search_panel").hide()}function ab(aG){$("#rptwebusage_type").val("topusersbyhost");var aF=$(aG).text();aF=$.trim(aF);$("#rptwebusage_host").val(aF);$("#rptwebusage_host_row").show();E(1,"tophost,topusersbyhost",aF)}function m(aG){$("#rptwebusage_type").val("topmimebyuser");var aF=$(aG).attr("value");aF=$.trim(aF);$("#rptwebusage_mimebyuser").val(aF);$("#rptwebusage_mimebyuser_row").show();$("#rptwebusage_userbymime_row").hide();E(1,"topuser,topmimebyuser",aF);$("#rpt_search_panel").hide()}function aB(aG){$("#rptwebusage_type").val("topuserbymime");var aF=$(aG).attr("value");aF=$.trim(aF);$("#rptwebusage_userbymime").val(aF);$("#rptwebusage_userbymime_row").show();$("#rptwebusage_mimebyuser_row").hide();E(1,"topmime,topuserbymime",aF);$("#rpt_search_panel").hide()}function O(aG){$("#rptwebusage_type").val("topdestinationbymime");var aF=$(aG).attr("value");aF=$.trim(aF);$("#rptwebusage_destinationbymime").val(aF);$("#rptwebusage_destinationbymime_row").show();E(1,"topmime,topdestinationbymime",aF);$("#rpt_search_panel").hide()}function M(){pathfile=$("#rpt_path_download").val();try{window.location.href=ar+"?path_file="+pathfile}catch(aF){alert(aF)}}function F(aF,aH,aG){data={type:aF,email:aH,active:aG};return data}function an(){objid=$(this).parent().attr("id");arrayobj=[];arrayobj=objid.split("_");data=F(arrayobj[1],"","1");$.post(Z,data,function(aF){if(aF.success=="success"){aE(aF.type)}})}function aE(aG){try{objon="";objoff="";if(aG=="days"){objon="#rptenable_days > .sw-on";objoff="#rptenable_days > .sw-off"}if(aG=="weeks"){objon="#rptenable_weeks > .sw-on";objoff="#rptenable_weeks > .sw-off"}if(aG=="months"){objon="#rptenable_months > .sw-on";objoff="#rptenable_months > .sw-off"}$(objoff).removeClass("redicon");$(objoff).addClass("greyicon");$(objon).removeClass("greyicon");$(objon).addClass("greenicon")}catch(aF){}}function ap(aG){try{objon="";objoff="";if(aG=="days"){objon="#rptenable_days > .sw-on";objoff="#rptenable_days > .sw-off"}if(aG=="weeks"){objon="#rptenable_weeks > .sw-on";objoff="#rptenable_weeks > .sw-off"}if(aG=="months"){objon="#rptenable_months > .sw-on";objoff="#rptenable_months > .sw-off"}$(objon).removeClass("greenicon");$(objon).addClass("greyicon");$(objoff).removeClass("greyicon");$(objoff).addClass("redicon")}catch(aF){}}function ah(){objid=$(this).parent().attr("id");arrayobj=[];arrayobj=objid.split("_");data=F(arrayobj[1],"","0");$.post(Z,data,function(aF){if(aF.success=="success"){ap(aF.type)}})}function B(){$("#rpt_dialog_setting").dialog("open");idobj=$(this).attr("id");lsttype=[];idobj=idobj.split("_");$("#rpt_type").val(idobj[1]);$("#rpt_add_error").html("");$("#rpt_email_address").val("");savebtt=$("#rpt_dialog_setting");$(savebtt).find(".save_button.save").unbind("click");$(savebtt).find(".save_button.save").click(function(){timescale=$("#rpt_type").val();emailaddress=$("#rpt_email_address").val();if($.trim(emailaddress)==""){$("#rpt_add_error").html("Please enter the email address.");return}data=F(timescale,emailaddress,"");$.post(r,data,function(aF){if(aF.success=="success"){id=aF.id;iddiv="rptdays_"+id;itemhtml='<div id="'+iddiv+'" class="list_item" style="border-bottom:1px solid">';itemhtml=itemhtml+'<div class="proxynow trashicon item_delete"></div>';itemhtml=itemhtml+"<div>"+aF.email+"</div></div>";p(itemhtml,aF.type);$("#"+iddiv).click(T);$("#rpt_dialog_setting").dialog("close")}if(aF.error!=""){$("#rpt_add_error").html(aF.error)}})})}function af(){var aL=$("#id_fromemail").val();var aI=$("#id_smtphost").val();var aK=$("#id_smtpport").val();var aJ=$("#id_smtpuser").val();var aH=$("#id_smtppass").val();var aF=$("#id_smtprepass").val();var aG=$("#id_smtpsecure option:selected").val();data={fromemail:aL,smtphost:aI,smtpport:aK,smtpuser:aJ,smtppass:aH,smtprepass:aF,smtpsecure:aG};$.post(S,data,function(aM){if(aM.success=="success"){stat.show_status(0,"Mail server settings successfully saved.")}else{if(aM.invalid){err=utils.get_errors(aM.invalid);stat.show_status(1,err)}else{if(aM.error!=""){stat.show_status(1,aM.error)}}}})}function T(){valid=$(this).attr("id");lst=[];lst=valid.split("_");data={id:lst[1]};$.post(n,data,function(aF){if(aF.success=="success"){$("#"+valid).remove()}else{alert(aF.error)}})}function p(aF,aG){if(aG=="days"){$("#rpt_rpt_days").append(aF)}if(aG=="weeks"){$("#rpt_rpt_weeks").append(aF)}if(aG=="months"){$("#rpt_rpt_months").append(aF)}}function aj(aG){if(aG.stopPropagation){aG.stopPropagation()}else{if(window.event){var aF;aF=window.event.keyCode;window.event.cancelBubble=true;if(aF==13){this.focus()}}}}function C(aF){$(aF).removeClass("ui-state-hover")}function U(aF){$(aF).addClass("ui-state-hover")}function aq(){$("#rpt_search_panel").hide()}return{load:j,rpt_sortdata:H,searchtophostbyuser:Q,searchtopuserbyhost:ab,searchtopmimebyuser:m,searchtopuserbymime:aB,downloadfile:M,typeofrptinfo:ac,show_hide_rpt_nav:R,show_search_panel:D,rpt_menu_mouseout:C,rpt_menu_mouseover:U,searchtopsitebymime:O,rpt_mainmenu_mouseover:aq,rpt_update:E,rpt_get_cache:ay}}();function step_report_store(k,m,n,l,c,g,p,h,f,j,d){if(typeof k=="undefined"){this.currentpage=1}else{this.currentpage=k}if(typeof m=="undefined"){this.rpt_cache_pagesize=20}else{this.rpt_cache_pagesize=m}this.rpt_cache_topic=n;if(typeof l=="undefined"){this.rpt_cache_topicby=""}else{this.rpt_cache_topicby=l}this.rpt_cache_time=c;this.rpt_cache_starttime=g;this.rpt_cache_endtime=p;if(typeof h=="undefined"){this.rpt_nav_sort="host"}else{this.rpt_nav_sort=h}this.item_msg=f;this.hasnext=d;this.hasprev=j}var report_level=function(){var f;function h(p){if(p=="topuser"){return"Top User"}if(p=="tophost"){return"Top Site"}if(p=="topmime"){return"Top Mime"}if(p=="tophostbyuser"){return"Top Site By User"}if(p=="topdestinationbymime"){return"Top Site By Mime"}if(p=="topusersbyhost"){return"Top User By Site"}if(p=="topuserbymime"){return"Top User By Mime"}if(p=="topmimebyuser"){return"Top Mime By User"}}function n(){var r=$("#rpt_nav_currentpage").val();var A=$("#rpt_nav_topic").val();var p=$("#rpt_nav_topic_by").val();var u=$("#rpt_nav_page_size").val();var C=$("#rpt_nav_time").val();var B=$("#rpt_nav_starttime").val();var q=$("#rpt_nav_endtime").val();var y=$("#rpt_nav_sort").val();var w=$(".item_display").val();var v="data_0";var t=new step_report_store(r,u,A,p,C,B,q,y,w,false,false);$("#rpt_cache").data(v,t);$("#rpt_link").html("<b>Top User > <b/>")}function c(p,A,r,t){var w="";var y=[];y=A.split(",");var v=0;for(v=0;v<y.length;v++){var q=v+"-"+A+"-"+t;var u;if(v==0){u=h(y[v])}else{u=h(y[v])+"("+t+")"}if(v==y.length-1){w=w+"<b><span>"+u+"</span></b> > "}else{w=w+"<b><span><a href='#' value='"+q+"' onclick='return report_level.getcache(this);'>"+u+"</a></span> > </b>"}}if((p==0)&&(y.length==1)){d()}g(p,r);return w}function d(){type1="data_0";type2="data_1";$("#rpt_cache").removeData(type1);$("#rpt_cache").removeData(type2)}function j(p){if(p=="topuser"){return"0"}if(p=="tophost"){return"0"}if(p=="topmime"){return"0"}return"1"}function g(q,p){type="data_"+q;$("#rpt_cache").data(type,p)}function l(p){lstobj=$(p).attr("value");lstarray=[];aa=lstobj.split("-");level=aa[0];pathlink=aa[1];name1=aa[2];level_type="data_"+level;infosetting=$("#rpt_cache").data(level_type);data=m(infosetting);console.log(data);report.rpt_get_cache(data,level,pathlink,name1)}function m(q){var r=q.currentpage;var w=q.rpt_cache_pagesize;var u=q.rpt_cache_topic;var p=q.rpt_cache_topicby;var v=q.rpt_cache_starttime;var t=q.rpt_cache_endtime;var y=q.rpt_cache_time;var A=q.rpt_nav_sort;data={currentpage:r,sizepage:w,topic:u,topicby:p,timescale:y,starttimescale:v,endtimescale:t,sortfield:A};return data}function k(q){try{$("#rptwebusage_type").val(q.rpt_cache_topic);$("#rptsearch_time").val(q.rpt_cache_time);$("#rptcustom_start").val(q.rpt_cache_starttime);$("#rptcustom_end").val(q.rpt_cache_endtime);$("#rptwebsecurity_nbrofrow").val(q.rpt_cache_pagesize);var p=q.rpt_cache_topic;if(p=="tophostbyuser"){$("#rptwebusage_user").val(q.rpt_cache_topicby)}if(p=="topusersbyhost"){$("#rptwebusage_host").val(q.rpt_cache_topicby)}if(p=="topuserbymime"){$("#rptwebusage_userbymime").val(q.rpt_cache_topicby)}if(p=="topmimebyuser"){$("#rptwebusage_mimebyuser").val(q.rpt_cache_topicby)}if(p=="topdestinationbymime"){$("#rptwebusage_destinationbymime").val(q.rpt_cache_topicby)}}catch(r){$("#rptwebusage_type").val("topuser");$("#rptsearch_time").val("today");$("#rptcustom_start").val("");$("#rptcustom_end").val("");$("#rptwebsecurity_nbrofrow").val("20");alert(error)}}return{showlink:c,getcache:l,get_level:j,savecache:g,init:n,gettext:h,}}();var stat=(function(){var k="ui-state-highlight ui-corner-all";var j="ui-icon ui-icon-check";var h="ui-state-error ui-corner-all";var d="ui-icon ui-icon-alert";function c(m,r){var t="#status-panel";var q="#status_msg";var n={};if(m==0){g(t);$(q).html(r);$(t).show("blind",n,"fast",function(){setTimeout(function(){$(t).hide("slide",n,500,null)},5000)})}else{f(t);$(q).html(r);$(t).show()}}function g(p){var n=p+"_outer";var m=p+"_inner";l(n,m);$(n).addClass(k);$(m).addClass(j)}function f(p){var n=p+"_outer";var m=p+"_inner";l(n,m);$(n).addClass(h);$(m).addClass(d)}function l(n,m){if($(n).hasClass(k)){$(n).removeClass(k);$(m).removeClass(j)}if($(n).hasClass(h)){$(n).removeClass(h);$(m).removeClass(d)}}return{show_status:c}}());var user=(function(){var c="/defuser/save/pwd/";function d(){var j=f();$.post(c,j,function(k){if(k.success==1){stat.show_status(0,k.msg)}else{if(k.error==1){var l=utils.get_errors(k.errors);stat.show_status(1,l)}else{stat.show_status(1,k)}}});return false}function f(){var j={password:$("#id_password").val()};return j}function h(){$("#id_password").val("**********");$(".save_button.save").click(d);utils.bind_hover($(".save_button"))}function g(){return menu.get(c,h)}return{load:g}}());var utils=(function(){var N;var q=2000;var C;var E=5000;var m={admin:2,normal:1};function c(U){$(U).dialog({autoOpen:false,modal:true,buttons:{OK:function(){$(this).dialog("close")}}})}function M(){$("#progress_status").ajaxSend(function(U,W,V){if(V.url.indexOf(log.run_url)==0||V.url.indexOf(dashboard.data_url)==0||V.url.indexOf(patchupgrade.upgrade_log_run_url)==0||V.url.indexOf(patchupgrade.checkserver_url)==0){return}$(this).show()});$("#progress_status").ajaxComplete(function(){$(this).hide()})}function O(){$(document).ajaxError(function(U,W,V,X){if(V.url.indexOf(dashboard.data_url)==0||V.url.indexOf(patchupgrade.checkserver_url)==0){return}f(W.responseText)});$("#error-dialog").dialog({autoOpen:false,modal:true,width:700,height:500,buttons:{OK:function(){$(this).dialog("close")}}})}function Q(X,V){var W=v();var U=[W.left,W.top];$(X).dialog({autoOpen:false,width:W.width-3,resizable:false,draggable:true,modal:false,stack:false,zIndex:1000,position:U,close:V})}function L(U){$(U).dialog({autoOpen:false,modal:true})}function H(U){$("#panel_body > .list_row").mouseout(function(){if(C){clearTimeout(C)}C=setTimeout(function(){$("#panel_tooltip").hide()},E)});$("#panel_body > .list_row").mouseenter(function(V){if(C){clearTimeout(C)}var ab=$(this);var Z=$("#menu");var ad=ab.attr("id");var ac=ab.offset();var W=ab.width();var Y=Z.width()*2+50;var X=ac.top+10;$("#panel_tooltip_body").empty();$.getJSON(U,{id:ad},function(ae){if(ae.id==ad){$("#panel_tooltip_body").html(ae.content);$("#panel_tooltip").position({my:"center",at:"left",of:$("body"),offset:Y+" "+X});$("#panel_tooltip").show()}})});$("#panel_tooltip").mouseenter(function(){if(C){clearTimeout(C)}});$("#panel_tooltip").mouseout(function(){if(C){clearTimeout(C)}C=setTimeout(function(){$("#panel_tooltip").hide()},E)})}function k(W,U){var V=$.inArray(W,U);return(V>=0?true:false)}function p(U){$(U).dialog("destroy");$(U).remove()}function y(){p("div[id^='dialog-message']");p("div[id^='list-panel']");p("div[id^='confirm']");p("div[id^='dialog']")}function F(){$("#left_box").hide()}function P(X,U){var V=X-1;var W=(V<1?"":"_"+V);$(U+W).dialog("close")}function D(U,V){if(U==1){$("#dialog_msg").html(V)}else{$("#dialog_msg").text(V)}$("#dialog-message").dialog("open")}function f(U){$("#error_dialog").html(U);$("#error_dialog style").remove();$("#error-dialog").dialog("open")}function n(U){U.hover(function(){$(this).toggleClass("ui-state-hover")},function(){$(this).toggleClass("ui-state-hover")})}function h(U){U.click(function(){if(this.checked){U.not(this).removeAttr("checked")}})}function I(W){var U=W.indexOf("_");if(U<0){return 0}var V=W.substr(U+1);return parseInt(V,10)}function u(W){var V=W.lastIndexOf("-");var U=W.lastIndexOf("_");if(V<5){return""}else{if(W.indexOf("export-form")==0&&V<7){return""}else{return W.substring(V+1,U)}}}function J(V){var U=I(V);return(U>0?U-1:0)}function r(V){var U=I(V);return U+1}function A(V){var U=I(V);return(U==0?"":"_"+U)}function d(V,W,U){V.removeData(W);V.data(W,U)}function R(U){K();N=setTimeout(U,q)}function K(){clearTimeout(N)}function T(U,X){var W=$(U);for(var V=0;V<X;V++){W=W.parent()}return W}function S(U,V){$(".ui-draggable-dragging").addClass("ui-state-hover")}function w(U,V){$(".ui-draggable-dragging").removeClass("ui-state-hover")}function g(U){$(U+" > div").removeClass("ui-state-default");$(U+" > div").removeClass("ui-state-hover");$(U+" > div:odd").addClass("ui-state-default");$(U+" > div:even").addClass("ui-state-hover")}function G(U){var V=U.indexOf("_");if(V>=0){var W=U.substr(V+1);return parseInt(W,10)}return -1}function l(W){var V={errors:W};var U=new EJS({url:"/media/tpl/form_error.ejs"}).render(V);return U}function t(U){var Y=null;if(document.cookie&&document.cookie!=""){var X=document.cookie.split(";");for(var W=0;W<X.length;W++){var V=jQuery.trim(X[W]);if(V.substring(0,U.length+1)==(U+"=")){Y=decodeURIComponent(V.substring(U.length+1));break}}}return Y}function j(U){return U-$(document).scrollTop()}function v(){var Y=$("#menu");var V=Y.width();V+=5;var X=Y.offset();var W=X.left;var U=X.top;W-=5;return{width:V,left:W,top:U}}function B(U){try{var W="/wizard_profile_switch/";var X={status:U};$.post(W,X,function(Y){if(Y.status=="success"){window.location.replace("/wizardReRun/")}if(Y.status=="error"){alert(Y.error_info)}})}catch(V){alert(V.message)}}return{init_alert_dialog:c,init_progress:M,init_server_error_dialog:O,init_list_panel:Q,init_confirm_delete:L,init_panel_tooltip:H,item_exist:k,remove_dialog:p,clear_dialogs:y,cancel_form:F,cancel_dialog:P,show_dialog:D,show_error_dialog:f,bind_hover:n,set_mutual_exclusive:h,get_form_level:I,get_form_scope:u,get_next_form_level:r,get_prefix:A,set_data:d,typing_timer:N,done_typing_interval:q,tooltip_timer:C,tooltip_delay:E,accesstype:m,countdown_filter:R,stop_filter_timer:K,get_parent:T,add_drag_css:S,remove_drag_css:w,set_alt_css:g,get_itemid:G,get_errors:l,get_cookie:t,get_elm_top:j,switch_wizard:B}}());$.ajaxSetup({cache:false});var wizard=(function(){var u="/wizard_setup_next/";var am="/wizard_setup_back/";var aG="/wizard_skip/";var ai="/wizard_import_settings/";var bX="/wizard_import_test/";var aF="/wizard_check_IPRange/";var r="/wizard_open_add_group/";var cV="/wizard_open_edit_group/";var aS="/wizard_save_group/";var ag="/wizard_save_user/";var bM="/wizard_delete_tempuser/";var aA="/wizard_getlistuser/";var cH="/wizard_open_dialog_policy/";var cd="/wizard_save_policy/";var au="/wizard_open_profile/";var cY="/wizard_save_schedule/";var a8="/wizard_search_profile/";var t="/wizard_save_defnet/";var bE="/wizard_show_defnet_level2/";var aM="/wizard_profile_save/";var a0="/wizard_load_wpprofile/";var ci="/wizard_create_profile/";var bH="Notused";var cX="Username";var m="Typeaccess";var bD="Dispalyname";var aQ="Password";var cy="Comment";var cT="Group";var cP="schedules";var bB="defnet";var cM="defusers";var ah="||*||*||*||";var p=0;var af="Fields Setting";var bv="Error Info";var co="Test Import Result";var y="Create New Profile";var d="Edit Profile";var ac="Profile List";function cl(){$("#wizard_error_info").dialog({title:bv,autoOpen:false,modal:true,width:200})}function bl(c1){$("#wizard_error_content_info").html("");$("#wizard_error_content_info").html(c1);$("#wizard_error_info").dialog("open")}function az(c1){$("#"+c1).dialog("close")}function bI(c1){popup_dialog_opt={autoOpen:false,modal:false,width:520,zIndex:1000};if(c1=="add"){popup_dialog_opt.title=y}else{popup_dialog_opt.title=d}return popup_dialog_opt}function bZ(){popup_dialog_opt={autoOpen:false,modal:false,width:200,position:[0,0]};return popup_dialog_opt}function b9(){popup_dialog_opt={autoOpen:false,width:340,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function ao(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function B(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function aK(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function ap(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function cw(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function cx(){popup_dialog_opt={autoOpen:false,width:320,resizable:false,draggable:true,modal:true,stack:false,zIndex:10000};return popup_dialog_opt}function bT(){var c3=$("#id_adpassword").val();var c1=$("#id_readpassword").val();var c4=$("#id_emailnotifier").val();var c2=$("#wizard_identification_form").val();var c5="0";data={};data={adpassword:c3,readpassword:c1,emailnotifier:c4,wizard_identification_form:c2,position_next:c5};return data}function cj(){var c2=$("input[name='options']:checked").val();var c1=$("#wizard_identification_form").val();data={};data={position_next:c2,wizard_identification_form:c1};return data}function b3(){var c5={};var c3=$("#id_ipaddresslocal_internal").val();var da=$("#id_netmaskaddresslocal_internal").val();var c7=$("#id_hardware_internal option:selected").attr("value");var c6=$("#id_ipaddresslocal_external").val();var c1=$("#id_netmaskaddresslocal_external").val();var c2=$("#id_defaultgateway_external").val();var c9=$("#id_hardware_external option:selected").attr("value");var c8=$("#wizard_identification_form").val();var c4="0";c5={ipaddresslocal_internal:c3,netmaskaddresslocal_internal:da,hardware_internal:c7,ipaddresslocal_external:c6,netmaskaddresslocal_external:c1,defaultgateway_external:c2,hardware_external:c9,wizard_identification_form:c8,position_next:c4};return c5}function b1(){var c4={};var c1=$("#id_ipaddresslocal").val();var c6=$("#id_netmaskaddresslocal").val();var c5=$("#id_defaultgateway").val();var c2=$("#id_hardware option:selected").attr("value");var c3=$("#wizard_identification_form").val();var c7="0";c4={ipaddresslocal:c1,netmaskaddresslocal:c6,defaultgateway:c5,hardware:c2,wizard_identification_form:c3,position_next:c7};return c4}function C(){var c5={};var c2=$("#wizard_primarydns").val();var c4=$("#wizard_seconddns").val();var c1=$("#wizard_thirddns").val();var c3=$("#wizard_identification_form").val();var c6="0";c5={wizard_primarydns:c2,wizard_seconddns:c4,wizard_thirddns:c1,wizard_identification_form:c3,position_next:c6};return c5}function ax(){var c2={};var c3=$("input[name='wizard_user']:checked").val();var c1=$("#wizard_identification_form").val();c2={wizard_identification_form:c1,position_next:c3};return c2}function aX(){var c7={};var c2=$("#id_adserver").val();var c1=$("#id_addomain").val();var c3=$("#id_adusername").val();var c6=$("#id_adpassword").val();var c5=$("#id_confirmadpassword").val();var c8="0";var c4=$("#wizard_identification_form").val();c7={adserver:c2,addomain:c1,adusername:c3,adpassword:c6,confirmadpassword:c5,wizard_identification_form:c4,position_next:"0"};return c7}function aV(){var c5={};var c3=$("#wizard_import_header").val();var c6=$.trim($("#wizard_imported_content").val());var c1=$("#wizard_seperate_field").val();var c4=$("#wizard_default_pass_authb").val();var c2=$("#wizard_identification_form").val();position_next="0";c5={wizard_import_header:c3,wizard_imported_content:c6,wizard_seperate_field:c1,wizard_identification_form:c2,position_next:position_next,wizard_default_pass_authb:c4};return c5}function cC(){var c3={};var c1=$("#wizard_identification_form").val();position_next="0";var c2=$("#wizard_list_group_internetusage");sss="";o=$("#wizard_content_list_group input[id=wizard_check_groupmain]:checked");$.each(o,function(c4){if(sss==""){sss=$(o[c4]).attr("value")}else{sss=sss+","+$(o[c4]).attr("value")}});c3={wizard_identification_form:c1,insertdept:sss,position_next:position_next};p=p+1;c3.is_finished=p;return c3}function aZ(){var c1=[];var c2=$("#exceptusers");lst_id=$(c2.find("#id_exceptusers")).children();$(lst_id).each(function(){var c3=$(this).attr("id");var c4=[];c4=c3.split("_");c1.push(c4[1])});return c1.join(",")}function bq(dm,c5,dD,dg){var dd=$("#except");var c8=(dm.find("#id_scheduleon").attr("checked")?1:0);var c2=(dd.find("#id_skipauth").attr("checked")=="checked"?1:0);var dn=(dd.find("#id_skipcache").attr("checked")=="checked"?1:0);var da=(dd.find("#id_skipav").attr("checked")=="checked"?1:0);var dl=(dd.find("#id_skipext").attr("checked")=="checked"?1:0);var dt=(dd.find("#id_skipmime").attr("checked")=="checked"?1:0);var dz=(dd.find("#id_skipurl").attr("checked")=="checked"?1:0);var c9=(dd.find("#id_skipcontentfilter").attr("checked")=="checked"?1:0);var c1=dm.find("#id_schedules").data("schedules");var c7=dm.find("#id_allowexts").data("allowexts");var dw=dm.find("#id_blockexts").data("blockexts");var dv=dm.find("#id_allowmimes").data("allowmimes");var dF=dm.find("#id_blockmimes").data("blockmimes");var de=dm.find("#id_categories").data("categories");var du=dm.find("#id_whitelist").data("whitelist");var dp=dm.find("#id_blacklist").data("blacklist");var dq=dm.find("#id_contents").data("contents");var dj=dd.find("#id_exceptnets").data("exceptnets");var di=dd.find("#id_excepturls").data("excepturls");var dy=dd.find("#id_exceptusers").data("exceptuserinternals");var dA=dd.find("#id_exceptusers").data("exceptuserexternals");var dx=c1.join(",");var dE=c7.join(",");var dh=dw.join(",");var dC=dv.join(",");var c4=dF.join(",");var dk=de.join(",");var df=du.join(",");var dc=dp.join(",");var db=dq.join(",");var ds=dj.join(",");var dr=di.join("||");var c3=aZ();var c6=dA.join(",");var dB={name:dm.find("#id_name").val(),location:dm.find("#id_location").val(),timequota:dm.find("#id_timequota").val(),sizequota:dm.find("#id_sizequota").val(),catdef:dm.find("#id_catdef").val(),safesearchon:dm.find("#id_safesearchon").val(),scheduleon:c8,schedules:dx,allowexts:dE,blockexts:dh,allowmimes:dC,blockmimes:c4,cats:dk,whitelist:df,blacklist:dc,contentfilters:db,skipauth:c2,skipcache:dn,skipav:da,skipext:dl,skipmime:dt,skipurl:dz,skipcontentfilter:c9,exceptnets:ds,excepturls:dr,exceptuserinternals:c3,exceptuserexternals:c6,save_type:dg};return dB}function bh(){var c1=$("#wizard_identification_form").val();data={};if(c1=="administratoraccount"){data=bT()}if(c1=="networkinterfacesdefinition"){data=cj()}if(c1=="networkinterfacesdefinitionA"){data=b3()}if(c1=="networkinterfacesdefinitionB"){data=b1()}if(c1=="trusted_network_range"){data=ak()}if(c1=="dns"){data=C()}if(c1=="userauthentication"){data=ax()}if(c1=="userauthenticationA"){data=aX()}if(c1=="userauthenticationB"){data=aV()}if(c1=="internet_usage_policy"){data=cC()}return data}function ae(){var c1=$("#wizard_identification_form").val();if(c1=="trusted_network_range"){cQ()}if(c1=="internet_usage_policy"){$("#wizard_dialog").remove();$("#wizard_dialog_test").remove()}if(c1=="dns"){$("#list-panel").remove();$("#dialog-add-netlist").remove();$("#dialog-edit-netlist").remove()}if(c1=="finished"){$(".ui-dialog-content").dialog("close")}}function b2(){$("#wizard_finished_button").unbind("click");var c1=bh();$.post(u,c1,function(c3){if(c3.status=="success"){$("#wizard_content").empty();$("#wizard_content").append(c3.form);$("#wizard_content_iprange").hide();utils.bind_hover($(".save_button.save"));ae();$("#list-panel").dialog("close");namefrm_new=$("#wizard_identification_form").val();if(namefrm_new=="networkinterfacesdefinition"){var c6=c3.position_next;$("input[type=radio]").each(function(){$(this).attr("checked",false)});name_input="input[value="+c6+"]";$(name_input).attr("checked",true)}if(namefrm_new=="dns"){var c4=c3.wizard_primarydns;var c5=c3.wizard_seconddns;var c2=c3.wizard_thirddns;$("#wizard_primarydns").val(c4);$("#wizard_seconddns").val(c5);$("#wizard_thirddns").val(c2)}if(namefrm_new=="userauthentication"){var c6=c3.position_next;$("input[type=radio]").each(function(){$(this).attr("checked",false)});name_input="input[value="+c6+"]";$(name_input).attr("checked",true)}}if(c3.status=="error"){$("#wizard_error_info").html(c3.error_info)}})}function ck(){data={};var c1=$("#wizard_identification_form").val();data=bh();$.post(am,data,function(da){if(da.status=="success"){$("#wizard_content").empty();$("#wizard_content").append(da.form);namefrm_new=$("#wizard_identification_form").val();$("#list-panel").dialog("close");if(namefrm_new=="networkinterfacesdefinition"){var c3=da.position_next;if((c3!="0")&&(c3!="1")){c3="0"}$("input[type=radio]").each(function(){$(this).attr("checked",false)});name_input="input[value="+c3+"]";$(name_input).attr("checked",true)}if(namefrm_new=="dns"){var c5=da.wizard_primarydns;var c4=da.wizard_seconddns;var c8=da.wizard_thirddns;$("#wizard_primarydns").val(c5);$("#wizard_seconddns").val(c4);$("#wizard_thirddns").val(c8)}if(namefrm_new=="userauthentication"){var c3=da.position_next;if((c3!="0")&&(c3!="1")&&(c3!="2")){c3="0"}$("input[type=radio]").each(function(){$(this).attr("checked",false)});name_input="input[value="+c3+"]";$(name_input).attr("checked",true)}if(namefrm_new=="userauthenticationB"){var c2="";var c7="";var c9="";var c6="";c2=da.wizard_import_header;c7=da.wizard_imported_content;c9=da.wizard_seperate_field;c6=da.wizard_default_pass_authb;$("#wizard_import_header").val(c2);$("#wizard_imported_content").val(c7);$("#wizard_seperate_field").val(c9);$("#wizard_default_pass_authb").val(c6)}if(namefrm_new=="trusted_network_range"){utils.set_alt_css("#netlist")}ae();utils.bind_hover($(".save_button.save"));$("#wizard_add_group").dialog("close");$("#wizard_profile_search").dialog("close");$("#wizard_add_member").dialog("close");$("#wizard_list_panel_user").dialog("close");$("#wizard_list_panel_policy").dialog("close");$("#wizard_dialog_profile").dialog("close");$("#wizard_dialog_profile").dialog("close");$("#wizard_profile_list_search").html("");$("#wizard_list_panel_content_user").html("");$("#wizard_dialog_content_profile").html("")}if(da.status=="error"){$("#wizard_error_info").html(da.error_info)}})}function bd(){data={};var c1=$("#wizard_identification_form").val();data={wizard_identification_form:c1};$.post(aG,data,function(c2){if(c2.status=="success"){$("#wizard_content").empty();$("#wizard_content").append(c2.form);utils.bind_hover($(".save_button.save"));ae()}if(c2.status=="error"){$("#wizard_error_info").html(c2.error_info)}})}function J(){try{cl();$("#wizard_dialog").dialog({title:af,autoOpen:false,modal:true,width:520});$.get(ai,data,function(c2){if(c2.status=="success"){$("#wizard_setting").html("");$("#wizard_setting").html(c2.form);$("#wizard_field1 td select").val("1");$("#wizard_dialog").dialog("open")}if(c2.status=="error"){bl(c2.error_info)}})}catch(c1){bl(c1.message)}}function ba(){try{cl();var c2=aV();$("#wizard_dialog_test").dialog({title:co,autoOpen:false,modal:true,width:500});$.post(bX,c2,function(c3){if(c3.status=="success"){$("#wizard_setting_test").empty();$("#wizard_setting_test").html(c3.form);$("#wizard_dialog_test").dialog("open")}if(c3.status=="error"){alert(c3.error_info)}})}catch(c1){bl(c1.message)}}function aD(){var c4=$("#wizard_field1 td select option:selected").val();var c3=$("#wizard_field2 td select option:selected").val();var dc=$("#wizard_field3 td select option:selected").val();var c2=$("#wizard_field4 td select option:selected").val();var c8=$("#wizard_field5 td select option:selected").val();var da=$("#wizard_field6 td select option:selected").val();var c1=new Array();c1[0]=c4;c1[1]=c3;c1[2]=dc;c1[3]=c2;c1[4]=c8;c1[5]=da;var dg=c1.length;var df=0;var dd=0;var dh="";var c9=false;var dj=false;var di="";var de="";var db=$("#wizard_import_seperate").val();if($.trim(db)==""){$("#wizard_error_import_setting").html("Field delimiter is required.");return}if($.trim(db)=="?"){$("#wizard_error_import_setting").html("'?' is not a valid");return}if(c4==bH){$("#wizard_error_import_setting").html("User name is required.");return}for(df;df<dg-1;df++){var dk=c1[df];if(dk!=bH){for(dd=df+1;dd<dg;dd++){if(dk==c1[dd]){c9=true}}}}if(c9==true){$("#wizard_error_import_setting").html("Invalid field position. Position already used by another field.");return}var c7="";var c1=new Array();c1=["?","?","?","?","?","?"];var c5=parseInt(c4);c1[c5-1]=cX;if(c3!=bH){c5=parseInt(c3);c1[c5-1]=m}if(dc!=bH){c5=parseInt(dc);c1[c5-1]=bD}if(c2!=bH){c5=parseInt(c2);c1[c5-1]=aQ}if(c8!=bH){c5=parseInt(c8);c1[c5-1]=cy}if(da!=bH){c5=parseInt(da);c1[c5-1]=cT}for(dd=c1.length-1;dd>0;dd--){if(c1[dd]=="?"){c1.splice(dd,1)}else{break}}de=c1.join(db);var c6=$("#wizard_default_pass").val();$("#wizard_error_import_setting").html("");$("#wizard_import_header").val(de);$("#wizard_seperate_field").val(db);$("#wizard_default_pass_authb").val(c6);$("#wizard_content_seperate").html("Fields is seperated by "+db+"<br/> If you don't select filed Password then password will be : "+c6);$("#wizard_dialog").dialog("close")}function cQ(){ar();utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",cq);$("#list-panel").dialog(bZ());$("#dialog-add-netlist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-netlist").dialog(defnet.get_ui_opt().popup_dialog_opt);var c1=$("div.dns_box");c1.find(".img_add").click(cW);c1.find(".img_folder").bind("click",function(){q()})}function cW(){var c1=$(this);var c2={self:c1,scope:"netlist",level:1,prefix:"",savetemp:"inserttemp",url:defnet.save_temp_url,func_save:cJ,func_show_all:bo,func_show_add:bo};aw(c2);return false}function aw(c1){c1.level=1;c1.prefix="";defnet.init_form_wizard(c1)}function M(c1){var c2=defnet.get_level_data(c1.self);c1.level=c2.level;c1.prefix=c2.prefix;defnet.init_form_wizard(c1)}function cJ(){var c1={level:1,savetemp:"inserttemp",url:defnet.save_temp_url,prefix:"",scope:"netlist",func_add:bW};return defnet.save_inner_form(c1)}function cE(c3){var c1=c3.join(",");var c2={data:c1};return c2}function bW(c3,c1){var c3=[c3];var c1=[c1];var c2=$(".dns_box");E(c2,c3,c1,"wizard.edit_allowext(this)")}function bK(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:1,prefix:"",savetemp:"updatetemp",url:defnet.save_temp_url,scope:"netlist",func_update:bx,func_show_all:bo,func_show_add:bo};defnet.init_edit_form_wizard(c4);return false}function bx(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){bP()}}function q(){$("#list_body").load(defnet.list_temp.panel,null,function(){$(".add_button").click(bi);$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){bP()}});utils.bind_hover($("#list_body").find(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function bP(){var c1=$("#id_filter_text").val();$("#panel_body").load(defnet.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function be(c2){var c1=[];var c3=$(".dns_box");lst_id=$(c3.find("#netlist")).children();$(lst_id).each(function(){var c4=$(this).attr("id");var c5=[];c5=c4.split("_");c1.push(c5[1])});if($.inArray(c2,c1)>-1){return true}return false}function bi(){var c2=[];var c3=[];var c1=$(".dns_box");$("input[name=chklist]:checked").each(function(){var c5=$(this);var c6=c5.parent().attr("id");var c4=c5.next().html();result=be(c6);if(result==false){E(c1,c6,c4,"wizard.edit_net(this)")}});utils.set_alt_css("#netlist")}function ak(){var c3=$(".dns_box");var c2=$("#wizard_identification_form").val();var c5="0";var c4="";var c1="";obj=c3.find("#netlist").children();$.each(obj,function(c6){var c7=$(obj[c6]);var c8=c7.attr("id");var c9=[];c9=c8.split("_");if(c1==""){c1=c1+c9[1]}else{c1=c1+","+c9[1]}});data={};data={wizard_identification_form:c2,position_next:c5,list_trustedIprange:c1};return data}function E(c3,c2,c1,c7){var c9=parseInt(c2,10);var c4="wizard.edit_net(this)";var c8="wizard.remove_net(this)";var c5={id_prefix:"item_",id:c9,click:c8,editclick:c4,name:c1};var c6=new EJS({url:"/media/tpl/list_item.ejs"}).render(c5);c3.find("#netlist").append(c6);utils.set_alt_css("#netlist")}function bt(c4){var c3=$(c4);var c5=c3.parent().attr("id");var c1=utils.get_itemid(c5);var c2=utils.get_parent(c3,8);c2.find("#"+c5).remove();utils.set_alt_css("#netlist");return false}function aH(){try{cl();data={type:"2"};$("#wizard_add_group").dialog({title:"Add Group",autoOpen:false,modal:false,width:350});$.get(r,data,function(c2){if(c2.status=="success"){$("#wizard_content_add_group").html("");$("#wizard_content_add_group").html(c2.form);obj_group=$("#wizard_content_add_group");obj_type=obj_group.find("#id_type");$(obj_type).val("2");$(obj_type).attr("disabled","disabled");bttsave=obj_group.find(".save_button.save");bttcancel=obj_group.find(".save_button.cancel");bttaddicon=obj_group.find(".img_add.proxynow.addicon");bttlistuser=obj_group.find(".img_folder.proxynow.foldericon");$(bttsave).click(function(){ce("add")});$(bttcancel).click(function(){cN()});$(bttaddicon).click(function(){cR()});$(bttlistuser).bind("click",function(){bn("#wizard_list_panel_user","#wizard_list_panel_content_user",cM,"0")});$("#wizard_add_group").dialog("open")}if(c2.status=="error"){bl(c2.error_info)}})}catch(c1){bl(c1.message)}}function b4(c3){try{cl();var c2={};name=$(c3).attr("value");c2={name:name};$("#wizard_add_group").dialog({title:"Edit Group",autoOpen:false,modal:false,width:350});$.post(cV,c2,function(c4){if(c4.status=="success"){obj_group=$("#wizard_content_add_group");$("#wizard_content_add_group").html("");$("#wizard_content_add_group").html(c4.form);obj_members=$(obj_group).find("#members");bttaddicon=obj_group.find(".img_add.proxynow.addicon");bttsave=obj_group.find(".save_button.save");bttcancel=obj_group.find(".save_button.cancel");bttlistuser=obj_group.find(".img_folder.proxynow.foldericon");choosetype=obj_group.find("#id_type").children();$($(choosetype).get(0)).remove();$(obj_group.find("#id_name")).attr("readonly","true");$(obj_members).append(c4.members);$(bttaddicon).click(function(){cR()});$(bttsave).click(function(){ce("edit")});$(bttcancel).click(function(){cN()});$(bttlistuser).bind("click",function(){bn("#wizard_list_panel_user","#wizard_list_panel_content_user",cM,"0")});bw();$("#wizard_add_group").dialog("open")}if(c4.status=="error"){bl(c4.error_info)}})}catch(c1){bl(c1.message)}}function cR(){try{cl();data={};data={type:1};$("#wizard_add_member").dialog({title:"Add User",autoOpen:false,modal:true,width:350});$.get(r,data,function(c2){if(c2.status=="success"){$("#wizard_content_add_member").html("");$("#wizard_content_add_member").html(c2.form);obj_user=$("#wizard_add_member");obj_type=obj_user.find("#id_type");$(obj_type).val("1");$(obj_type).attr("disabled","disabled");bttsave=obj_user.find(".save_button.save");bttcancel=obj_user.find(".save_button.cancel");$(bttsave).click(function(){cc()});$(bttcancel).click(function(){c()});$("#wizard_add_member").dialog("open")}if(c2.status=="error"){bl(c2.error_info)}})}catch(c1){bl(c1.message)}}function cN(){$("#wizard_add_group").dialog("close")}function c(){$("#wizard_add_member").dialog("close")}function cc(){try{cl();obj_user=$("#wizard_add_member");var c3=$(obj_user).find("#id_name").val();var c5=$(obj_user).find("#id_accesstype option:selected").val();var c4=$(obj_user).find("#id_displayname").val();var c2=$(obj_user).find("#id_password").val();var c7=$(obj_user).find("#id_comment").val();var c6={name:c3,accesstype:c5,displayname:c4,password:c2,comment:c7};$.post(ag,c6,function(c8){if(c8.status=="success"){obj_group=$("#wizard_content_add_group");obj_members=$(obj_group).find("#members");$(obj_members).append(c8.form);bw();$("#wizard_add_member").dialog("close")}if(c8.status=="error"){bl(c8.error_info)}})}catch(c1){bl(c1.message)}}function ce(c6){try{cl();form=$("#wizard_content_add_group");var c2=$(form.find("#id_name")).val();var c4=$(form.find("#id_accesstype option:selected")).val();var c7=$(form.find("#id_comment")).val();var c3=[];var c5="";arr=$(form.find("#members"));c3=$(arr).find("#wizard_name_user_ingroup");$.each(c3,function(c8){if(c5==""){c5=c5+$(c3[c8]).attr("value")}else{c5=c5+ah+$(c3[c8]).attr("value")}});data={name:c2,accesstype:c4,comment:c7,action:c6,members:c5};$.post(aS,data,function(c8){if(c8.status=="success"){if(c8.action=="add"){$("#wizard_content_list_group tbody").append(c8.form)}$("#wizard_add_group").dialog("close")}if(c8.status=="error"){bl(c8.error_info)}})}catch(c1){bl(c1.message)}}function aW(c1){value=$(c1).attr("value");data={name:value};$.post(bM,data,function(c2){if(c2.status=="success"){$(c1).parent().remove();bw()}})}function bL(c1,c2){data={};data.init=c2;if(c1==cM){data.type=cM}return data}function bV(){try{cl();var c7="";var c1=[];var c3=[];var c9=[];var c4;var c9=[];var c8=$("#wizard_destination_adding").attr("value");var c6=$("#wizard_search_type").val();c7="#"+c8;var c2=$("#panel_body_type div input[name=chklist]:checked");c4=$(c7);c9=$(c7).find("#wizard_name_user_ingroup");$.each(c9,function(db){var da=$(c9[db]).attr("value");c1.push(da)});$.each(c2,function(dc){var de=c2[dc];var db=$(de).attr("value");var dd=$(de).attr("classify");css=bC(dd);var da=-1;da=$.inArray(db,c1);if(da==-1){F("editclick",db,c7,"nothing",css,dd)}})}catch(c5){bl(c5.message)}}function bn(c5,c3,c2,c6){try{cl();var c4={};c4=bL(c2,c6);$(c5).dialog({autoOpen:false,modal:false,width:200,position:[0,0]});$.post(a8,c4,function(c7){if(c7.status=="success"){ad(c5);$(c3).html("");$(c3).html(c7.form);$(c5).dialog("open")}if(c7.status=="error"){bl(c7.error_info)}})}catch(c1){bl(c1.message)}}function aN(c6){try{var c4=(c6.keyCode?c6.keyCode:c6.which);cl();if(c4==13){var c3=$("#wizard_search_type").val();var c2=$("#wizard_search_info").val();var c5=bL(c3,"1");c5.name=c2;$.post(a8,c5,function(c7){if(c7.status=="success"){$("#panel_body_type").html("");$("#panel_body_type").html(c7.form);obj_div=$("#panel_body_type div").hide();obj=$("#panel_body_type div:contains('"+c2+"')");obj.show()}if(c7.status=="error"){bl(c7.error_info)}})}}catch(c1){bl(c1.message)}}function aB(c3){try{cl();var c2={};name=$(c3).attr("value");trimname=$.trim(name);var c2={name:trimname};$("#wizard_list_panel_policy").dialog({autoOpen:false,modal:false,width:320,title:ac});$.post(cH,c2,function(c4){if(c4.status=="success"){$("#wizard_list_content_policy").html("");$("#wizard_list_content_policy").html(c4.form);$("#wizard_list_panel_policy").dialog("open")}if(c4.status=="error"){bl(c4.error_info)}})}catch(c1){bl(c1.message)}}function D(){if(this.checked){$(".wpprofileschd").hide()}else{$(".wpprofileschd").show()}}function bs(c3){try{cl();$("#list-panel").dialog(bZ());var c1=$(c3);var c4=$(c3).attr("value");data.id=c4;cmd=aE(c1);wpprofile.show_form_dialog(a0,data,cmd,c1);$("#dialog-add-profile").dialog(bI("edit"));$("#dialog-add-profile").dialog("open")}catch(c2){bl(c2.message)}}function cn(c6,c1){var c4=$("#wizard_list_panel_policy").dialog("isOpen");if(c4){var c3=$("#wizard_table_list_policy tbody tr td span[value='"+c6+"']");var c5=$(c3).parent();var c2=$(c5).parent();b=$(c2).children().get(1);$(b).html(c1)}}function c0(c4){try{cl();var c3={};var c2="";namegroup=$("#wizard_group_name").attr("value");obj=$("#wizard_table_list_policy input[id=wizard_check_group]:checked");$.each(obj,function(c5){if(c2==""){c2=$(obj[c5]).attr("value")}else{c2=c2+","+$(obj[c5]).attr("value")}});c3={name:namegroup,checkedpolicy:c2};$.post(cd,c3,function(c5){if(c5.status=="success"){ttt=$("#wizard_content_list_group span[id='"+namegroup+"']");$(ttt).html(c5.form)}if(c5.status=="error"){bl(c5.error_info)}})}catch(c1){bl(c1.message)}}function ab(c3){try{cl();$("#list-panel").dialog(bZ());data={};var c1=$(c3);cmd=aE(c1);z=wpprofile.show_form_dialog(a0,data,cmd,c1);$("#dialog-add-profile").dialog(bI("add"));$("#dialog-add-profile").dialog("open")}catch(c2){bl(c2.message)}}function aE(c1){var c2={self:c1,scope:"profile",level:1,prefix:"",func_save:bo,func_show_all1:bf,func_show_add1:Z,func_show_all3:bb,func_show_add3:X,func_show_all4:a9,func_show_add4:V,func_show_all5:a6,func_show_add5:U,func_show_all6:a5,func_show_add6:T,func_show_all7:a4,func_show_add7:S,func_show_all8:a3,func_show_add8:R,func_show_all9:a2,func_show_add9:Q,func_show_all10:O,func_show_add10:bp,func_save_profile:ch,func_create_profile:a1,set_items_:an,func_show_allexcept1:I,func_show_addexcept1:K,func_show_allexcept2:H};return c2}function a1(){try{cl();var c2=$("#save-form-profile_1");data=bq(c2,"","","inserttype");$.post(aM,data,function(c3){if(c3.status=="success"){$("#wizard_table_list_policy").append(c3.form);$("#dialog-add-profile").dialog("close")}if(c3.status=="error"){bl(c3.error_info)}})}catch(c1){bl(c1.message)}}function cD(c1){var c2=c1.indexOf("_");c3="";if(c2>=0){var c3=c1.substr(c2+1)}return c3}function an(c3){var de=$("#except");if(c3.find("#id_scheduleon").attr("checked")=="checked"){$(".wpprofileschd").hide()}else{$(".wpprofileschd").show()}var c8=[];var c6=[];var da=[];var dd=[];var c7=[];var db=[];var c2=[];var c1=[];var c5=[];var dc=[];var c9=[];var c4=[];var df=[];c3.find("#id_schedules > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c8)){c8.push(dg)}});c3.find("#id_allowexts > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c6)){c6.push(dg)}});c3.find("#id_blockexts > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,da)){da.push(dg)}});c3.find("#id_allowmimes > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,dd)){dd.push(dg)}});c3.find("#id_blockmimes > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c7)){c7.push(dg)}});c3.find("#id_categories > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,db)){db.push(dg)}});c3.find("#id_whitelist > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c2)){c2.push(dg)}});c3.find("#id_blacklist > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c1)){c1.push(dg)}});c3.find("#id_contents > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,c5)){c5.push(dg)}});de.find("#id_exceptnets > div").each(function(){var dh=$(this).attr("id");var dg=utils.get_itemid(dh);if(!utils.item_exist(dg,dc)){dc.push(dg)}});de.find("#id_excepturls > div").each(function(){var dg=$(this).find(".item_edit").next().html();if(!utils.item_exist(dg,c9)){c9.push(dg)}});de.find("#id_exceptusers > div").each(function(){var dh=$(this).attr("id");var dg=cD(dh);if(dh.indexOf("exceptuserint")>=0){if(!utils.item_exist(dg,c4)){c4.push(dg)}}else{if(!utils.item_exist(dg,df)){df.push(dg)}}});utils.set_data(c3.find("#id_schedules"),"schedules",c8);utils.set_data(c3.find("#id_allowexts"),"allowexts",c6);utils.set_data(c3.find("#id_blockexts"),"blockexts",da);utils.set_data(c3.find("#id_allowmimes"),"allowmimes",dd);utils.set_data(c3.find("#id_blockmimes"),"blockmimes",c7);utils.set_data(c3.find("#id_categories"),"categories",db);utils.set_data(c3.find("#id_whitelist"),"whitelist",c2);utils.set_data(c3.find("#id_blacklist"),"blacklist",c1);utils.set_data(c3.find("#id_contents"),"contents",c5);utils.set_data(de.find("#id_exceptnets"),"exceptnets",dc);utils.set_data(de.find("#id_excepturls"),"excepturls",c9);utils.set_data(de.find("#id_exceptusers"),"exceptuserinternals",c4);utils.set_data(de.find("#id_exceptusers"),"exceptuserexternals",df);utils.set_alt_css("#id_schedules");utils.set_alt_css("#id_users");utils.set_alt_css("#id_allowexts");utils.set_alt_css("#id_blockexts");utils.set_alt_css("#id_allowmimes");utils.set_alt_css("#id_blockmimes");utils.set_alt_css("#id_categories");utils.set_alt_css("#id_whitelist");utils.set_alt_css("#id_blacklist");utils.set_alt_css("#id_contents");utils.set_alt_css("#id_nets");wpprofile.set_alt_css(de,"#id_exceptnets");wpprofile.set_alt_css(de,"#id_excepturls");wpprofile.set_alt_css(de,"#id_exceptusers")}function ch(){try{cl();var c2=$("#save-form-profile_1");name=$($(c2).find("#id_name")).val();data=bq(c2,"","","updatetype");id=$(c2.find("#wpprofile_id")).attr("value");data.id=id;$.post(aM,data,function(c3){if(c3.status=="success"){$("#dialog-add-profile").dialog("close");cn(id,name)}if(c3.status=="error"){bl(c3.error_info)}})}catch(c1){bl(c1.message)}}function a4(){$("#list_body").load(wpcat.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(aI);$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){by()}});utils.bind_hover($(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function by(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpcat.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function S(){var c1=this;var c2={self:c1,scope:"cat-profile",level:2,prefix:"_1",func_save:cv,func_show_import:bo,func_show_export:bo};wpcat.init_form(c2);return false}function cv(){var c1={level:2,scope:"cat-profile",url:wpcat.save_temp_url,savetemp:"inserttemp",func_add:aR};return wpcat.save_inner_form(c1)}function aR(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_cat(c2,c3,c1,"wizard.edit_cat(this)")}function aI(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();aR(c4,c2)})}function br(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",scope:"cat-profile",url:wpcat.save_temp_url,savetemp:"updatetemp",func_update:a7,func_show_import:bo,func_show_export:bo};wpcat.init_edit_form(c4);return false}function a7(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){by()}}function R(){var c1=this;var c2={self:c1,scope:"whitelist-profile",level:2,prefix:"_1",func_save:w,func_show_import:bo,func_show_export:bo};wpwhitelist.init_form(c2);return false}function w(){var c1={level:2,scope:"whitelist-profile",url:wpwhitelist.save_temp_url,savetemp:"inserttemp",func_add:cu};return wpwhitelist.save_inner_form(c1)}function cS(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();cu(c4,c2)})}function cu(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_whitelist(c2,c3,c1,"wizard.edit_whitelist(this)")}function a3(){$("#list_body").load(wpwhitelist.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(cS);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){cK()}});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function cK(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpwhitelist.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function aL(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",scope:"whitelist-profile",savetemp:"updatetemp",url:wpwhitelist.save_temp_url,func_update:cL,func_show_import:bo,func_show_export:bo};wpwhitelist.init_edit_form(c4);return false}function cL(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){cK()}}function a2(){$("#list_body").load(wpblacklist.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(b7);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){cU()}});utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function b7(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();al(c4,c2)})}function cU(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpblacklist.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function Q(){var c1=this;var c2={self:c1,scope:"blacklist-profile",level:2,prefix:"_1",func_save:bG,func_show_import:bo,func_show_export:bo};wpblacklist.init_form(c2);return false}function bG(){var c1={level:2,scope:"blacklist-profile",url:wpblacklist.save_temp_url,savetemp:"inserttemp",func_add:al};return wpblacklist.save_inner_form(c1)}function al(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_blacklist(c2,c3,c1,"wizard.edit_blacklist(this)")}function cF(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",url:wpblacklist.save_temp_url,savetemp:"updatetemp",scope:"blacklist-profile",func_update:aY,func_show_import:bo,func_show_export:bo};wpblacklist.init_edit_form(c4);return false}function aY(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){cU()}}function bf(){$("#list_body").load(defschedule.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(k);$(obj).find("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){bz()}});utils.bind_hover($(".add_button"));$("#id_filters").hide();$(obj).find("#id_filter_text").hide();$("#list-panel").dialog("open")});return false}function bz(){var c1=$("#id_filter_text").val();$("#panel_body").load(defschedule.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function Z(){var c1=this;var c2={self:c1,scope:"schedule-profile",level:2,prefix:"_1",func_save:ca};defschedule.init_form(c2);return false}function ca(){var c1={level:2,scope:"schedule-profile",url:defschedule.save_temp_url,savetemp:"inserttemp",func_add:b6};return defschedule.save_inner_form(c1)}function k(){var c1=$("#list_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();b6(c4,c2)})}function b6(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_schedule_wizard(c2,c3,c1)}function bO(){var c1=$("#id_filter_text").val();$("#list_body").load(defschedule.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function cp(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",scope:"schedule-profile",url:defschedule.edit_temp_url,savetemp:"updatetemp",func_update:P};defschedule.init_edit_form(c4);return false}function P(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){bz()}}function bb(){$("#list_body").load(wpext.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(aj);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){bg()}});utils.bind_hover($(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function aj(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();cm(c4,c2)})}function X(){var c1=this;var c2={self:c1,scope:"allowext-profile",level:2,prefix:"_1",func_save:bF,func_show_import:bo,func_show_export:bo};wpext.init_form(c2);return false}function bF(){var c1={level:2,scope:"allowext-profile",url:wpext.save_temp_url,savetemp:"inserttemp",func_add:cm};return wpext.save_inner_form(c1)}function cm(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_allowext(c2,c3,c1,"wizard.edit_allowext(this)")}function bS(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",savetemp:"updatetemp",url:wpext.save_temp_url,scope:"allowext-profile",func_update:n,func_show_import:bo,func_show_export:bo};wpext.init_edit_form(c4);return false}function n(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){bg()}}function bg(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpext.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function a9(){$("#list_body").load(wpext.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(cs);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){aq()}});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function cs(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();bN(c4,c2)})}function V(){var c1=this;var c2={self:c1,scope:"blockext-profile",level:2,prefix:"_1",func_save:aU,func_show_import:bo,func_show_export:bo};wpext.init_form(c2);return false}function aU(){var c1={level:2,scope:"blockext-profile",url:wpext.save_temp_url,savetemp:"inserttemp",func_add:bN};return wpext.save_inner_form(c1)}function bN(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_blockext(c2,c3,c1,"wizard.edit_blockext(this)")}function bc(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",savetemp:"updatetemp",url:wpext.save_temp_url,scope:"blockext-profile",func_update:cG,func_show_import:bo,func_show_export:bo};wpext.init_edit_form(c4);return false}function cG(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){aq()}}function aq(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpext.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function O(){$("#list_body").load(wpcontent.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(ay);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){bQ()}});utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function ay(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();aP(c4,c2)})}function bp(){var c1=this;var c2={self:c1,scope:"content-profile",level:2,prefix:"_1",func_save:cI};wpcontent.init_form(c2);return false}function cI(){var c1={level:2,scope:"content-profile",url:wpcontent.save_temp_url,savetemp:"inserttemp",func_add:aP};return wpcontent.save_inner_form(c1)}function aP(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_content(c2,c3,c1,"wizard.edit_content(this)")}function bk(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",url:wpcontent.save_temp_url,savetemp:"updatetemp",scope:"content-profile",func_update:bj,func_show_import:bo,func_show_export:bo};wpcontent.init_edit_form(c4);return false}function bj(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){bQ()}}function bQ(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpcontent.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function a6(){$("#list_body").load(wpmime.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(cg);$("#id_filter_text").attr("size","26");$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){ct()}});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function cg(){var c1=$("#panel_body");$("#panel_body").find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();L(c4,c2)})}function U(){var c1=this;var c2={self:c1,scope:"allowmime-profile",level:2,prefix:"_1",func_save:aT,func_show_import:bo,func_show_export:bo};wpmime.init_form(c2);return false}function aT(){var c1={level:2,scope:"allowmime-profile",url:wpmime.save_temp_url,savetemp:"inserttemp",func_add:L};return wpmime.save_inner_form(c1)}function L(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_allowmime(c2,c3,c1,"wizard.edit_allowmime(this)")}function b5(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",scope:"allowmime-profile",savetemp:"updatetemp",url:wpmime.save_temp_url,func_update:aJ,func_show_import:bo,func_show_export:bo};wpmime.init_edit_form(c4);return false}function aJ(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){ct()}}function ct(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpmime.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function a5(){$("#list_body").load(wpmime.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(cO);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){if(event.keyCode=="13"){bJ()}});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function cO(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();b8(c4,c2)})}function T(){var c1=this;var c2={self:c1,scope:"blockmime-profile",level:2,prefix:"_1",func_save:cZ,func_show_import:bo,func_show_export:bo};wpmime.init_form(c2);return false}function cZ(){var c1={level:2,url:wpmime.save_temp_url,savetemp:"inserttemp",scope:"blockmime-profile",func_add:b8};return wpmime.save_inner_form(c1)}function b8(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_blockmime(c2,c3,c1,"wizard.edit_blockmime(this)")}function av(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",savetemp:"updatetemp",url:wpmime.save_temp_url,scope:"blockmime-profile",func_update:cz,func_show_import:bo,func_show_export:bo};wpmime.init_edit_form(c4);return false}function cz(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){bJ()}}function bJ(){var c1=$("#id_filter_text").val();$("#panel_body").load(wpmime.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function I(){$("#list_body").load(defnet.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(cb);$("#id_filter_text").keypress(function(c1){if(c1.keyCode=="13"){j()}});utils.bind_hover($(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function cb(){var c1=$("#panel_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");var c2=c3.next().html();Y(c4,c2)})}function K(){var c1=this;var c2={self:c1,scope:"exceptnet-profile",level:2,prefix:"_1",savetemp:"inserttemp",func_save:bA,func_show_all:I,func_show_add:bm};defnet.init_form_wizard(c2);return false}function bm(){self=this;form_element=$(self).parent().parent().parent().parent();idform=$(form_element).attr("id");var c3=utils.get_next_form_level(idform);var c2=utils.get_prefix(idform);var c1={};c1={self:self,level:c3,prefix:c2,scope:"exceptnet-profile",savetemp:"inserttemp",func_save:bA,func_show_add:bm,func_show_all:I};defnet.init_form(c1);return false}function bA(){var c1={level:2,url:defnet.save_temp_url,savetemp:"inserttemp",scope:"exceptnet-profile",func_add:Y};return defnet.save_inner_form(c1)}function Y(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_exceptnet_wizard(c2,c3,c1)}function cB(c5){var c3=$(c5);var c6=c3.parent().attr("id");var c2=utils.get_itemid(c6);var c1=c3;var c4={self:c1,id:c2,level:2,prefix:"_1",savetemp:"updatetemp",url:defnet.save_temp_url,scope:"exceptnet-profile",func_update:aO};defnet.init_edit_form_wizard(c4);return false}function aO(c4,c2,c1){$(c1).next().html(c2);var c3=$("#list-panel").dialog("isOpen");if(c3){j()}}function j(){var c1=$("#id_filter_text").val();$("#panel_body").load(defnet.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function H(){$("#list_body").load(defuser.list_temp.panel,null,function(){obj=$(".panel_header");$(obj).find(".add_button").click(bu);$("#id_filter_text").keypress(function(){if(event.keyCode=="13"){g()}});utils.bind_hover($(".add_button"));$("#id_filters").hide();$("#list-panel").dialog("open")});return false}function g(){var c1="?find="+$("#id_filters").val();$("#panel_body").load(defnet.list_temp.select,null,function(){obj_div=$("#panel_body div").hide();obj=$("#panel_body div:contains('"+c1+"')");obj.show()})}function bu(){var c1=$("#list_body");$(c1).find("input[name=chklist]:checked").each(function(){var c3=$(this);var c4=c3.parent().attr("id");a=$(c3).attr("value");var c2=c3.next().html();if(!l(c4)){at(c4,c2)}})}function at(c3,c1){var c2=$("#save-form-profile_1");wpprofile.add_exceptuserinternal_wizard(c2,c3,c1)}function G(c3,c1){var c2=$("#save-form-profile_1");wprofile.add_exceptuserinternal_wizard(c2,c1,c1)}function l(c2){var c1=[];var c3=$("#exceptusers");lst_id=$(c3.find("#id_exceptusers")).children();$(lst_id).each(function(){var c4=$(this).attr("id");var c5=[];c5=c4.split("_");c1.push(c5[1])});if($.inArray(c2,c1)>-1){return true}return false}function b0(c4){var c3=$(c4);ipaddress=$(c3).attr("value");var c2="https://";var c1=0;x=window.location.href;c1=x.indexOf(c2);if(c1==-1){ip="http://"+ipaddress+":31280"}else{ip="https://"+ipaddress+":31280"}window.location=ip}function bw(){obj_group=$("#wizard_content_add_group");obj_group.find("#members > div").removeClass("ui-state-default");obj_group.find("#members > div").removeClass("ui-state-hover");obj_group.find("#members > div:odd").addClass("ui-state-default");obj_group.find("#members > div:even").addClass("ui-state-hover")}function aC(){var c1=this;var c2={self:c1,scope:"allowext",level:1,prefix:"",func_save:bo,func_show_import:bo,func_show_export:bo};wpext.init_form(c2);return false}function f(){var c1=this;var c2={self:c1,scope:"blockext",level:1,prefix:"",func_save:aU,func_show_import:show_import5,func_show_export:show_export5};wpext.init_form(c2);return false}function cA(){var c1=this;var c2={self:c1,scope:"schedule",level:1,prefix:"",func_save:ca};defschedule.init_form(c2);return false}function N(){var c1=this;var c2={self:c1,scope:"net",func_save:h,func_show_all:cf,func_show_add:N,level:1,prefix:""};defnet.init_form(c2);return false}function A(){var c1=this;var c2={self:c1,scope:"net",func_show_all:bo,func_show_add:bY,level:1,prefix:"",func_save:h};defnet.init_form(c2);return false}function cr(){var c1=this;var c2={self:c1,scope:"cat",level:1,prefix:"",func_save:cv,func_show_import:bo,func_show_export:bo,url:wpcat.save_temp_url};wpcat.init_form(c2);return false}function bU(){var c1=this;var c2={self:c1,scope:"whitelist",level:1,prefix:"",func_save:bo,func_show_import:bo,func_show_export:bo};wpwhitelist.init_form(c2);return false}function bR(){var c1=this;var c2={self:c1,scope:"blacklist",level:1,prefix:"",func_save:bo,func_show_import:bo,func_show_export:bo};wpblacklist.init_form(c2);return false}function bo(){alert("aaa")}function bY(){}function F(c8,c3,c1,c6,c5,c4){var c2={click:"wizard.remove(this)",editclick:c8,css:c5,name:c3,classify:c4};var c7=new EJS({url:"/media/tpl/wizard_list_item_user.ejs"}).render(c2);$(c1).append(c7);$(c6).dialog("close")}function W(c1){$(c1).parent().remove();return false}function h(){try{var c5={};var c1="";var c3="";cl();form=$("#save-form-net_1");c5=defnet.get_data(form,0,0);var c4=c5.type;if(c4=="1"){c1="host"}if(c4=="2"){c1="dns_host"}if(c4=="3"){c1="network"}if(c4=="4"){c1="network_group"}c3=bC(c1);$.post(t,c5,function(c6){if(c6.status=="success"){F("modify -- editlink",c6.name,"#id_nets","#dialog-add-net",c3,c1)}if(c6.status=="error"){bl(c6.error_info)}})}catch(c2){bl(c2.message)}}function bC(c1){if(c1=="users"){return"proxynow usericon spaceiconlist"}if(c1=="schedules"){return"proxynow scheduleicon spaceiconlist"}if(c1=="host"){return"proxynow servericon spaceiconlist"}if(c1=="dns_host"){return"proxynow dnshosticon spaceiconlist"}if(c1=="network"){return"proxynow networkicon spaceiconlist"}if(c1=="network_group"){return"proxynow groupsicon spaceiconlist"}}function ad(c1){if(c1=="#wizard_profile_search"){$("#wizard_list_panel_content_user").html("");$("#wizard_list_panel_user").dialog("close")}if(c1=="#wizard_list_panel_user"){$("#wizard_profile_list_search").html("");$("#wizard_profile_search").dialog("close")}}function cf(){alert("show all 2")}function v(){alert("show add 2")}function ar(){drag_opt_1={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function cq(){var c1=$("#list-panel").dialog("isOpen");if(c1){$("#list-panel").dialog("close")}$("#leftcolumn").show()}return{next_form:b2,back_form:ck,skip_form:bd,import_setting_field:J,get_the_list_fields:aD,import_test:ba,close_dialog:az,open_group_adding:aH,wizard_open_edit_group:b4,wizard_delete_tempuser:aW,wizard_open_dialog_policy:aB,wizard_save_policy:c0,wizard_open_dialog_edit_policy:bs,wizard_create_profile:ab,searching_type_info:aN,adding_type_to_profile:bV,remove:W,edit_cat:br,edit_whitelist:aL,edit_blacklist:cF,edit_allowext:bS,edit_blockext:bc,edit_content:bk,edit_allowmime:b5,edit_blockmime:av,edit_exceptnet:cB,init:cQ,save_to_net:cJ,show_add1:cW,edit_net:bK,remove_net:bt,edit_schedule:cp,homepage:b0}}());var wp=(function(){var c="/wp/save/";function k(){var m=$("#id_mode").val();if(m=="2"){$("#id_authentication > option[value=1]").attr("disabled","disabled");var l=$("#id_authentication");if(l.val()=="1"){l.val(["2"])}}else{$("#id_authentication > option[value=1]").removeAttr("disabled")}}function d(){var l=f();$.post(c,l,function(m){if(m.success==1){stat.show_status(0,m.msg)}else{if(m.error==1){var n=utils.get_errors(m.errors);stat.show_status(1,n)}else{stat.show_status(1,m)}}});return false}function j(){if(this.checked){$("#id_avscansize").removeAttr("disabled")}else{$("#id_avscansize").attr("disabled","disabled")}}function f(){var m=($("#id_av").attr("checked")=="checked"?1:0);var l={av:m,avscansize:$("#id_avscansize").val(),mode:$("#id_mode").val(),authentication:$("#id_authentication").val(),safesearchon:$("#id_safesearchon").val(),id:"",save_type:""};var n=$("#id_id").val();if(n!=""){l.id=n;l.save_type="update"}return l}function h(){$("#id_av").click(j);$("#id_mode").change(k);$(".save_button.save").click(d);$(".save_button.save").css("margin-right","0");k();if($("#id_id").val()!=""){if($("#id_av").attr("checked")!="checked"){$("#id_avscansize").attr("disabled","disabled")}}utils.bind_hover($(".save_button"))}function g(){return menu.get(c,h)}return{load:g}}());var wpadvance=(function(){var K="/wpadvance/";var r={defnet_save_url:"/netroute/gateway/defnet/save/"};var c=null;var j=null;var l=null;var L=null;var d=null;var t=null;function q(){c={select:y,load:f};j={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",drag:utils.add_drag_css,stop:utils.remove_drag_css};l={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"parentip",drag:utils.add_drag_css,stop:utils.remove_drag_css};L={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};d={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};t={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000}}function u(){var N=J();$.post(K,N,function(O){if(O.success==1){stat.show_status(0,O.msg)}else{if(O.error==1){var P=utils.get_errors(O.errors);stat.show_status(1,P)}else{stat.show_status(1,O)}}});return false}function J(){var O=($("#id_cache").attr("checked")=="checked"?1:0);var P=($("#id_parent").attr("checked")=="checked"?1:0);var S=$("#id_parentip").data("parentip");var U=$("#id_parentport").val();var R=$("#id_parentusername").val();var N=$("#id_parentpassword").val();if(P==0){S=0;U=0;R="";N=""}else{if(S==null){S=""}}var Q={cache:O,parent:P,parentip:S,parentport:U,parentusername:R,parentpassword:N,id:"",save_type:""};var T=$("#id_id").val();if(T!=""){Q.id=T}return Q}function A(){var N=$("#list-panel").dialog("isOpen");if(N){$("#list-panel").dialog("close")}$("#panel_tooltip").hide();$("#leftcolumn").show()}function G(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel_custom3,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".add_button").click(h);$(".drag_zone").draggable(l);$("#id_filters").change(k);$("#id_filter_text").keyup(function(){utils.countdown_filter(k)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function k(){var P="?find="+$("#id_filters").val();var N=$("#id_filter_text").val();var O=(P=="?find=0"&&N==""?"":P+"&text="+N);$("#panel_body").load(defnet.list.select_custom3+O,null,function(){utils.set_mutual_exclusive($("input[name=chklist]"));$(".drag_zone").draggable(l);defnet.init_tooltip()})}function B(){var N=this;var O={self:N,scope:"parentip",url:r.defnet_save_url,func_save:g};m(O);return false}function m(N){N.level=1;N.prefix="";defnet.init_form(N)}function w(N){var O=defnet.get_level_data(N.self);N.level=O.level;N.prefix=O.prefix;defnet.init_form(N)}function g(){var N={level:1,scope:"parentip",func_add:v};return defnet.save_inner_form(N)}function D(P){var O=$(P);var N=O.html();var Q=O.parent().attr("id");v(Q,N)}function v(Q,N){utils.set_data($("#id_parentip"),"parentip",Q);var P={id_prefix:"parentip_",id:Q,click:"wpadvance.remove_parentip(this)",editclick:"wpadvance.edit_parentip(this)",name:N};var O=new EJS({url:"/media/tpl/list_item.ejs"}).render(P);$("#id_parentip").html(O)}function h(){$("input[name=chklist]:checked").each(function(){var O=$(this);var P=O.parent().attr("id");var N=O.next().html();v(P,N)})}function F(O){var N=$(O);var P=N.parent().attr("id");$("#id_parentip").removeData("parentip");$("#"+P).remove();return false}function n(R){var P=$(R);var S=P.parent().attr("id");var O=utils.get_itemid(S);var N=P;var Q={self:N,id:O,level:1,prefix:"",scope:"parentip",func_update:C};defnet.init_edit_form(Q);return false}function C(Q,O,N){$(N).next().html(O);var P=$("#list-panel").dialog("isOpen");if(P){k()}}function M(){var N=$("#id_parentip > div").attr("id");if(N!=null){var O=E(N);utils.set_data($("#id_parentip"),"parentip",O)}if($("#id_parent").attr("checked")=="checked"){$(".row_wpadvance_parent").show()}}function E(N){var O=N.substr(9);return parseInt(O,10)}function H(){if(this.checked){$(".row_wpadvance_parent").show()}else{$(".row_wpadvance_parent").hide()}}function y(N,O){A()}function f(N,P){var O=P.index;if(O==1){wpadvanceskip.init()}else{if(O==2){wpadvanceallow.init()}}}function I(){q();$("#wpadvance_tabs").tabs(c);$(".save_button.save").click(u);$("#parentip .img_folder").click(G);$("#parentip .img_add").click(B);$("#id_parentip").droppable({hoverClass:"ui-state-active",scope:"parentip",drop:function(N,O){var P=O.draggable;D(P)}});$("#id_parent").click(H);if($("#id_id").val()!=""){M();$("#id_parentpassword").val("**********")}$(".save_button.save").css("margin-right","0");utils.bind_hover($(".save_button"));utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",A);$("#dialog-add-parentip").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-parentip").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-skiplist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-skiplist").dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-allowport").dialog(L);$("#dialog-import-allowport").dialog(d);$("#dialog-export-allowport").dialog(t)}function p(){return menu.get("/wpadvance/",I)}return{load:p,drag_opt:j,show_add_init_helper:m,show_add_helper:w,edit_parentip:n,remove_parentip:F}}());var wpadvanceallow=(function(){var C="/wpadvanceallow/save/";var D="/wpadvanceallow/delete/";var E="/wpadvanceallow/port/save/";var f="/wpcat/import/";var j="/wpcat/export/";function w(F){if(F.keyCode=="13"){F.preventDefault();F.stopPropagation();y()}}function y(){var G=$("#id_port").val();if(G==""){return false}var F=G.split(",");q(F,G);$("#id_port").val("");return false}function q(I,H){var F="";if(I==null){return}else{if(I.length>0){if(H==""){F=I.join(",")}else{F=H}var G={data:F};$.post(C,G,function(J){if(J=="success"){h(I)}else{if(J.error==1){var M=J.fail_list;for(var L=0;L<M.length;L++){var K=$.inArray(M[L],I);if(K>=0){I.splice(K,1)}}h(I)}else{wpadvanceskip.show_dialog(2,J)}}})}}}function h(F){var K=F.length;var J=$("#wpadvanceallowlist");var I=null;var H=null;for(var G=0;G<K;G++){I={id_prefix:"port_",id:F[G],click:"wpadvanceallow.delete_port(this)",editclick:"wpadvanceallow.edit_port(this)",name:F[G]};H=new EJS({url:"/media/tpl/list_item.ejs"}).render(I);J.append(H)}utils.set_alt_css("#wpadvanceallowlist")}function p(I){var G=$(I);var J=G.parent().attr("id");var F=utils.get_itemid(J);var H={portid:F};$.post(D,H,function(K){if(K=="success"){$("#wpadvanceallowlist").find("#"+J).remove();utils.set_alt_css("#wpadvanceallowlist")}else{wpadvanceskip.show_dialog(2,K)}})}function r(J){var H=$(J);var L=H.parent().attr("id");var G=utils.get_itemid(L);var K=H.next().html();var F=H;var I={self:F,id:G,portvalue:K,level:1,prefix:"",scope:""};t(I);return false}function v(M){var I=M.level-1;var H=(M.scope==""?"":"-");var K=(M.level<1?"":"_"+M.level);var F=(I<1?"":"_"+I);var G=$("#save-portform"+H+M.scope+K);var L=G.find("#id_port").val();if($.trim(L)==""){return}var J={portid:M.id,newportid:L};$.post(E,J,function(N){if(N.success==1){$(M.self).next().html(N.port);$(M.self).parent().attr("id","port_"+N.port);utils.cancel_dialog(M.level,"#dialog-edit-allowport"+H+M.scope)}else{wpadvanceskip.show_dialog(2,N)}})}function B(){var F=this;var G={self:F,level:1,prefix:"",scope:""};n(G);return false}function d(){var F=this;var G={self:F,level:1,prefix:"",scope:""};g(G);return false}function t(J){var L=$(J.self).offset();var G=[L.left,utils.get_elm_top(L.top)];var F="_"+J.level;var I=(J.scope==""?"":"-");var K=(J.scope==""?"":"&scope="+J.scope);utils.remove_dialog("#dialog-edit-allowport"+I+J.scope+F);var H=(J.url==null?E:J.url);$("#dialog-edit-allowport"+I+J.scope+J.prefix).dialog("option","position",G);$("#dialog_edit_body-allowport"+I+J.scope+J.prefix).load(H+"?level="+J.level+K,null,function(){var M=$("#save-portform"+I+J.scope+F);M.find("#id_port").val(J.portvalue);M.find(".save_button.save").click(function(){return v(J)});M.find(".save_button.cancel").click(function(){utils.cancel_dialog(J.level,"#dialog-edit-allowport"+I+J.scope)});utils.bind_hover(M.find(".save_button"));$("#dialog-edit-allowport"+I+J.scope+J.prefix).dialog("open")})}function n(I){var K=$(I.self).offset();var G=[K.left,utils.get_elm_top(K.top)];var F="_"+I.level;var H=(I.scope==""?"":"-");var J=(I.scope==""?"":"&scope="+I.scope);$("#dialog-import-allowport"+H+I.scope+I.prefix).dialog("option","position",G);$("#dialog_import_body-allowport"+H+I.scope+I.prefix).load(f+"?level="+I.level+J,null,function(){var L=$("#import-form"+H+I.scope+F);L.find(".save_button.import").click(function(){return k(I)});L.find(".save_button.cancel").click(function(){utils.cancel_dialog(I.level,"#dialog-import-allowport"+H+I.scope)});utils.bind_hover(L.find(".save_button"));$("#dialog-import-allowport"+H+I.scope+I.prefix).dialog("open")})}function g(I){var K=$(I.self).offset();var G=[K.left,utils.get_elm_top(K.top)];var F="_"+I.level;var H=(I.scope==""?"":"-");var J=(I.scope==""?"":"&scope="+I.scope);$("#dialog-export-allowport"+H+I.scope+I.prefix).dialog("option","position",G);$("#dialog_export_body-allowport"+H+I.scope+I.prefix).load(j+"?level="+I.level+J,null,function(){var L=$("#export-form"+H+I.scope+F);L.find(".save_button.cancel").click(function(){utils.cancel_dialog(I.level,"#dialog-export-allowport"+H+I.scope)});L.find("#id_delimiter").change(l);utils.bind_hover(L.find(".save_button"));c(L);$("#dialog-export-allowport"+H+I.scope+I.prefix).dialog("open")})}function u(H){var G="\n";var F=H.find("#id_delimiter").val();if(F=="1"){G=";"}else{if(F=="2"){G=","}}return G}function c(F){m(F)}function l(){var F=utils.get_parent(this,2);m(F)}function m(H){var G=u(H);var F="";$("#wpadvanceallowlist > div").each(function(){var I=$(this).children().last().html();F+=I+G});H.find("#id_exporttext").val(F)}function k(L){var J=(L.scope==""?"":"-");var K=(L.level<1?"":"_"+L.level);var I=$("#import-form"+J+L.scope+K);var G=I.find("#id_importtext").val();var F=null;if($.trim(G)==""){return}var H=G.indexOf("\n");if(H>=0){F=G.split("\n");q(F,"");utils.cancel_dialog(L.level,"#dialog-import-allowport"+J+L.scope);return}H=G.indexOf(",");if(H>=0){F=G.split(",");q(F,"");utils.cancel_dialog(L.level,"#dialog-import-allowport"+J+L.scope);return}H=G.indexOf(";");if(H>=0){F=G.split(";");q(F,"");utils.cancel_dialog(L.level,"#dialog-import-allowport"+J+L.scope);return}F=[G];q(F,"");utils.cancel_dialog(L.level,"#dialog-import-allowport"+J+L.scope)}function A(){$("#id_port").keypress(w);$("#port_input").find(".add_button").click(y);$(".img_import").click(B);$(".img_export").click(d);utils.bind_hover($("#port_input").find(".add_button"));utils.set_alt_css("#wpadvanceallowlist")}return{init:A,edit_port:r,delete_port:p}}());var wpadvanceskip=(function(){var B="/wpadvanceskip/save/";var D="/wpadvanceskip/delete/";var g=null;function l(){g={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css}}function v(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(E);$(".drag_zone").draggable(g);$("#id_filters").change(f);$("#id_filter_text").keyup(function(){utils.countdown_filter(f)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($("#list_body").find(".add_button"));$("#list-panel").dialog("open")});return false}function f(){var H="?find="+$("#id_filters").val();var F=$("#id_filter_text").val();var G=(H=="?find=0"&&F==""?"":H+"&text="+F);$("#panel_body").load(defnet.list.select+G,null,function(){$(".drag_zone").draggable(g);defnet.init_tooltip()})}function d(J,F){var H=[J];var I=[F];var G=C(H);A(B,G,H,I,r)}function E(){var G=[];var H=[];$("input[name=chklist]:checked").each(function(){var J=$(this);var K=J.parent().attr("id");var I=J.next().html();G.push(parseInt(K,10));H.push(I)});var F=C(G);A(B,F,G,H,r)}function C(H){var F=H.join(",");var G={data:F};return G}function A(F,H,I,J,G){$.post(F,H,function(K){if(K=="success"){G(I,J)}else{if(K.error==1){var N=K.fail_list;for(var M=0;M<N.length;M++){var O=parseInt(N[M],10);var L=$.inArray(O,I);if(L>=0){I.splice(L,1);J.splice(L,1)}}G(I,J)}else{utils.show_dialog(2,K)}}})}function t(I){var G=$(I);var J=G.parent().attr("id");var F=utils.get_itemid(J);var H={id:F};u(D,H,J,"#wpadvanceskiplist")}function j(J){var H=$(J);var K=H.parent().attr("id");var G=utils.get_itemid(K);var F=H;var I={self:F,id:G,level:1,prefix:"",scope:"skiplist",func_update:p,func_show_all:k,func_show_add:w};defnet.init_edit_form(I);return false}function p(I,G,F){$(F).next().html(G);var H=$("#list-panel").dialog("isOpen");if(H){f()}}function u(F,H,I,G){$.post(F,H,function(J){if(J=="success"){$(G).find("#"+I).remove();utils.set_alt_css(G)}else{utils.show_dialog(2,J)}})}function q(H){var N=$(H);var F=N.html();var G=N.parent().attr("id");var L=parseInt(G,10);var M=[L];var I=[F];var K=M.join(",");var J={data:K};A(B,J,M,I,r)}function r(J,L){var K=J.length;var I=$("#wpadvanceskiplist");var H=null;var G=null;for(var F=0;F<K;F++){H={id_prefix:"skiplist_",id:J[F],click:"wpadvanceskip.delete_skiplist(this)",editclick:"wpadvanceskip.edit_skiplist(this)",name:L[F]};G=new EJS({url:"/media/tpl/list_item.ejs"}).render(H);I.append(G)}utils.set_alt_css("#wpadvanceskiplist")}function c(){var F={level:1,scope:"skiplist",func_add:d};return defnet.save_inner_form(F)}function k(){return h(defnet.add_members,this)}function h(H,F){var I=$("#list-panel").dialog("isOpen");if(I){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var G=utils.get_parent(F,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){H(G)});$(".drag_zone").draggable(wpadvance.drag_opt);$("#id_filters").change(m);$("#id_filter_text").keyup(function(){utils.countdown_filter(m)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function m(){var H="?find="+$("#id_filters").val();var F=$("#id_filter_text").val();var G=(H=="?find=0"&&F==""?"":H+"&text="+F);$("#panel_body").load(defnet.list.select+G,null,function(){$(".drag_zone").draggable(wpadvance.drag_opt);defnet.init_tooltip()})}function n(){var F=this;var G={self:F,scope:"skiplist",func_save:c,func_show_all:k,func_show_add:w};wpadvance.show_add_init_helper(G);return false}function w(){var F=this;var G={self:F,scope:"skiplist",func_show_all:k,func_show_add:w};wpadvance.show_add_helper(G);return false}function y(){l();var F=$("fieldset.wpadvanceskip");F.find(".img_folder").click(v);F.find(".img_add").click(n);$("#wpadvanceskiplist").droppable({hoverClass:"ui-state-active",scope:defnet.drop_scope,drop:function(G,H){var I=H.draggable;q(I)}});utils.set_alt_css("#wpadvanceskiplist")}return{init:y,edit_skiplist:j,delete_skiplist:t}}());var wpblacklist=(function(){var M="/wpblacklist/save/";var ab="/wpblacklist/delete/";var A="/wpblacklist/list/";var y={panel:"/wpblacklist/list/panel/",select:"/wpblacklist/list/select/"};var ag="/wpblacklist/save/temp/";var H={panel:"/wpblacklist/list/panel/temp/",select:"/wpblacklist/list/select/temp/"};var ah="/wpcat/url/save/";var B="/wpcat/import/";var r="/wpcat/export/";var ae=null;var Q=null;var n=null;var k=null;function V(){ae={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};Q={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};n={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};k={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function U(){V();return{popup_dialog_opt:ae,popup_dialog_edit_url_opt:Q,popup_dialog_import_opt:n,popup_dialog_export_opt:k}}function j(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-add"+an+ao.scope+aj);$("#dialog_edit_body"+an+ao.scope+ao.prefix).empty();$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?M:ao.url);$("#dialog-add"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_body"+an+ao.scope+ao.prefix).load(am+"?level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);utils.set_data(ar.find("#url_list"),"urls",[]);ar.find("#id_url").keypress(function(at){F(at,ar)});ar.find(".wpblacklist_form1 .add_button").click(function(){return I(ar)});ar.find(".save_button.save").click(ao.func_save);ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-add"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editurl"+an+ao.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+an+ao.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(U().popup_dialog_export_opt);utils.bind_hover(ar.find(".save_button,.wpblacklist_form1 .add_button"));$("#dialog-add"+an+ao.scope+ao.prefix).dialog("open")})}function m(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+an+ao.scope+aj);$("#dialog_body"+an+ao.scope+ao.prefix).empty();$("#dialog-add"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?M:ao.url);$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_edit_body"+an+ao.scope+ao.prefix).load(am+"?id="+ao.id+"&level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);ar.find("#id_url").keypress(function(at){F(at,ar)});ar.find(".wpblacklist_form1 .add_button").click(function(){return I(ar)});ar.find(".save_button.save").click(function(){return c(ao)});ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-edit"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editurl"+an+ao.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+an+ao.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(U().popup_dialog_export_opt);L(ar);utils.bind_hover(ar.find(".save_button,.wpblacklist_form1 .add_button"));$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("open")})}function Y(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-editurl"+am+an.scope+aj);var al=(an.url==null?ah:an.url);$("#dialog-editurl"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_editurl_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-urlform"+am+an.scope+aj);aq.find("#id_url").val(an.urlvalue);aq.find(".save_button.save").click(function(){return w(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-editurl"+am+an.scope)});utils.bind_hover(aq.find(".save_button"));$("#dialog-editurl"+am+an.scope+an.prefix).dialog("open")})}function ai(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-import"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_import_body"+al+am.scope+am.prefix).load(B+"?level="+am.level+an,null,function(){var ap=$("#import-form"+al+am.scope+aj);ap.find(".save_button.import").click(function(){return T(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-import"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-import"+al+am.scope+am.prefix).dialog("open")})}function E(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-export"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_export_body"+al+am.scope+am.prefix).load(r+"?level="+am.level+an,null,function(){var ap=$("#export-form"+al+am.scope+aj);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-export"+al+am.scope)});ap.find("#id_delimiter").change(J);utils.bind_hover(ap.find(".save_button"));X(am,ap);$("#dialog-export"+al+am.scope+am.prefix).dialog("open")})}function D(){$("#left_box").load(M,null,function(){var aj=$("#save-form");utils.set_data(aj.find("#url_list"),"urls",[]);$("#left_box").css("width","300px");$("#id_url").keypress(function(ak){F(ak,aj)});$(".wpblacklist_form1 .add_button").click(function(){return I(aj)});$(".save_button.save").click(u);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);utils.bind_hover($(".save_button,.form_title div.close,.wpblacklist_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function l(al){var aj=$(al.self).parent().attr("id");var ak=(al.clone==null?"":"&clone=1");$("#left_box").load(M+"?id="+aj+ak,null,function(){var am=$("#save-form");$("#left_box").css("width","300px");$("#id_url").keypress(function(an){F(an,am)});$(".wpblacklist_form1 .add_button").click(function(){return I(am)});$(".save_button.save").click(function(){if(al.clone==null){return p(aj)}else{return u()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);L(am);utils.bind_hover($(".save_button,.form_title div.close,.wpblacklist_form1 .add_button"));$("#left_box").show()})}function u(){var aj=$("#save-form");var ak=h(aj,"","");var al={url:M,data:ak,func_success:g};return list_form.save(al)}function t(){var aj=this;l({self:aj,clone:null})}function p(aj){var ak=$("#save-form");var al=h(ak,aj,"update");var am={url:M,data:al,func_success:g};return list_form.save(am)}function v(){var ao=$(this).parent();var ak=ao.attr("id");var aq=$("#id_pg").val();var aj=aq.split(",");var am=parseInt(aj[3],10);--am;var an=$("#id_display").val();var al=$("#id_query").val();var ap={id:ak,pgnum:am,pgsize:an,text:al,confirm:""};d(ap,ao)}function q(){var aj=this;l({self:aj,clone:1})}function d(ak,aj){$.post(ab,ak,function(al){if(al.hasgroups==1){$("#confirm_delete_body").html(al.msg);var an=$("#confirm-delete");an.dialog("open");an.find(".save_button.save").click(function(){ak.confirm=1;an.dialog("close");d(ak,aj)});an.find(".save_button.cancel").click(function(){an.dialog("close")});utils.bind_hover(an.find(".save_button"))}else{if(al.success==1){nav_list.set_item_msg(al.itemscount);var am=aj.parent();am.remove();delete am}else{utils.show_dialog(2,al)}}})}function S(aj){aj.url=(aj.url==null?M:aj.url);aj.func_get_data=h;aj.func_show_dialog=utils.show_dialog;return wpfilter.save(aj)}function c(ak){var an=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(an<1?"":"_"+an);var aq=$("#save-form"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var am=(ak.savetemp==null?"update":ak.savetemp);var al=h(aq,ak.id,am);al.level=ak.level;var aj=(ak.url==null?M:ak.url);$.post(aj,al,function(au){if(au.success==1){ak.func_update(au.id,au.name,ak.self);utils.cancel_dialog(ak.level,"#dialog-edit"+ar+ak.scope)}else{if(au.error==1){err=utils.get_errors(au.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,au)}}})}function X(ao,an){var am=ao.level-1;var ak=(ao.scope==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+ao.scope+aj);K(al,an)}function J(){var ao=utils.get_parent(this,2);var ap=ao.attr("id");var aq=utils.get_form_level(ap);var an=utils.get_form_scope(ap);var am=aq-1;var ak=(an==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+an+aj);K(al,ao)}function K(ao,am){var al=N(am);var aj=ao.find("#url_list").data("urls");if(aj!=null){var ak="";var ap=aj.length;for(var an=0;an<ap;an++){if($.trim(aj[an])==""){continue}if(an<ap-1){ak+=aj[an]+al}else{ak+=aj[an]}}am.find("#id_exporttext").val(ak)}}function R(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};ai(ak);return false}function O(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};E(ak);return false}function F(aj,ak){if(aj.keyCode=="13"){aj.preventDefault();aj.stopPropagation();I(ak)}}function I(al){var ak=al.find("#id_url").val();if(ak==""){return false}var aj=[ak];Z(al,aj);al.find("#id_url").val("");return false}function Z(aj,ar){var al=aj.find("#url_list");var ap=al.data("urls");var ak=0;if(ar==null){return}else{if(ar.length>0){ak=ar.length;for(var an=0;an<ak;an++){var aq=ar[an];if(aq==""){continue}if(!utils.item_exist(aq,ap)){ap.push(aq);var am={id_prefix:"url_",id:"item",click:"wpblacklist.remove_url(this)",editclick:"wpblacklist.edit_url(this)",name:aq};var ao=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.append(ao)}}utils.set_data(aj.find("#url_list"),"urls",ap);f(aj,"#url_list")}}}function ad(ao){var an=$(ao);var ak=an.next().next().html();var am=utils.get_parent(an,4);var aj=am.find("#url_list").data("urls");var al=$.inArray(ak,aj);if(al>=0){aj.splice(al,1);utils.set_data(am.find("#url_list"),"urls",aj)}an.parent().remove();f(am,"#url_list");return false}function P(am){var at=$(am);var ap=at.next().html();var aj=utils.get_parent(at,5);var aq=aj.attr("id");var au=utils.get_form_scope(aq);var ao=aj.find("#url_list").data("urls");var an=$.inArray(ap,ao);if(an>=0){var ak=C(aj);var ar=at;var al={self:ar,urlvalue:ap,level:ak.level,prefix:ak.prefix,scope:au};Y(al);return false}return false}function w(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#save-urlform"+ar+aj.scope+an);var ao=$("#save-form"+ar+aj.scope+at);var ap=aq.find("#id_url").val();if($.trim(ap)==""){return}var am=ao.find("#url_list").data("urls");var ak=$.inArray(aj.urlvalue,am);if(ak>=0){am[ak]=ap;$(aj.self).next().html(ap);utils.set_data(ao.find("#url_list"),"urls",am);utils.cancel_dialog(aj.level,"#dialog-editurl"+ar+aj.scope)}}function N(al){var ak="\n";var aj=al.find("#id_delimiter").val();if(aj=="1"){ak=";"}else{if(aj=="2"){ak=","}}return ak}function T(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(",");if(ak>=0){an=am.split(",");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(";");if(ak>=0){an=am.split(";");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function h(am,ak,al){var aj=am.find("#url_list").data("urls");var an={name:am.find("#id_name").val(),comment:am.find("#id_comment").val(),urls:aj.join("||"),id:ak,save_type:al};return an}function G(aj){var ak=utils.get_parent(aj,4);return C(ak)}function C(ak){var aj=ak.attr("id");var am=utils.get_next_form_level(aj);var al=utils.get_prefix(aj);return{level:am,prefix:al}}function L(ak){var aj=[];ak.find("#url_list > div").each(function(){var al=$(this).find(".item_edit").next().html();if(!utils.item_exist(al,aj)){aj.push(al)}});utils.set_data(ak.find("#url_list"),"urls",aj);f(ak,"#url_list")}function f(ak,aj){ak.find(aj+" > div").removeClass("ui-state-default");ak.find(aj+" > div").removeClass("ui-state-hover");ak.find(aj+" > div:odd").addClass("ui-state-default");ak.find(aj+" > div:even").addClass("ui-state-hover")}function af(){$(".list_button.edit").click(t);$(".list_button.delete").click(v);$(".list_button.clone").click(q)}function ac(){V();$("#left_box").hide();$("#id_add").click(D);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=A;nav_list.config.list_func=af;nav_list.init()}function W(){return menu.get("/wpblacklist/",ac)}return{load:W,list:y,list_temp:H,init:ac,edit_url:P,remove_url:ad,get_level_data:G,init_form:j,init_edit_form:m,init_edit_url_form:Y,init_import_form:ai,init_export_form:E,save_inner_form:S,get_ui_opt:U,save_temp_url:ag}}());var wpcat=(function(){var M="/wpcat/save/";var ab="/wpcat/delete/";var A="/wpcat/list/";var y={panel:"/wpcat/list/panel/",select:"/wpcat/list/select/"};var ag="/wpcat/save/temp/";var ah="/wpcat/url/save/";var B="/wpcat/import/";var r="/wpcat/export/";var H={panel:"/wpcat/list/panel/temp/",select:"/wpcat/list/select/temp/"};var ae=null;var Q=null;var n=null;var k=null;function V(){ae={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};Q={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};n={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};k={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function U(){V();return{popup_dialog_opt:ae,popup_dialog_edit_url_opt:Q,popup_dialog_import_opt:n,popup_dialog_export_opt:k}}function j(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-add"+am+an.scope+aj);$("#dialog_edit_body"+am+an.scope+an.prefix).empty();$("#dialog-edit"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?M:an.url);$("#dialog-add"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-form"+am+an.scope+aj);utils.set_data(aq.find("#url_list"),"urls",[]);aq.find("#id_url").keypress(function(ar){F(ar,aq)});aq.find(".wpcat_form1 .add_button").click(function(){return I(aq)});aq.find(".save_button.save").click(an.func_save);aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-add"+am+an.scope)});aq.find(".img_import").click(an.func_show_import);aq.find(".img_export").click(an.func_show_export);$("#dialog-editurl"+am+an.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+am+an.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+am+an.scope+aj).dialog(U().popup_dialog_export_opt);utils.bind_hover(aq.find(".save_button,.wpcat_form1 .add_button"));$("#dialog-add"+am+an.scope+an.prefix).dialog("open")})}function m(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+an+ao.scope+aj);$("#dialog_body"+an+ao.scope+ao.prefix).empty();$("#dialog-add"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?M:ao.url);$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_edit_body"+an+ao.scope+ao.prefix).load(am+"?id="+ao.id+"&level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);ar.find("#id_url").keypress(function(at){F(at,ar)});ar.find(".wpcat_form1 .add_button").click(function(){return I(ar)});ar.find(".save_button.save").click(function(){return c(ao)});ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-edit"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editurl"+an+ao.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+an+ao.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(U().popup_dialog_export_opt);L(ar);utils.bind_hover(ar.find(".save_button,.wpcat_form1 .add_button"));$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("open")})}function Y(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-editurl"+am+an.scope+aj);var al=(an.url==null?ah:an.url);$("#dialog-editurl"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_editurl_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-urlform"+am+an.scope+aj);aq.find("#id_url").val(an.urlvalue);aq.find(".save_button.save").click(function(){return w(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-editurl"+am+an.scope)});utils.bind_hover(aq.find(".save_button"));$("#dialog-editurl"+am+an.scope+an.prefix).dialog("open")})}function ai(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-import"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_import_body"+al+am.scope+am.prefix).load(B+"?level="+am.level+an,null,function(){var ap=$("#import-form"+al+am.scope+aj);ap.find(".save_button.import").click(function(){return T(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-import"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-import"+al+am.scope+am.prefix).dialog("open")})}function E(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-export"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_export_body"+al+am.scope+am.prefix).load(r+"?level="+am.level+an,null,function(){var ap=$("#export-form"+al+am.scope+aj);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-export"+al+am.scope)});ap.find("#id_delimiter").change(J);utils.bind_hover(ap.find(".save_button"));X(am,ap);$("#dialog-export"+al+am.scope+am.prefix).dialog("open")})}function D(){$("#left_box").load(M,null,function(){var aj=$("#save-form");utils.set_data(aj.find("#url_list"),"urls",[]);$("#left_box").css("width","300px");$("#id_url").keypress(function(ak){F(ak,aj)});$(".wpcat_form1 .add_button").click(function(){return I(aj)});$(".save_button.save").click(u);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);utils.bind_hover($(".save_button,.form_title div.close,.wpcat_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function l(al){var aj=$(al.self).parent().attr("id");var ak=(al.clone==null?"":"&clone=1");$("#left_box").load(M+"?id="+aj+ak,null,function(){var am=$("#save-form");$("#left_box").css("width","300px");$("#id_url").keypress(function(an){F(an,am)});$(".wpcat_form1 .add_button").click(function(){return I(am)});$(".save_button.save").click(function(){if(al.clone==null){return p(aj)}else{return u()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);L(am);utils.bind_hover($(".save_button,.form_title div.close,.wpcat_form1 .add_button"));$("#left_box").show()})}function u(){var aj=$("#save-form");var ak=h(aj,"","");var al={url:M,data:ak,func_success:g};return list_form.save(al)}function t(){var aj=this;l({self:aj,clone:null})}function p(aj){var ak=$("#save-form");var al=h(ak,aj,"update");var am={url:M,data:al,func_success:g};return list_form.save(am)}function v(){var ao=$(this).parent();var ak=ao.attr("id");var aq=$("#id_pg").val();var aj=aq.split(",");var am=parseInt(aj[3],10);--am;var an=$("#id_display").val();var al=$("#id_query").val();var ap={id:ak,pgnum:am,pgsize:an,text:al,confirm:""};d(ap,ao)}function q(){var aj=this;l({self:aj,clone:1})}function d(ak,aj){$.post(ab,ak,function(al){if(al.hasgroups==1){$("#confirm_delete_body").html(al.msg);var an=$("#confirm-delete");an.dialog("open");an.find(".save_button.save").click(function(){ak.confirm=1;an.dialog("close");d(ak,aj)});an.find(".save_button.cancel").click(function(){an.dialog("close")});utils.bind_hover(an.find(".save_button"))}else{if(al.success==1){nav_list.set_item_msg(al.itemscount);var am=aj.parent();am.remove();delete am}else{utils.show_dialog(2,al)}}})}function S(aj){aj.url=(aj.url==null?M:aj.url);aj.func_get_data=h;aj.func_show_dialog=utils.show_dialog;return wpfilter.save(aj)}function c(ak){var an=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(an<1?"":"_"+an);var aq=$("#save-form"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var am=(ak.savetemp==null?"update":ak.savetemp);var al=h(aq,ak.id,am);al.level=ak.level;var aj=(ak.url==null?M:ak.url);$.post(aj,al,function(au){if(au.success==1){ak.func_update(au.id,au.name,ak.self);utils.cancel_dialog(ak.level,"#dialog-edit"+ar+ak.scope)}else{if(au.error==1){err=utils.get_errors(au.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,au)}}})}function X(ao,an){var am=ao.level-1;var ak=(ao.scope==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+ao.scope+aj);K(al,an)}function J(){var ao=utils.get_parent(this,2);var ap=ao.attr("id");var aq=utils.get_form_level(ap);var an=utils.get_form_scope(ap);var am=aq-1;var ak=(an==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+an+aj);K(al,ao)}function K(ao,am){var al=N(am);var aj=ao.find("#url_list").data("urls");if(aj!=null){var ak="";var ap=aj.length;for(var an=0;an<ap;an++){if($.trim(aj[an])==""){continue}if(an<ap-1){ak+=aj[an]+al}else{ak+=aj[an]}}am.find("#id_exporttext").val(ak)}}function R(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};ai(ak);return false}function O(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};E(ak);return false}function F(aj,ak){if(aj.keyCode=="13"){aj.preventDefault();aj.stopPropagation();I(ak)}}function I(al){var ak=al.find("#id_url").val();if(ak==""){return false}var aj=[ak];Z(al,aj);al.find("#id_url").val("");return false}function Z(aj,ar){var al=aj.find("#url_list");var ap=al.data("urls");var ak=0;if(ar==null){return}else{if(ar.length>0){ak=ar.length;for(var an=0;an<ak;an++){var aq=ar[an];if(aq==""){continue}if(!utils.item_exist(aq,ap)){ap.push(aq);var am={id_prefix:"url_",id:"item",click:"wpcat.remove_url(this)",editclick:"wpcat.edit_url(this)",name:aq};var ao=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.append(ao)}}utils.set_data(aj.find("#url_list"),"urls",ap);f(aj,"#url_list")}}}function ad(ao){var an=$(ao);var ak=an.next().next().html();var am=utils.get_parent(an,5);var aj=am.find("#url_list").data("urls");var al=$.inArray(ak,aj);if(al>=0){aj.splice(al,1);utils.set_data(am.find("#url_list"),"urls",aj)}an.parent().remove();f(am,"#url_list");return false}function P(am){var at=$(am);var ap=at.next().html();var aj=utils.get_parent(at,5);var aq=aj.attr("id");var au=utils.get_form_scope(aq);var ao=aj.find("#url_list").data("urls");var an=$.inArray(ap,ao);if(an>=0){var ak=C(aj);var ar=at;var al={self:ar,urlvalue:ap,level:ak.level,prefix:ak.prefix,scope:au};Y(al);return false}return false}function w(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#save-urlform"+ar+aj.scope+an);var ao=$("#save-form"+ar+aj.scope+at);var ap=aq.find("#id_url").val();if($.trim(ap)==""){return}var am=ao.find("#url_list").data("urls");var ak=$.inArray(aj.urlvalue,am);if(ak>=0){am[ak]=ap;$(aj.self).next().html(ap);utils.set_data(ao.find("#url_list"),"urls",am);utils.cancel_dialog(aj.level,"#dialog-editurl"+ar+aj.scope)}}function N(al){var ak="\n";var aj=al.find("#id_delimiter").val();if(aj=="1"){ak=";"}else{if(aj=="2"){ak=","}}return ak}function T(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(",");if(ak>=0){an=am.split(",");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(";");if(ak>=0){an=am.split(";");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function h(am,ak,al){var aj=am.find("#url_list").data("urls");var an={name:am.find("#id_name").val(),type:"2",comment:am.find("#id_comment").val(),urls:aj.join("||"),id:ak,save_type:al};return an}function G(aj){var ak=utils.get_parent(aj,4);return C(ak)}function C(ak){var aj=ak.attr("id");var am=utils.get_next_form_level(aj);var al=utils.get_prefix(aj);return{level:am,prefix:al}}function L(ak){var aj=[];ak.find("#url_list > div").each(function(){var al=$(this).find(".item_edit").next().html();if(!utils.item_exist(al,aj)){aj.push(al)}});utils.set_data(ak.find("#url_list"),"urls",aj);f(ak,"#url_list")}function f(ak,aj){ak.find(aj+" > div").removeClass("ui-state-default");ak.find(aj+" > div").removeClass("ui-state-hover");ak.find(aj+" > div:odd").addClass("ui-state-default");ak.find(aj+" > div:even").addClass("ui-state-hover")}function af(){$(".list_button.edit").click(t);$(".list_button.delete").click(v);$(".list_button.clone").click(q)}function ac(){V();$("#left_box").hide();$("#id_add").click(D);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=A;nav_list.config.list_func=af;nav_list.init()}function W(){return menu.get("/wpcat/",ac)}return{load:W,list:y,list_temp:H,init:ac,edit_url:P,remove_url:ad,get_level_data:G,init_form:j,init_edit_form:m,init_edit_url_form:Y,init_import_form:ai,init_export_form:E,save_inner_form:S,get_ui_opt:U,save_temp_url:ag}}());var wpcontent=(function(){var N="/wpcontent/save/";var W="/wpcontent/delete/";var D="/wpcontent/list/";var C={panel:"/wpcontent/list/panel/",select:"/wpcontent/list/select/"};var ae="/wpcontent/save/temp/";var K={panel:"/wpcontent/list/panel/temp/",select:"/wpcontent/list/select/temp/"};var F="/wpcontent/content/save/";var E="/wpcat/import/";var u="/wpcontent/export/";var ac=null;var af=null;var p=null;var k=null;function T(){ac={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};af={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};p={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};k={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function S(){T();return{popup_dialog_opt:ac,popup_dialog_edit_content_opt:af,popup_dialog_import_opt:p,popup_dialog_export_opt:k}}function j(am){var ao=$(am.self).offset();var aj=[ao.left,utils.get_elm_top(ao.top)];var ai="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);utils.remove_dialog("#dialog-add"+al+am.scope+ai);$("#dialog_edit_body"+al+am.scope+am.prefix).empty();$("#dialog-edit"+al+am.scope+am.prefix).dialog("close");var ak=(am.url==null?N:am.url);$("#dialog-add"+al+am.scope+am.prefix).dialog("option","position",aj);$("#dialog_body"+al+am.scope+am.prefix).load(ak+"?level="+am.level+an,null,function(){var ap=$("#save-form"+al+am.scope+ai);utils.set_data(ap.find("#content_list"),"keywords",[]);utils.set_data(ap.find("#content_list"),"scores",[]);ap.find("#id_keyword,#id_score").keypress(function(aq){w(aq,ap)});ap.find(".wpcontent_form1 .add_button").click(function(){return B(ap)});ap.find(".save_button.save").click(am.func_save);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-add"+al+am.scope)});ap.find(".img_import").click(am.func_show_import);ap.find(".img_export").click(am.func_show_export);$("#dialog-editext"+al+am.scope+ai).dialog(S().popup_dialog_edit_content_opt);$("#dialog-import"+al+am.scope+ai).dialog(S().popup_dialog_import_opt);$("#dialog-export"+al+am.scope+ai).dialog(S().popup_dialog_export_opt);utils.bind_hover(ap.find(".save_button,.wpcontent_form1 .add_button"));$("#dialog-add"+al+am.scope+am.prefix).dialog("open")})}function n(an){var ap=$(an.self).offset();var aj=[ap.left,utils.get_elm_top(ap.top)];var ai="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);var ak=(an.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+am+an.scope+ai);$("#dialog_body"+am+an.scope+an.prefix).empty();$("#dialog-add"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?N:an.url);$("#dialog-edit"+am+an.scope+an.prefix).dialog("option","position",aj);$("#dialog_edit_body"+am+an.scope+an.prefix).load(al+"?id="+an.id+"&level="+an.level+ao+ak,null,function(){var aq=$("#save-form"+am+an.scope+ai);aq.find("#id_keyword,#id_score").keypress(function(ar){w(ar,aq)});aq.find(".wpcontent_form1 .add_button").click(function(){return B(aq)});aq.find(".save_button.save").click(function(){return c(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-edit"+am+an.scope)});aq.find(".img_import").click(an.func_show_import);aq.find(".img_export").click(an.func_show_export);$("#dialog-editcontent"+am+an.scope+ai).dialog(S().popup_dialog_edit_content_opt);$("#dialog-import"+am+an.scope+ai).dialog(S().popup_dialog_import_opt);$("#dialog-export"+am+an.scope+ai).dialog(S().popup_dialog_export_opt);M(aq);utils.bind_hover(aq.find(".save_button,.wpcontent_form1 .add_button"));$("#dialog-edit"+am+an.scope+an.prefix).dialog("open")})}function l(am){var ao=$(am.self).offset();var aj=[ao.left,utils.get_elm_top(ao.top)];var ai="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);utils.remove_dialog("#dialog-editcontent"+al+am.scope+ai);var ak=(am.url==null?F:am.url);$("#dialog-editcontent"+al+am.scope+am.prefix).dialog("option","position",aj);$("#dialog_editcontent_body"+al+am.scope+am.prefix).load(ak+"?level="+am.level+an,null,function(){var ap=$("#save-contentform"+al+am.scope+ai);ap.find("#id_keyword").val(am.keywordvalue);ap.find("#id_score").val(am.scorevalue);ap.find(".save_button.save").click(function(){return Y(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-editcontent"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-editcontent"+al+am.scope+am.prefix).dialog("open")})}function ah(al){var an=$(al.self).offset();var aj=[an.left,utils.get_elm_top(an.top)];var ai="_"+al.level;var ak=(al.scope==""?"":"-");var am=(al.scope==""?"":"&scope="+al.scope);$("#dialog-import"+ak+al.scope+al.prefix).dialog("option","position",aj);$("#dialog_import_body"+ak+al.scope+al.prefix).load(E+"?level="+al.level+am,null,function(){var ao=$("#import-form"+ak+al.scope+ai);ao.find(".save_button.import").click(function(){return R(al)});ao.find(".save_button.cancel").click(function(){utils.cancel_dialog(al.level,"#dialog-import"+ak+al.scope)});utils.bind_hover(ao.find(".save_button"));$("#dialog-import"+ak+al.scope+al.prefix).dialog("open")})}function I(al){var an=$(al.self).offset();var aj=[an.left,utils.get_elm_top(an.top)];var ai="_"+al.level;var ak=(al.scope==""?"":"-");var am=(al.scope==""?"":"&scope="+al.scope);$("#dialog-export"+ak+al.scope+al.prefix).dialog("option","position",aj);$("#dialog_export_body"+ak+al.scope+al.prefix).load(u+"?level="+al.level+am,null,function(){var ao=$("#export-form"+ak+al.scope+ai);ao.find(".save_button.cancel").click(function(){utils.cancel_dialog(al.level,"#dialog-export"+ak+al.scope)});utils.bind_hover(ao.find(".save_button"));V(al,ao);$("#dialog-export"+ak+al.scope+al.prefix).dialog("open")})}function H(){$("#left_box").load(N,null,function(){var ai=$("#save-form");utils.set_data($("#save-form").find("#content_list"),"keywords",[]);utils.set_data($("#save-form").find("#content_list"),"scores",[]);$("#left_box").css("width","300px");$("#id_keyword,#id_score").keypress(function(aj){w(aj,ai)});$(".wpcontent_form1 .add_button").click(function(){return B(ai)});$(".save_button.save").click(y);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(P);$(".img_export").click(O);$("#dialog-editcontent").dialog(af);$("#dialog-import").dialog(p);$("#dialog-export").dialog(k);utils.bind_hover($(".save_button,.form_title div.close,.wpcontent_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function m(ak){var ai=$(ak.self).parent().attr("id");var aj=(ak.clone==null?"":"&clone=1");$("#left_box").load(N+"?id="+ai+aj,null,function(){var al=$("#save-form");$("#left_box").css("width","300px");$("#id_keyword,#id_score").keypress(function(am){w(am,al)});$(".wpcontent_form1 .add_button").click(function(){return B(al)});$(".save_button.save").click(function(){if(ak.clone==null){return q(ai)}else{return y()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(P);$(".img_export").click(O);$("#dialog-editcontent").dialog(af);$("#dialog-import").dialog(p);$("#dialog-export").dialog(k);M(al);utils.bind_hover($(".save_button,.form_title div.close,.wpcontent_form1 .add_button"));$("#left_box").show()})}function y(){var ai=$("#save-form");var aj=h(ai,"","");var ak={url:N,data:aj,func_success:g};return list_form.save(ak)}function v(){var ai=this;m({self:ai,clone:null})}function q(ai){var aj=$("#save-form");var ak=h(aj,ai,"update");var al={url:N,data:ak,func_success:g};return list_form.save(al)}function A(){var an=$(this).parent();var aj=an.attr("id");var ap=$("#id_pg").val();var ai=ap.split(",");var al=parseInt(ai[3],10);--al;var am=$("#id_display").val();var ak=$("#id_query").val();var ao={id:aj,pgnum:al,pgsize:am,text:ak,confirm:""};d(ao,an)}function r(){var ai=this;m({self:ai,clone:1})}function d(aj,ai){$.post(W,aj,function(ak){if(ak.hasgroups==1){$("#confirm_delete_body").html(ak.msg);var am=$("#confirm-delete");am.dialog("open");am.find(".save_button.save").click(function(){aj.confirm=1;am.dialog("close");d(aj,ai)});am.find(".save_button.cancel").click(function(){am.dialog("close")});utils.bind_hover(am.find(".save_button"))}else{if(ak.success==1){nav_list.set_item_msg(ak.itemscount);var al=ai.parent();al.remove();delete al}else{utils.show_dialog(2,ak)}}})}function Q(ai){ai.url=(ai.url==null?N:ai.url);ai.func_get_data=h;ai.func_show_dialog=utils.show_dialog;return wpfilter.save(ai)}function c(aj){var am=aj.level-1;var aq=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var ar=(am<1?"":"_"+am);var ap=$("#save-form"+aq+aj.scope+an);var ao=$("#save-form"+aq+aj.scope+ar);var al=(aj.savetemp==null?"update":aj.savetemp);var ak=h(ap,aj.id,al);ak.level=aj.level;var ai=(aj.url==null?N:aj.url);$.post(ai,ak,function(at){if(at.success==1){aj.func_update(at.id,at.name,aj.self);utils.cancel_dialog(aj.level,"#dialog-edit"+aq+aj.scope)}else{if(at.error==1){err=utils.get_errors(at.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,at)}}})}function V(an,am){var al=an.level-1;var aj=(an.scope==""?"":"-");var ai=(al<1?"":"_"+al);var ak=$("#save-form"+aj+an.scope+ai);L(ak,am)}function L(ao,am){var ak="\n";var al=ao.find("#content_list").data("keywords");var aj=ao.find("#content_list").data("scores");if(al!=null&&aj!=null){var ai="";var ap=al.length;for(var an=0;an<ap;an++){if($.trim(al[an])==""){continue}if(an<ap-1){ai+=al[an]+","+aj[an]+ak}else{ai+=al[an]+","+aj[an]}}am.find("#id_exporttext").val(ai)}}function P(){var ak=J(this);var ai=this;var aj={self:ai,level:ak.level,prefix:ak.prefix,scope:""};ah(aj);return false}function O(){var ak=J(this);var ai=this;var aj={self:ai,level:ak.level,prefix:ak.prefix,scope:""};I(aj);return false}function w(ai,aj){if(ai.keyCode=="13"){ai.preventDefault();ai.stopPropagation();B(aj)}}function B(am){var aj=am.find("#id_keyword").val();var al=am.find("#id_score").val();if(aj==""||al==""){return false}if(!$.isNumeric(al-0)){am.find("#id_score").val("");return false}var ak=[aj];var ai=[al];Z(am,ak,ai);am.find("#id_keyword,#id_score").val("");return false}function Z(ai,aq,ap){var at=ai.find("#content_list").data("keywords");var ar=ai.find("#content_list").data("scores");var aj=0;var ak=null;if(aq==null||ap==null){return}else{if(aq.length>0){aj=aq.length;ak=ai.find("#content_list > table tbody");for(var an=0;an<aj;an++){var al=aq[an];var au=ap[an];if(al==""||au==""){continue}if(!$.isNumeric(au-0)){continue}if(!utils.item_exist(al,at)){at.push(al);ar.push(au);var am={click:"wpcontent.remove_content(this)",editclick:"wpcontent.edit_content(this)",keyword:al,score:au};var ao=new EJS({url:"/media/tpl/contentfilter_item.ejs"}).render(am);ak.append(ao)}}utils.set_data(ai.find("#content_list"),"keywords",at);utils.set_data(ai.find("#content_list"),"scores",ar);f(ai,"#content_list")}}}function t(ak){var ap=$(ak);var ai=ap.parent();var al=ai.next().next().html();var aq=ai.next().next().next().html();var aj=utils.get_parent(ap,7);var ao=aj.find("#content_list").data("keywords");var an=aj.find("#content_list").data("scores");var am=$.inArray(al,ao);if(am>=0){ao.splice(am,1);an.splice(am,1);utils.set_data(aj.find("#content_list"),"keywords",ao);utils.set_data(aj.find("#content_list"),"scores",an)}ai.parent().remove();f(aj,"#content_list");return false}function ag(ao){var au=$(ao);var ai=au.parent();var al=ai.next().html();var aw=ai.next().next().html();var aj=utils.get_parent(au,8);var ar=aj.attr("id");var av=utils.get_form_scope(ar);var aq=aj.find("#content_list").data("keywords");var ap=aj.find("#content_list").data("scores");var an=$.inArray(al,aq);if(an>=0){var ak=G(aj);var at=au;var am={self:at,keywordvalue:al,scorevalue:aw,level:ak.level,prefix:ak.prefix,scope:av};l(am);return false}return false}function Y(ai){var ak=ai.level-1;var at=(ai.scope==""?"":"-");var al=(ai.level<1?"":"_"+ai.level);var au=(ak<1?"":"_"+ak);var ar=$("#save-contentform"+at+ai.scope+al);var am=$("#save-form"+at+ai.scope+au);var aq=ar.find("#id_keyword").val();var ap=ar.find("#id_score").val();if($.trim(aq)==""||$.trim(ap)==""){return}if(!$.isNumeric(ap-0)){return}var ao=am.find("#content_list").data("keywords");var an=am.find("#content_list").data("scores");var aj=$.inArray(ai.keywordvalue,ao);if(aj>=0){ao[aj]=aq;an[aj]=ap;$(ai.self).parent().next().html(aq);$(ai.self).parent().next().next().html(ap);utils.set_data(am.find("#content_list"),"keywords",ao);utils.set_data(am.find("#content_list"),"scores",an);utils.cancel_dialog(ai.level,"#dialog-editcontent"+at+ai.scope)}}function R(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;var ai=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");ai=X(an);Z(ap,ai.keywords,ai.scores);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];ai=X(an);Z(ap,ai.keywords,ai.scores);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function X(ai){var an=ai.length;var al=[];var ak=[];for(var aj=0;aj<an;aj++){var am=ai[aj].split(",");if(am==null){continue}if(am.length!=2){continue}if($.trim(am[0])==""||$.trim(am[1])==""){continue}if(!$.isNumeric(am[1])){continue}al.push(am[0]);ak.push(am[1])}return{keywords:al,scores:ak}}function h(am,ai,aj){var al=am.find("#content_list").data("keywords");var ak=am.find("#content_list").data("scores");var an={name:am.find("#id_name").val(),comment:am.find("#id_comment").val(),keywords:al.join("||"),scores:ak.join("||"),id:ai,save_type:aj};return an}function J(ai){var aj=utils.get_parent(ai,4);return G(aj)}function G(aj){var ai=aj.attr("id");var al=utils.get_next_form_level(ai);var ak=utils.get_prefix(ai);return{level:al,prefix:ak}}function M(ak){var aj=[];var ai=[];ak.find("#content_list table tbody tr").each(function(){var an=$(this).children().next();var al=an.next().html();var am=an.next().next().html();if(!utils.item_exist(al,aj)){aj.push(al);ai.push(am)}});utils.set_data(ak.find("#content_list"),"keywords",aj);utils.set_data(ak.find("#content_list"),"scores",ai);f(ak,"#content_list")}function f(ai,aj){ai.find(aj+" > table tbody tr").removeClass("ui-state-default");ai.find(aj+" > table tbody tr").removeClass("ui-state-hover");ai.find(aj+" > table tbody tr:odd").addClass("ui-state-default");ai.find(aj+" > table tbody tr:even").addClass("ui-state-hover")}function ad(){$(".list_button.edit").click(v);$(".list_button.delete").click(A);$(".list_button.clone").click(r)}function ab(){T();$("#left_box").hide();$("#id_add").click(H);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=D;nav_list.config.list_func=ad;nav_list.init()}function U(){return menu.get("/wpcontent/",ab)}return{load:U,list:C,list_temp:K,init:ab,edit_content:ag,remove_content:t,get_level_data:J,init_form:j,init_edit_form:n,init_edit_content_form:l,init_import_form:ah,init_export_form:I,save_inner_form:Q,get_ui_opt:S,save_temp_url:ae}}());var wpext=(function(){var O="/wpext/save/";var ac="/wpext/delete/";var B="/wpext/list/";var A={panel:"/wpext/list/panel/",select:"/wpext/list/select/"};var ah="/wpext/save/temp/";var J={panel:"/wpext/list/panel/temp/",select:"/wpext/list/select/temp/"};var ad="/wpext/ext/save/";var C="/wpcat/import/";var u="/wpcat/export/";var af=null;var I=null;var q=null;var l=null;function Y(){af={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};I={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};q={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};l={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function X(){Y();return{popup_dialog_opt:af,popup_dialog_edit_ext_opt:I,popup_dialog_import_opt:q,popup_dialog_export_opt:l}}function k(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-add"+am+an.scope+aj);$("#dialog_edit_body"+am+an.scope+an.prefix).empty();$("#dialog-edit"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?O:an.url);$("#dialog-add"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-form"+am+an.scope+aj);utils.set_data(aq.find("#ext_list"),"extensions",[]);aq.find("#id_ext").keypress(function(ar){n(ar,aq)});aq.find(".wpext_form1 .add_button").click(function(){return S(aq)});aq.find(".save_button.save").click(an.func_save);aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-add"+am+an.scope)});aq.find(".img_import").click(an.func_show_import);aq.find(".img_export").click(an.func_show_export);$("#dialog-editext"+am+an.scope+aj).dialog(X().popup_dialog_edit_ext_opt);$("#dialog-import"+am+an.scope+aj).dialog(X().popup_dialog_import_opt);$("#dialog-export"+am+an.scope+aj).dialog(X().popup_dialog_export_opt);utils.bind_hover(aq.find(".save_button,.wpext_form1 .add_button"));$("#dialog-add"+am+an.scope+an.prefix).dialog("open")})}function p(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+ao.edit+an+ao.scope+aj);$("#dialog_body"+an+ao.scope+ao.prefix).empty();$("#dialog-add"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?O:ao.url);$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_edit_body"+an+ao.scope+ao.prefix).load(am+"?id="+ao.id+"&level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);ar.find("#id_ext").keypress(function(at){n(at,ar)});ar.find(".wpext_form1 .add_button").click(function(){return S(ar)});ar.find(".save_button.save").click(function(){return c(ao)});ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-edit"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editext"+an+ao.scope+aj).dialog(X().popup_dialog_edit_ext_opt);$("#dialog-import"+an+ao.scope+aj).dialog(X().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(X().popup_dialog_export_opt);N(ar);utils.bind_hover(ar.find(".save_button,.wpext_form1 .add_button"));$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("open")})}function R(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-editext"+am+an.scope+aj);var al=(an.url==null?ad:an.url);$("#dialog-editext"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_editext_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-extform"+am+an.scope+aj);aq.find("#id_ext").val(an.extvalue);aq.find(".save_button.save").click(function(){return K(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-editext"+am+an.scope)});utils.bind_hover(aq.find(".save_button"));$("#dialog-editext"+am+an.scope+an.prefix).dialog("open")})}function ai(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-import"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_import_body"+al+am.scope+am.prefix).load(C+"?level="+am.level+an,null,function(){var ap=$("#import-form"+al+am.scope+aj);ap.find(".save_button.import").click(function(){return W(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-import"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-import"+al+am.scope+am.prefix).dialog("open")})}function G(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-export"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_export_body"+al+am.scope+am.prefix).load(u+"?level="+am.level+an,null,function(){var ap=$("#export-form"+al+am.scope+aj);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-export"+al+am.scope)});ap.find("#id_delimiter").change(L);utils.bind_hover(ap.find(".save_button"));ab(am,ap);$("#dialog-export"+al+am.scope+am.prefix).dialog("open")})}function F(){$("#left_box").load(O,null,function(){var aj=$("#save-form");utils.set_data(aj.find("#ext_list"),"extensions",[]);$("#left_box").css("width","300px");$("#id_ext").keypress(function(ak){n(ak,aj)});$(".wpext_form1 .add_button").click(function(){return S(aj)});$(".save_button.save").click(w);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(U);$(".img_export").click(Q);$("#dialog-editext").dialog(I);$("#dialog-import").dialog(q);$("#dialog-export").dialog(l);utils.bind_hover($(".save_button,.form_title div.close,.wpext_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function m(al){var aj=$(al.self).parent().attr("id");var ak=(al.clone==null?"":"&clone=1");$("#left_box").load(O+"?id="+aj+ak,null,function(){var am=$("#save-form");$("#left_box").css("width","300px");$("#id_ext").keypress(function(an){n(an,am)});$(".wpext_form1 .add_button").click(function(){return S(am)});$(".save_button.save").click(function(){if(al.clone==null){return r(aj)}else{return w()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(U);$(".img_export").click(Q);$("#dialog-editext").dialog(I);$("#dialog-import").dialog(q);$("#dialog-export").dialog(l);N(am);utils.bind_hover($(".save_button,.form_title div.close,.wpext_form1 .add_button"));$("#left_box").show()})}function w(){var aj=$("#save-form");var ak=j(aj,"","");var al={url:O,data:ak,func_success:g};return list_form.save(al)}function v(){var aj=this;m({self:aj,clone:null})}function r(aj){var ak=$("#save-form");var al=j(ak,aj,"update");var am={url:O,data:al,func_success:g};return list_form.save(am)}function y(){var ao=$(this).parent();var ak=ao.attr("id");var aq=$("#id_pg").val();var aj=aq.split(",");var am=parseInt(aj[3],10);--am;var an=$("#id_display").val();var al=$("#id_query").val();var ap={id:ak,pgnum:am,pgsize:an,text:al,confirm:""};d(ap,ao)}function t(){var aj=this;m({self:aj,clone:1})}function d(ak,aj){$.post(ac,ak,function(al){if(al.hasgroups==1){$("#confirm_delete_body").html(al.msg);var an=$("#confirm-delete");an.dialog("open");an.find(".save_button.save").click(function(){ak.confirm=1;an.dialog("close");d(ak,aj)});an.find(".save_button.cancel").click(function(){an.dialog("close")});utils.bind_hover(an.find(".save_button"))}else{if(al.success==1){nav_list.set_item_msg(al.itemscount);var am=aj.parent();am.remove();delete am}else{utils.show_dialog(2,al)}}})}function V(aj){aj.url=(aj.url==null?O:aj.url);aj.func_get_data=j;aj.func_show_dialog=utils.show_dialog;return wpfilter.save(aj)}function c(ak){var an=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(an<1?"":"_"+an);var aq=$("#save-form"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var am=(ak.savetemp==null?"update":ak.savetemp);var al=j(aq,ak.id,am);al.level=ak.level;var aj=(ak.url==null?O:ak.url);$.post(aj,al,function(au){if(au.success==1){ak.func_update(au.id,au.name,ak.self);utils.cancel_dialog(ak.level,"#dialog-edit"+ar+ak.scope)}else{if(au.error==1){err=utils.get_errors(au.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,au)}}})}function ab(ao,an){var am=ao.level-1;var ak=(ao.scope==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+ao.scope+aj);M(al,an)}function L(){var ao=utils.get_parent(this,2);var ap=ao.attr("id");var aq=utils.get_form_level(ap);var an=utils.get_form_scope(ap);var am=aq-1;var ak=(an==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+an+aj);M(al,ao)}function M(ao,am){var al=P(am);var aj=ao.find("#ext_list").data("extensions");if(aj!=null){var ak="";var ap=aj.length;for(var an=0;an<ap;an++){if($.trim(aj[an])==""){continue}if(an<ap-1){ak+=aj[an]+al}else{ak+=aj[an]}}am.find("#id_exporttext").val(ak)}}function U(){var al=H(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};ai(ak);return false}function Q(){var al=H(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};G(ak);return false}function n(aj,ak){if(aj.keyCode=="13"){aj.preventDefault();aj.stopPropagation();S(ak)}}function S(al){var ak=al.find("#id_ext").val();if(ak==""){return false}var aj=[ak];h(al,aj);al.find("#id_ext").val("");return false}function h(aj,ar){var al=aj.find("#ext_list");var ap=al.data("extensions");var ak=0;if(ar==null){return}else{if(ar.length>0){ak=ar.length;for(var an=0;an<ak;an++){var aq=ar[an];if(aq==""){continue}if(!utils.item_exist(aq,ap)){ap.push(aq);var am={id_prefix:"ext_",id:"item",click:"wpext.remove_ext(this)",editclick:"wpext.edit_ext(this)",name:aq};var ao=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.append(ao)}}utils.set_data(aj.find("#ext_list"),"extensions",ap);f(aj,"#ext_list")}}}function T(ao){var an=$(ao);var ak=an.next().next().html();var am=utils.get_parent(an,4);var aj=am.find("#ext_list").data("extensions");var al=$.inArray(ak,aj);if(al>=0){aj.splice(al,1);utils.set_data(am.find("#ext_list"),"extensions",aj)}an.parent().remove();f(am,"#ext_list");return false}function E(am){var at=$(am);var ao=at.next().html();var aj=utils.get_parent(at,5);var aq=aj.attr("id");var au=utils.get_form_scope(aq);var ap=aj.find("#ext_list").data("extensions");var an=$.inArray(ao,ap);if(an>=0){var ak=D(aj);var ar=at;var al={self:ar,extvalue:ao,level:ak.level,prefix:ak.prefix,scope:au};R(al);return false}return false}function K(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#save-extform"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var an=aq.find("#id_ext").val();if($.trim(an)==""){return}var am=ap.find("#ext_list").data("extensions");var ak=$.inArray(aj.extvalue,am);if(ak>=0){am[ak]=an;$(aj.self).next().html(an);utils.set_data(ap.find("#ext_list"),"extensions",am);utils.cancel_dialog(aj.level,"#dialog-editext"+ar+aj.scope)}}function P(al){var ak="\n";var aj=al.find("#id_delimiter").val();if(aj=="1"){ak=";"}else{if(aj=="2"){ak=","}}return ak}function W(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");h(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(",");if(ak>=0){an=am.split(",");h(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(";");if(ak>=0){an=am.split(";");h(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];h(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function j(am,ak,al){var aj=am.find("#ext_list").data("extensions");var an={name:am.find("#id_name").val(),comment:am.find("#id_comment").val(),extensions:aj.join("||"),id:ak,save_type:al};return an}function H(aj){var ak=utils.get_parent(aj,4);return D(ak)}function D(ak){var aj=ak.attr("id");var am=utils.get_next_form_level(aj);var al=utils.get_prefix(aj);return{level:am,prefix:al}}function N(ak){var aj=[];ak.find("#ext_list > div").each(function(){var al=$(this).find(".item_edit").next().html();if(!utils.item_exist(al,aj)){aj.push(al)}});utils.set_data(ak.find("#ext_list"),"extensions",aj);f(ak,"#ext_list")}function f(ak,aj){ak.find(aj+" > div").removeClass("ui-state-default");ak.find(aj+" > div").removeClass("ui-state-hover");ak.find(aj+" > div:odd").addClass("ui-state-default");ak.find(aj+" > div:even").addClass("ui-state-hover")}function ag(){$(".list_button.edit").click(v);$(".list_button.delete").click(y);$(".list_button.clone").click(t)}function ae(){Y();$("#left_box").hide();$("#id_add").click(F);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=B;nav_list.config.list_func=ag;nav_list.init()}function Z(){return menu.get("/wpext/",ae)}return{load:Z,list:A,list_temp:J,init:ae,edit_ext:E,remove_ext:T,get_level_data:H,init_form:k,init_edit_form:p,init_edit_ext_form:R,init_import_form:ai,init_export_form:G,save_inner_form:V,get_ui_opt:X,save_temp_url:ah}}());var wpfilter=(function(){var d={select:c,load:g};var f=null;function c(l,m){$("#wpfilter_tabs > div[id^='wpfilter']").empty();utils.clear_dialogs()}function h(l){var p=l.level-1;var u=(l.scope==""?"":"-");var q=(l.level<1?"":"_"+l.level);var v=(p<1?"":"_"+p);var t=$("#save-form"+u+l.scope+q);var r=$("#save-form"+u+l.scope+v);var n=(l.savetemp==null?"":l.savetemp);var m=l.func_get_data(t,"",n);m.level=l.level;$.post(l.url,m,function(w){if(w.success==1){l.func_add(w.id,w.name);utils.cancel_dialog(l.level,"#dialog-add"+u+l.scope)}else{if(w.error==1){err=utils.get_errors(w.errors);l.func_show_dialog(1,err)}else{l.func_show_dialog(2,w)}}});return false}function g(l,n){var m=n.index;f[m]()}function k(){f=[wpcat.init,wpwhitelist.init,wpblacklist.init,wpext.init,wpcontent.init,wpmime.init];$("#wpfilter_tabs").tabs(d)}function j(){$("#wpfilter_tabs").tabs("destroy");$("#wpfilter_tabs").remove();return menu.get("/wpfilter/",k)}return{load:j,save:h}}());var wpmime=(function(){var O="/wpmime/save/";var Z="/wpmime/delete/";var D="/wpmime/list/";var C={panel:"/wpmime/list/panel/",select:"/wpmime/list/select/"};var ae="/wpmime/save/temp/";var K={panel:"/wpmime/list/panel/temp/",select:"/wpmime/list/select/temp/"};var v="/wpmime/mime/save/";var E="/wpcat/import/";var u="/wpcat/export/";var ac=null;var q=null;var p=null;var k=null;function V(){ac={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};q={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};p={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};k={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function U(){V();return{popup_dialog_opt:ac,popup_dialog_edit_mime_opt:q,popup_dialog_import_opt:p,popup_dialog_export_opt:k}}function j(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-add"+am+an.scope+aj);$("#dialog_edit_body"+am+an.scope+an.prefix).empty();$("#dialog-edit"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?O:an.url);$("#dialog-add"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-form"+am+an.scope+aj);utils.set_data(aq.find("#mime_list"),"mimes",[]);aq.find("#id_mime").keypress(function(ar){Y(ar,aq)});aq.find(".wpmime_form1 .add_button").click(function(){return B(aq)});aq.find(".save_button.save").click(an.func_save);aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-add"+am+an.scope)});aq.find(".img_import").click(an.func_show_import);aq.find(".img_export").click(an.func_show_export);$("#dialog-editmime"+am+an.scope+aj).dialog(U().popup_dialog_edit_mime_opt);$("#dialog-import"+am+an.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+am+an.scope+aj).dialog(U().popup_dialog_export_opt);utils.bind_hover(aq.find(".save_button,.wpmime_form1 .add_button"));$("#dialog-add"+am+an.scope+an.prefix).dialog("open")})}function n(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+an+ao.scope+aj);$("#dialog_body"+an+ao.scope+ao.prefix).empty();$("#dialog-add"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?O:ao.url);$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_edit_body"+an+ao.scope+ao.prefix).load(am+"?id="+ao.id+"&level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);ar.find("#id_mime").keypress(function(at){Y(at,ar)});ar.find(".wpmime_form1 .add_button").click(function(){return B(ar)});ar.find(".save_button.save").click(function(){return c(ao)});ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-edit"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editmime"+an+ao.scope+aj).dialog(U().popup_dialog_edit_mime_opt);$("#dialog-import"+an+ao.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(U().popup_dialog_export_opt);N(ar);utils.bind_hover(ar.find(".save_button,.wpmime_form1 .add_button"));$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("open")})}function J(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-editmime"+am+an.scope+aj);var al=(an.url==null?v:an.url);$("#dialog-editmime"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_editmime_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-mimeform"+am+an.scope+aj);aq.find("#id_mime").val(an.mimevalue);aq.find(".save_button.save").click(function(){return af(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-editmime"+am+an.scope)});utils.bind_hover(aq.find(".save_button"));$("#dialog-editmime"+am+an.scope+an.prefix).dialog("open")})}function ai(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-import"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_import_body"+al+am.scope+am.prefix).load(E+"?level="+am.level+an,null,function(){var ap=$("#import-form"+al+am.scope+aj);ap.find(".save_button.import").click(function(){return T(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-import"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-import"+al+am.scope+am.prefix).dialog("open")})}function H(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-export"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_export_body"+al+am.scope+am.prefix).load(u+"?level="+am.level+an,null,function(){var ap=$("#export-form"+al+am.scope+aj);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-export"+al+am.scope)});ap.find("#id_delimiter").change(L);utils.bind_hover(ap.find(".save_button"));X(am,ap);$("#dialog-export"+al+am.scope+am.prefix).dialog("open")})}function G(){$("#left_box").load(O,null,function(){var aj=$("#save-form");utils.set_data(aj.find("#mime_list"),"mimes",[]);$("#left_box").css("width","300px");$("#id_mime").keypress(function(ak){Y(ak,aj)});$(".wpmime_form1 .add_button").click(function(){return B(aj)});$(".save_button.save").click(y);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(Q);$("#dialog-editmime").dialog(q);$("#dialog-import").dialog(p);$("#dialog-export").dialog(k);utils.bind_hover($(".save_button,.form_title div.close,.wpmime_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function l(al){var aj=$(al.self).parent().attr("id");var ak=(al.clone==null?"":"&clone=1");$("#left_box").load(O+"?id="+aj+ak,null,function(){var am=$("#save-form");$("#left_box").css("width","300px");$("#id_mime").keypress(function(an){Y(an,am)});$(".wpmime_form1 .add_button").click(function(){return B(am)});$(".save_button.save").click(function(){if(al.clone==null){return r(aj)}else{return y()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(Q);$("#dialog-editmime").dialog(q);$("#dialog-import").dialog(p);$("#dialog-export").dialog(k);N(am);utils.bind_hover($(".save_button,.form_title div.close,.wpmime_form1 .add_button"));$("#left_box").show()})}function y(){var aj=$("#save-form");var ak=h(aj,"","");var al={url:O,data:ak,func_success:g};return list_form.save(al)}function w(){var aj=this;l({self:aj,clone:null})}function r(aj){var ak=$("#save-form");var al=h(ak,aj,"update");var am={url:O,data:al,func_success:g};return list_form.save(am)}function A(){var ao=$(this).parent();var ak=ao.attr("id");var aq=$("#id_pg").val();var aj=aq.split(",");var am=parseInt(aj[3],10);--am;var an=$("#id_display").val();var al=$("#id_query").val();var ap={id:ak,pgnum:am,pgsize:an,text:al,confirm:""};d(ap,ao)}function t(){var aj=this;l({self:aj,clone:1})}function d(ak,aj){$.post(Z,ak,function(al){if(al.hasgroups==1){$("#confirm_delete_body").html(al.msg);var an=$("#confirm-delete");an.dialog("open");an.find(".save_button.save").click(function(){ak.confirm=1;an.dialog("close");d(ak,aj)});an.find(".save_button.cancel").click(function(){an.dialog("close")});utils.bind_hover(an.find(".save_button"))}else{if(al.success==1){nav_list.set_item_msg(al.itemscount);var am=aj.parent();am.remove();delete am}else{utils.show_dialog(2,al)}}})}function S(aj){aj.url=(aj.url==null?O:aj.url);aj.func_get_data=h;aj.func_show_dialog=utils.show_dialog;return wpfilter.save(aj)}function c(aq){var an=aq.level-1;var al=(aq.scope==""?"":"-");var ap=(aq.level<1?"":"_"+aq.level);var aj=(an<1?"":"_"+an);var ak=$("#save-form"+al+aq.scope+ap);var am=$("#save-form"+al+aq.scope+aj);var ao=h(ak,aq.id,"update");ao.level=aq.level;$.post(O,ao,function(ar){if(ar.success==1){if(aq.level==1&&aq.scope!=""){aq.func_update(ar.id,ar.name,aq.self)}else{af(am,ar.id,ar.name,aq.self)}utils.cancel_dialog(aq.level,"#dialog-edit"+al+aq.scope)}else{if(ar.error==1){err=utils.get_errors(ar.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,ar)}}})}function c(ak){var an=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(an<1?"":"_"+an);var aq=$("#save-form"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var am=(ak.savetemp==null?"update":ak.savetemp);var al=h(aq,ak.id,am);al.level=ak.level;var aj=(ak.url==null?O:ak.url);$.post(aj,al,function(au){if(au.success==1){ak.func_update(au.id,au.name,ak.self);utils.cancel_dialog(ak.level,"#dialog-edit"+ar+ak.scope)}else{if(au.error==1){err=utils.get_errors(au.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,au)}}})}function X(ao,an){var am=ao.level-1;var ak=(ao.scope==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+ao.scope+aj);M(al,an)}function L(){var ao=utils.get_parent(this,2);var ap=ao.attr("id");var aq=utils.get_form_level(ap);var an=utils.get_form_scope(ap);var am=aq-1;var ak=(an==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+an+aj);M(al,ao)}function M(ao,am){var al=P(am);var aj=ao.find("#mime_list").data("mimes");if(aj!=null){var ak="";var ap=aj.length;for(var an=0;an<ap;an++){if($.trim(aj[an])==""){continue}if(an<ap-1){ak+=aj[an]+al}else{ak+=aj[an]}}am.find("#id_exporttext").val(ak)}}function R(){var al=I(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};ai(ak);return false}function Q(){var al=I(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};H(ak);return false}function Y(aj,ak){if(aj.keyCode=="13"){aj.preventDefault();aj.stopPropagation();B(ak)}}function B(al){var ak=al.find("#id_mime").val();if(ak==""){return false}var aj=[ak];ag(al,aj);al.find("#id_mime").val("");return false}function ag(aj,ar){var al=aj.find("#mime_list");var ap=al.data("mimes");var ak=0;if(ar==null){return}else{if(ar.length>0){ak=ar.length;for(var an=0;an<ak;an++){var aq=ar[an];if(aq==""){continue}if(!utils.item_exist(aq,ap)){ap.push(aq);var am={id_prefix:"mime_",id:"item",click:"wpmime.remove_mime(this)",editclick:"wpmime.edit_mime(this)",name:aq};var ao=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.append(ao)}}utils.set_data(aj.find("#mime_list"),"mimes",ap);f(aj,"#mime_list")}}}function m(ao){var an=$(ao);var ak=an.next().next().html();var am=utils.get_parent(an,4);var aj=am.find("#mime_list").data("mimes");var al=$.inArray(ak,aj);if(al>=0){aj.splice(al,1);utils.set_data(am.find("#mime_list"),"mimes",aj)}an.parent().remove();f(am,"#mime_list");return false}function ah(an){var at=$(an);var ak=at.next().html();var aj=utils.get_parent(at,5);var aq=aj.attr("id");var au=utils.get_form_scope(aq);var ap=aj.find("#mime_list").data("mimes");var ao=$.inArray(ak,ap);if(ao>=0){var al=F(aj);var ar=at;var am={self:ar,mimevalue:ak,level:al.level,prefix:al.prefix,scope:au};J(am);return false}return false}function af(ak){var am=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(am<1?"":"_"+am);var aq=$("#save-mimeform"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var aj=aq.find("#id_mime").val();if($.trim(aj)==""){return}var an=ap.find("#mime_list").data("mimes");var al=$.inArray(ak.mimevalue,an);if(al>=0){an[al]=aj;$(ak.self).next().html(aj);utils.set_data(ap.find("#mime_list"),"mimes",an);utils.cancel_dialog(ak.level,"#dialog-editmime"+ar+ak.scope)}}function P(al){var ak="\n";var aj=al.find("#id_delimiter").val();if(aj=="1"){ak=";"}else{if(aj=="2"){ak=","}}return ak}function T(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");ag(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(",");if(ak>=0){an=am.split(",");ag(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(";");if(ak>=0){an=am.split(";");ag(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];ag(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function h(am,ak,al){var aj=am.find("#mime_list").data("mimes");var an={name:am.find("#id_name").val(),comment:am.find("#id_comment").val(),mimes:aj.join("||"),id:ak,save_type:al};return an}function I(aj){var ak=utils.get_parent(aj,4);return F(ak)}function F(ak){var aj=ak.attr("id");var am=utils.get_next_form_level(aj);var al=utils.get_prefix(aj);return{level:am,prefix:al}}function N(ak){var aj=[];ak.find("#mime_list > div").each(function(){var al=$(this).find(".item_edit").next().html();if(!utils.item_exist(al,aj)){aj.push(al)}});utils.set_data(ak.find("#mime_list"),"mimes",aj);f(ak,"#mime_list")}function f(ak,aj){ak.find(aj+" > div").removeClass("ui-state-default");ak.find(aj+" > div").removeClass("ui-state-hover");ak.find(aj+" > div:odd").addClass("ui-state-default");ak.find(aj+" > div:even").addClass("ui-state-hover")}function ad(){$(".list_button.edit").click(w);$(".list_button.delete").click(A);$(".list_button.clone").click(t)}function ab(){V();$("#left_box").hide();$("#id_add").click(G);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=D;nav_list.config.list_func=ad;nav_list.init()}function W(){return menu.get("/wpmime/",ab)}return{load:W,list:C,list_temp:K,init:ab,edit_mime:ah,remove_mime:m,get_level_data:I,init_form:j,init_edit_form:n,init_edit_mime_form:J,init_import_form:ai,init_export_form:H,save_inner_form:S,get_ui_opt:U,save_temp_url:ae}}());var wpprofile=(function(){var cJ="/wpprofile/save/";var dB="/wpprofile/delete/";var at="/wpprofile/save/enable/";var ch="/wpprofile/save/location/";var bE="/wpprofile/list/";var dG="/wpcat/url/save/";var cR="/wpcat/import/";var bH="/wpcat/export/";var dy=null;var dA=null;var cU=null;var S=null;var bl=null;var bk=null;var bj=null;var bi=null;var bh=null;var bg=null;var bb=null;var a8=null;var a7=null;var W=null;var V=null;var k=null;var g=null;var a9=null;function ap(){dA={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};cU={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};S={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:false,zIndex:1000};bl={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"schedules",drag:utils.add_drag_css,stop:utils.remove_drag_css};bk={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"users",drag:utils.add_drag_css,stop:utils.remove_drag_css};bj={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"exts",drag:utils.add_drag_css,stop:utils.remove_drag_css};bi={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"exts",drag:utils.add_drag_css,stop:utils.remove_drag_css};bh={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"mimes",drag:utils.add_drag_css,stop:utils.remove_drag_css};bg={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"mimes",drag:utils.add_drag_css,stop:utils.remove_drag_css};bb={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"categories",drag:utils.add_drag_css,stop:utils.remove_drag_css};a8={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"whitelist",drag:utils.add_drag_css,stop:utils.remove_drag_css};a7={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"blacklist",drag:utils.add_drag_css,stop:utils.remove_drag_css};W={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"contentfilters",drag:utils.add_drag_css,stop:utils.remove_drag_css};V={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:defnet.drop_scope,drag:utils.add_drag_css,stop:utils.remove_drag_css};k={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"nets",drag:utils.add_drag_css,stop:utils.remove_drag_css};g={revert:true,snap:false,revertDuration:0,zIndex:1001,appendTo:"body",helper:"clone",scope:"users",drag:utils.add_drag_css,stop:utils.remove_drag_css};a9={items:"tr",start:function(dH,dI){var dJ=$(".list_table > tbody > tr > td[id]").sortable("toArray");$(".list_table").data("arrold",dJ);utils.set_data($(".list_table"),"arrold",dJ)},update:dE}}function F(){ap();return{popup_dialog_edit_except_url_opt:dA,popup_dialog_import_except_url_opt:cU,popup_dialog_export_except_url_opt:S,drag_opt_1:bl,drag_opt_2:bk,drag_opt_3:bj,drag_opt_4:bi,drag_opt_5:bh,drag_opt_6:bg,drag_opt_7:bb,drag_opt_8:a8,drag_opt_9:a7,drag_opt_10:W,drag_opt_11:V,drag_opt_except_1:k,drag_opt_except_2:g}}function H(dL){var dN=$(dL.self).offset();var dI=[dN.left,utils.get_elm_top(dN.top)];var dH="_"+dL.level;var dK=(dL.scope==""?"":"-");var dM=(dL.scope==""?"":"&scope="+dL.scope);utils.remove_dialog("#dialog-add"+dK+dL.scope+dH);$("#dialog_edit_body"+dK+dL.scope+dL.prefix).empty();$("#dialog-edit"+dK+dL.scope+dL.prefix).dialog("close");var dJ=(dL.url==null?cJ:dL.url);$("#dialog-add"+dK+dL.scope+dL.prefix).dialog("option","position",dI);$("#dialog_body"+dK+dL.scope+dL.prefix).load(dJ+"?level="+dL.level+dM,null,function(){ap();var dO=$("#save-form"+dK+dL.scope+dH);bT(dO);dO.find("#id_scheduleon").click(v);dO.find(".save_button.save").bind("click",function(){return dL.func_save});dO.find(".save_button.cancel").click(function(){utils.cancel_dialog(dL.level,"#dialog-add"+dK+dL.scope)});bI(dO,dL);dj(dK+dL.scope+dH);n(dO);dO.find("#wpprofile_tabs").tabs();dO.find("#wpprofile_filter_tabs").tabs();utils.bind_hover(dO.find("#except .add_button"));utils.bind_hover(dO.find(".save_button"));$("#dialog-edit"+dK+dL.scope+dL.prefix).dialog("close");$("#dialog-add"+dK+dL.scope+dL.prefix).dialog("open")})}function ci(dL){var dN=$(dL.self).offset();var dI=[dN.left,utils.get_elm_top(dN.top)];var dH="_"+dL.level;var dK=(dL.scope==""?"":"-");var dM=(dL.scope==""?"":"&scope="+dL.scope);utils.remove_dialog("#dialog-edit-excepturl"+dK+dL.scope+dH);var dJ=(dL.url==null?dG:dL.url);$("#dialog-edit-excepturl"+dK+dL.scope+dL.prefix).dialog("option","position",dI);$("#dialog_edit_body-excepturl"+dK+dL.scope+dL.prefix).load(dJ+"?level="+dL.level+dM,null,function(){var dO=$("#save-urlform"+dK+dL.scope+dH);dO.find("#id_url").val(dL.urlvalue);dO.find(".save_button.save").click(function(){return cM(dL)});dO.find(".save_button.cancel").click(function(){utils.cancel_dialog(dL.level,"#dialog-edit-excepturl"+dK+dL.scope)});utils.bind_hover(dO.find(".save_button"));$("#dialog-edit-excepturl"+dK+dL.scope+dL.prefix).dialog("open")})}function cO(dK){var dM=$(dK.self).offset();var dI=[dM.left,utils.get_elm_top(dM.top)];var dH="_"+dK.level;var dJ=(dK.scope==""?"":"-");var dL=(dK.scope==""?"":"&scope="+dK.scope);$("#dialog-import-excepturl"+dJ+dK.scope+dK.prefix).dialog("option","position",dI);$("#dialog_import_body-excepturl"+dJ+dK.scope+dK.prefix).load(cR+"?level="+dK.level+dL,null,function(){var dN=$("#import-form"+dJ+dK.scope+dH);dN.find(".save_button.import").click(function(){return dg(dK)});dN.find(".save_button.cancel").click(function(){utils.cancel_dialog(dK.level,"#dialog-import-excepturl"+dJ+dK.scope)});utils.bind_hover(dN.find(".save_button"));$("#dialog-import-excepturl"+dJ+dK.scope+dK.prefix).dialog("open")})}function bC(dK){var dM=$(dK.self).offset();var dI=[dM.left,utils.get_elm_top(dM.top)];var dH="_"+dK.level;var dJ=(dK.scope==""?"":"-");var dL=(dK.scope==""?"":"&scope="+dK.scope);$("#dialog-export-excepturl"+dJ+dK.scope+dK.prefix).dialog("option","position",dI);$("#dialog_export_body-excepturl"+dJ+dK.scope+dK.prefix).load(bH+"?level="+dK.level+dL,null,function(){var dN=$("#export-form"+dJ+dK.scope+dH);dN.find(".save_button.cancel").click(function(){utils.cancel_dialog(dK.level,"#dialog-export-excepturl"+dJ+dK.scope)});dN.find("#id_delimiter").change(aA);utils.bind_hover(dN.find(".save_button"));E(dK,dN);$("#dialog-export-excepturl"+dJ+dK.scope+dK.prefix).dialog("open")})}function K(){$("#left_box").load(cJ,null,function(){var dH=$("#save-form");bT(dH);$("#left_box").css("width","99%");$(".save_button.save").click(aX);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_scheduleon").click(v);az();n(dH);dj("");$("#wpprofile_tabs").tabs();$("#wpprofile_filter_tabs").tabs();utils.bind_hover($("#except .add_button"));utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()});return false}function bd(dJ,dL,dK,dH){try{$("#dialog_body-profile").load(dJ,dL,function(){try{var dM=$("#save-form-profile_1");bT(dM);$("#wpprofile_tabs").tabs();$("#wpprofile_filter_tabs").tabs();if(dL.id!=null){dM.find(".save_button.save").bind("click",function(){return dK.func_save_profile()})}else{dM.find(".save_button.save").bind("click",function(){return dK.func_create_profile()})}dK.set_items_(dM);bI(dM,dK);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);utils.bind_hover($("#except .add_button"));utils.bind_hover($(".save_button,.form_title div.close"));C("-profile_1");$("#id_scheduleon").click(v);location_parent=$("#id_location").parent();$(location_parent).hide();$("#wpprofile_tabs").tabs("remove",4);$("#wpprofile_tabs").tabs("remove",1);obb=$("#id_exceptusers");a=$(obb).find(".editicon");$(a).each(function(dO){$(this).removeClass("proxynow editicon item_edit");$(this).addClass("proxynow usericon spaceiconlist")});$($("#exceptusers").find(".img_add")).remove();$($("#excepturls").find(".img_import")).remove();$($("#excepturls").find(".img_export")).remove()}catch(dN){}})}catch(dI){}}function v(){if(this.checked){$(".wpprofileschd").hide()}else{$(".wpprofileschd").show()}}function bT(dI){utils.set_data(dI.find("#id_schedules"),"schedules",[]);utils.set_data(dI.find("#id_users"),"userinternals",[]);utils.set_data(dI.find("#id_users"),"userexternals",[]);utils.set_data(dI.find("#id_allowexts"),"allowexts",[]);utils.set_data(dI.find("#id_blockexts"),"blockexts",[]);utils.set_data(dI.find("#id_allowmimes"),"allowmimes",[]);utils.set_data(dI.find("#id_blockmimes"),"blockmimes",[]);utils.set_data(dI.find("#id_categories"),"categories",[]);utils.set_data(dI.find("#id_whitelist"),"whitelist",[]);utils.set_data(dI.find("#id_blacklist"),"blacklist",[]);utils.set_data(dI.find("#id_contents"),"contents",[]);utils.set_data(dI.find("#id_nets"),"nets",[]);var dH=$("#except");utils.set_data(dH.find("#id_exceptnets"),"exceptnets",[]);utils.set_data(dH.find("#id_excepturls"),"excepturls",[]);utils.set_data(dH.find("#id_exceptusers"),"exceptuserinternals",[]);utils.set_data(dH.find("#id_exceptusers"),"exceptuserexternals",[])}function az(){$("#schedules .img_folder").click(ao);$("#schedules .img_add").click(dz);$("#users .img_folder").click(an);$("#users .img_add").click(dx);$("#allowexts .img_folder").click(ak);$("#allowexts .img_add").click(dw);$("#blockexts .img_folder").click(ai);$("#blockexts .img_add").click(dv);$("#allowmimes .img_folder").click(ag);$("#allowmimes .img_add").click(du);$("#blockmimes .img_folder").click(af);$("#blockmimes .img_add").click(ds);$("#categories .img_folder").click(ae);$("#categories .img_add").click(dq);$("#whitelist .img_folder").click(ac);$("#whitelist .img_add").click(dp);$("#blacklist .img_folder").click(ab);$("#blacklist .img_add").click(dn);$("#contents .img_folder").click(a4);$("#contents .img_add").click(cL);$("#nets .img_folder").click(a2);$("#nets .img_add").click(cK);var dH=$("#except");dH.find("#exceptnets .img_folder").click(R);dH.find("#exceptnets .img_add").click(B);dH.find("#excepturls .img_import").click(ay);dH.find("#excepturls .img_export").click(aQ);dH.find("#exceptusers .img_folder").click(Q);dH.find("#exceptusers .img_add").click(A);dH.find("#id_url").keypress(function(dI){da(dI,$("#save-form"))});dH.find(".add_button").click(function(){return a1($("#save-form"))})}function bI(dI,dJ){dI.find("#schedules .img_folder").click(dJ.func_show_all1);dI.find("#schedules .img_add").click(dJ.func_show_add1);dI.find("#users .img_folder").click(dJ.func_show_all2);dI.find("#users .img_add").click(dJ.func_show_add2);dI.find("#allowexts .img_folder").click(dJ.func_show_all3);dI.find("#allowexts .img_add").click(dJ.func_show_add3);dI.find("#blockexts .img_folder").click(dJ.func_show_all4);dI.find("#blockexts .img_add").click(dJ.func_show_add4);dI.find("#allowmimes .img_folder").click(dJ.func_show_all5);dI.find("#allowmimes .img_add").click(dJ.func_show_add5);dI.find("#blockmimes .img_folder").click(dJ.func_show_all6);dI.find("#blockmimes .img_add").click(dJ.func_show_add6);dI.find("#categories .img_folder").click(dJ.func_show_all7);dI.find("#categories .img_add").click(dJ.func_show_add7);dI.find("#whitelist .img_folder").click(dJ.func_show_all8);dI.find("#whitelist .img_add").click(dJ.func_show_add8);dI.find("#blacklist .img_folder").click(dJ.func_show_all9);dI.find("#blacklist .img_add").click(dJ.func_show_add9);dI.find("#contents .img_folder").click(dJ.func_show_all10);dI.find("#contents .img_add").click(dJ.func_show_add10);dI.find("#nets .img_folder").click(dJ.func_show_all11);dI.find("#nets .img_add").click(dJ.func_show_add11);var dH=dI.find("#except");dH.find("#exceptnets .img_folder").click(dJ.func_show_allexcept1);dH.find("#exceptnets .img_add").click(dJ.func_show_addexcept1);dH.find("#exceptusers .img_folder").click(dJ.func_show_allexcept2);dH.find("#exceptusers .img_add").click(dJ.func_show_addexcept2);dH.find("#id_url").keypress(function(dK){w(dK,dI)});dH.find(".add_button").click(function(){return aq(dI)})}function n(dJ){var dH="ui-state-active";dJ.find("#id_schedules").droppable({hoverClass:dH,scope:"schedules",drop:function(dK,dL){var dM=dL.draggable;bp(dJ,dM)}});dJ.find("#id_users").droppable({hoverClass:dH,scope:"users",drop:function(dK,dL){var dM=dL.draggable;cv(dJ,dM)}});dJ.find("#id_allowexts").droppable({hoverClass:dH,scope:"exts",drop:function(dK,dL){var dM=dL.draggable;aN(dJ,dM)}});dJ.find("#id_blockexts").droppable({hoverClass:dH,scope:"exts",drop:function(dK,dL){var dM=dL.draggable;ad(dJ,dM)}});dJ.find("#id_allowmimes").droppable({hoverClass:dH,scope:"mimes",drop:function(dK,dL){var dM=dL.draggable;cD(dJ,dM)}});dJ.find("#id_blockmimes").droppable({hoverClass:dH,scope:"mimes",drop:function(dK,dL){var dM=dL.draggable;aH(dJ,dM)}});dJ.find("#id_categories").droppable({hoverClass:dH,scope:"categories",drop:function(dK,dL){var dM=dL.draggable;dh(dJ,dM)}});dJ.find("#id_whitelist").droppable({hoverClass:dH,scope:"whitelist",drop:function(dK,dL){var dM=dL.draggable;aZ(dJ,dM)}});dJ.find("#id_blacklist").droppable({hoverClass:dH,scope:"blacklist",drop:function(dK,dL){var dM=dL.draggable;cY(dJ,dM)}});dJ.find("#id_contents").droppable({hoverClass:dH,scope:"contentfilters",drop:function(dK,dL){var dM=dL.draggable;N(dJ,dM)}});dJ.find("#id_nets").droppable({hoverClass:dH,scope:defnet.drop_scope,drop:function(dK,dL){var dM=dL.draggable;d(dJ,dM)}});var dI=dJ.find("#except");dI.find("#id_exceptnets").droppable({hoverClass:dH,scope:defnet.drop_scope,drop:function(dK,dL){var dM=dL.draggable;cQ(dJ,dM)}});dI.find("#id_exceptusers").droppable({hoverClass:dH,scope:"users",drop:function(dK,dL){var dM=dL.draggable;cX(dJ,dM)}})}function dj(dH){$("#dialog-add-schedule"+dH).dialog(defschedule.get_ui_opt().popup_dialog_opt);$("#dialog-edit-schedule"+dH).dialog(defschedule.get_ui_opt().popup_dialog_opt);$("#dialog-add-user"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-edit-user"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-add-allowext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-edit-allowext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-add-blockext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blockext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-add-allowmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-edit-allowmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-add-blockmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blockmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-add-cat"+dH).dialog(wpcat.get_ui_opt().popup_dialog_opt);$("#dialog-edit-cat"+dH).dialog(wpcat.get_ui_opt().popup_dialog_export_opt);$("#dialog-add-whitelist"+dH).dialog(wpwhitelist.get_ui_opt().popup_dialog_opt);$("#dialog-edit-whitelist"+dH).dialog(wpwhitelist.get_ui_opt().popup_dialog_opt);$("#dialog-add-blacklist"+dH).dialog(wpblacklist.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blacklist"+dH).dialog(wpblacklist.get_ui_opt().popup_dialog_opt);$("#dialog-add-content"+dH).dialog(wpcontent.get_ui_opt().popup_dialog_opt);$("#dialog-edit-content"+dH).dialog(wpcontent.get_ui_opt().popup_dialog_opt);$("#dialog-add-net"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-net"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-exceptnet"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-exceptnet"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-exceptuser"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-edit-exceptuser"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-edit-excepturl"+dH).dialog(dA);$("#dialog-import-excepturl"+dH).dialog(cU);$("#dialog-export-excepturl"+dH).dialog(S)}function C(dH){$("#dialog-add-schedule"+dH).dialog(defschedule.get_ui_opt().popup_dialog_opt);$("#dialog-edit-schedule"+dH).dialog(defschedule.get_ui_opt().popup_dialog_opt);$("#dialog-add-user"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-edit-user"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-add-allowext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-edit-allowext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-add-blockext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blockext"+dH).dialog(wpext.get_ui_opt().popup_dialog_opt);$("#dialog-add-allowmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-edit-allowmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-add-blockmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blockmime"+dH).dialog(wpmime.get_ui_opt().popup_dialog_opt);$("#dialog-add-cat"+dH).dialog(wpcat.get_ui_opt().popup_dialog_opt);$("#dialog-edit-cat"+dH).dialog(wpcat.get_ui_opt().popup_dialog_export_opt);$("#dialog-add-whitelist"+dH).dialog(wpwhitelist.get_ui_opt().popup_dialog_opt);$("#dialog-edit-whitelist"+dH).dialog(wpwhitelist.get_ui_opt().popup_dialog_opt);$("#dialog-add-blacklist"+dH).dialog(wpblacklist.get_ui_opt().popup_dialog_opt);$("#dialog-edit-blacklist"+dH).dialog(wpblacklist.get_ui_opt().popup_dialog_opt);$("#dialog-add-content"+dH).dialog(wpcontent.get_ui_opt().popup_dialog_opt);$("#dialog-edit-content"+dH).dialog(wpcontent.get_ui_opt().popup_dialog_opt);$("#dialog-add-net"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-net"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-exceptnet"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-edit-exceptnet"+dH).dialog(defnet.get_ui_opt().popup_dialog_opt);$("#dialog-add-exceptuser"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt);$("#dialog-edit-exceptuser"+dH).dialog(defuser.get_ui_opt().popup_dialog_opt)}function aK(){utils.cancel_form();cE();nav_list.show_list()}function dm(dJ){var dH=$(dJ.self).parent().attr("id");var dI=(dJ.clone==null?"":"&clone=1");$("#left_box").load(cJ+"?id="+dH+dI,null,function(){$("#left_box").css("width","99%");$(".save_button.save").click(function(){if(dJ.clone==null){return P(dH)}else{return aX()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$("#id_scheduleon").click(v);az();n($("#save-form"));dj("");cg();$("#wpprofile_tabs").tabs();$("#wpprofile_filter_tabs").tabs();utils.bind_hover($(".save_button,.form_title div.close"));$("#left_box").show()})}function aX(){var dH=$("#save-form");var dI=bc(dH,"","");var dJ={url:cJ,data:dI,func_success:aK};return list_form.save(dJ)}function c4(){var dH=this;dm({self:dH,clone:null})}function P(dH){var dI=$("#save-form");var dJ=bc(dI,dH,"update");var dK={url:cJ,data:dJ,func_success:aK};return list_form.save(dK)}function bJ(){var dO=$(this).parent();var dP=dO.attr("id");var dH=$("#id_pg").val();var dK=dH.split(",");var dN=parseInt(dK[3],10);--dN;var dI=$("#id_display").val();var dM=$("#id_selection").val();var dL=$("#id_query").val();var dJ={id:dP,pgnum:dN,pgsize:dI,find:dM,text:dL};$.post(dB,dJ,function(dQ){if(dQ.indexOf("success")==0){nav_list.update_list()}else{utils.show_dialog(2,dQ)}})}function aT(){var dH=this;dm({self:dH,clone:1})}function cb(){var dI=$(this);var dK=utils.get_parent(this,2);var dH=dK.prev().attr("id");var dJ=null;if(dI.hasClass("sw-on")){dJ={id:dH,enable:1};$.post(at,dJ,function(dL){if(dL=="success"){dI.next().removeClass("redicon");dI.next().addClass("greyicon");dI.removeClass("greyicon");dI.addClass("greenicon")}else{utils.show_dialog(2,dL)}})}else{dJ={id:dH,enable:0};$.post(at,dJ,function(dL){if(dL=="success"){dI.prev().removeClass("greenicon");dI.prev().addClass("greyicon");dI.removeClass("greyicon");dI.addClass("redicon")}else{utils.show_dialog(2,dL)}})}return false}function dE(dP,dO){var dJ=$(".list_table > tbody > tr > td[id]").sortable("toArray");var dK=$(".list_table").data("arrold");var dI=dO.item.children().attr("id");var dN=0;for(var dM=0;dM<dJ.length;dM++){if(dJ[dM].id==dI){dN=dM+1;break}}var dH=dK[dN-1].id;var dL={id:dI,swapid:dH};$.post(ch,dL,function(dQ){if(dQ=="success"){nav_list.update_list()}else{utils.show_dialog(2,dQ)}})}function I(dK,dH){var dI=dK-1;var dJ=(dI<1?"":"_"+dI);$(dH+dJ).dialog("close")}function E(dM,dL){var dK=dM.level-1;var dI=(dM.scope==""?"":"-");var dH=(dK<1?"":"_"+dK);var dJ=$("#save-form"+dI+dM.scope+dH);aF(dJ,dL)}function aA(){var dM=utils.get_parent(this,2);var dN=dM.attr("id");var dO=utils.get_form_level(dN);var dL=utils.get_form_scope(dN);var dK=dO-1;var dI=(dL==""?"":"-");var dH=(dK<1?"":"_"+dK);var dJ=$("#save-form"+dI+dL+dH);aF(dJ,dM)}function aF(dM,dK){var dJ=cV(dK);var dH=dM.find("#except").find("#id_excepturls").data("excepturls");if(dH!=null){var dI="";var dN=dH.length;for(var dL=0;dL<dN;dL++){if($.trim(dH[dL])==""){continue}if(dL<dN-1){dI+=dH[dL]+dJ}else{dI+=dH[dL]}}dK.find("#id_exporttext").val(dI)}}function ay(){var dI=utils.get_parent(this,7);var dK=cP(dI);var dH=this;var dJ={self:dH,level:dK.level,prefix:dK.prefix,scope:""};cO(dJ);return false}function aQ(){var dI=utils.get_parent(this,7);var dK=cP(dI);var dH=this;var dJ={self:dH,level:dK.level,prefix:dK.prefix,scope:""};bC(dJ);return false}function bc(d4,dX,dY){var dU=$("#except");var dO=(d4.find("#id_scheduleon").attr("checked")?1:0);var dI=(dU.find("#id_skipauth").attr("checked")=="checked"?1:0);var d5=(dU.find("#id_skipcache").attr("checked")=="checked"?1:0);var dQ=(dU.find("#id_skipav").attr("checked")=="checked"?1:0);var d3=(dU.find("#id_skipext").attr("checked")=="checked"?1:0);var ea=(dU.find("#id_skipmime").attr("checked")=="checked"?1:0);var eh=(dU.find("#id_skipurl").attr("checked")=="checked"?1:0);var dP=(dU.find("#id_skipcontentfilter").attr("checked")=="checked"?1:0);var dH=d4.find("#id_schedules").data("schedules");var ec=d4.find("#id_users").data("userinternals");var ei=d4.find("#id_users").data("userexternals");var dN=d4.find("#id_allowexts").data("allowexts");var ee=d4.find("#id_blockexts").data("blockexts");var ed=d4.find("#id_allowmimes").data("allowmimes");var ep=d4.find("#id_blockmimes").data("blockmimes");var dV=d4.find("#id_categories").data("categories");var eb=d4.find("#id_whitelist").data("whitelist");var d6=d4.find("#id_blacklist").data("blacklist");var d7=d4.find("#id_contents").data("contents");var dT=d4.find("#id_nets").data("nets");var d1=dU.find("#id_exceptnets").data("exceptnets");var d0=dU.find("#id_excepturls").data("excepturls");var eg=dU.find("#id_exceptusers").data("exceptuserinternals");var ek=dU.find("#id_exceptusers").data("exceptuserexternals");var ef=dH.join(",");var ej=ec.join(",");var el=ei.join(",");var eo=dN.join(",");var dZ=ee.join(",");var en=ed.join(",");var dK=ep.join(",");var d2=dV.join(",");var dW=eb.join(",");var dS=d6.join(",");var dR=d7.join(",");var dM=dT.join(",");var d9=d1.join(",");var d8=d0.join("||");var dJ=eg.join(",");var dL=ek.join(",");var em={name:d4.find("#id_name").val(),location:d4.find("#id_location").val(),timequota:d4.find("#id_timequota").val(),sizequota:d4.find("#id_sizequota").val(),catdef:d4.find("#id_catdef").val(),safesearchon:d4.find("#id_safesearchon").val(),scheduleon:dO,schedules:ef,userinternals:ej,userexternals:el,allowexts:eo,blockexts:dZ,allowmimes:en,blockmimes:dK,cats:d2,whitelist:dW,blacklist:dS,contentfilters:dR,nets:dM,skipauth:dI,skipcache:d5,skipav:dQ,skipext:d3,skipmime:ea,skipurl:eh,skipcontentfilter:dP,exceptnets:d9,excepturls:d8,exceptuserinternals:dJ,exceptuserexternals:dL,id:dX,save_type:dY};return em}function cE(){var dH=$("#list-panel").dialog("isOpen");if(dH){$("#list-panel").dialog("close")}$("#leftcolumn").show()}function ao(){$("#leftcolumn").hide();$("#list_body").load(defschedule.list.panel,null,function(){$(".add_button").click(h);$(".drag_zone").draggable(bl);$("#id_filters").change(bX);$("#id_filter_text").keyup(function(){utils.countdown_filter(bX)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bX(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(defschedule.list.select+dI,null,function(){$(".drag_zone").draggable(bl)})}function an(){$("#leftcolumn").hide();$("#list_body").load("/user/list/panel/",null,function(){$(".add_button").click(dc);$(".drag_zone").draggable(bk);$("#id_filters").change(bW);$("#id_filter_text").keyup(function(){utils.countdown_filter(bW)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bW(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load("/user/list/select/"+dI,null,function(){$(".drag_zone").draggable(bk)})}function ak(){$("#leftcolumn").hide();$("#list_body").load(wpext.list.panel,null,function(){$(".add_button").click(Y);$(".drag_zone").draggable(bj);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bV)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bV(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpext.list.select+dI,null,function(){$(".drag_zone").draggable(bj)})}function ai(){$("#leftcolumn").hide();$("#list_body").load(wpext.list.panel,null,function(){$(".add_button").click(cG);$(".drag_zone").draggable(bi);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bS)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bS(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpext.list.select+dI,null,function(){$(".drag_zone").draggable(bi)})}function ag(){$("#leftcolumn").hide();$("#list_body").load(wpmime.list.panel,null,function(){$(".add_button").click(cq);$(".drag_zone").draggable(bh);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bR)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bR(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpmime.list.select+dI,null,function(){$(".drag_zone").draggable(bh)})}function af(){$("#leftcolumn").hide();$("#list_body").load(wpmime.list.panel,null,function(){$(".add_button").click(di);$(".drag_zone").draggable(bg);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bQ)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bQ(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpmime.list.select+dI,null,function(){$(".drag_zone").draggable(bg)})}function ae(){$("#leftcolumn").hide();$("#list_body").load(wpcat.list.panel,null,function(){$(".add_button").click(aB);$(".drag_zone").draggable(bb);$("#id_filters").change(bO);$("#id_filter_text").keyup(function(){utils.countdown_filter(bO)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bO(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(wpcat.list.select+dI,null,function(){$(".drag_zone").draggable(bl)})}function ac(){$("#leftcolumn").hide();$("#list_body").load(wpwhitelist.list.panel,null,function(){$(".add_button").click(dt);$(".drag_zone").draggable(a8);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bN)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bN(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpwhitelist.list.select+dI,null,function(){$(".drag_zone").draggable(a8)})}function ab(){$("#leftcolumn").hide();$("#list_body").load(wpblacklist.list.panel,null,function(){$(".add_button").click(cm);$(".drag_zone").draggable(a7);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(bM)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function bM(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpblacklist.list.select+dI,null,function(){$(".drag_zone").draggable(a7)})}function a4(){$("#leftcolumn").hide();$("#list_body").load(wpcontent.list.panel,null,function(){$(".add_button").click(aw);$(".drag_zone").draggable(W);$("#id_filter_text").attr("size","26");$("#id_filter_text").keyup(function(){utils.countdown_filter(b2)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function b2(){var dH=$("#id_filter_text").val();var dI=(dH==""?"":"?text="+dH);$("#panel_body").load(wpcontent.list.select+dI,null,function(){$(".drag_zone").draggable(W)})}function a2(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(b9);$(".drag_zone").draggable(V);$("#id_filters").change(b0);$("#id_filter_text").keyup(function(){utils.countdown_filter(b0)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function b0(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(defnet.list.select+dI,null,function(){$(".drag_zone").draggable(V);defnet.init_tooltip()})}function R(){$("#leftcolumn").hide();$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(cp);$(".drag_zone").draggable(k);$("#id_filters").change(j);$("#id_filter_text").keyup(function(){utils.countdown_filter(j)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function j(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(defnet.list.select+dI,null,function(){$(".drag_zone").draggable(k);defnet.init_tooltip()})}function Q(){$("#leftcolumn").hide();$("#list_body").load("/user/list/panel/",null,function(){$(".add_button").click(bu);$(".drag_zone").draggable(g);$("#id_filters").change(f);$("#id_filter_text").keyup(function(){utils.countdown_filter(f)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function f(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load("/user/list/select/"+dI,null,function(){$(".drag_zone").draggable(g)})}function cr(){return de(defuser.add_members,this)}function a6(){return df(defnet.add_members,this)}function c8(){return df(defnet.add_members,this)}function c7(){return de(defuser.add_members,this)}function df(dJ,dH){var dK=$("#list-panel").dialog("isOpen");if(dK){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var dI=utils.get_parent(dH,4);$("#list_body").load(defnet.list.panel,null,function(){$(".add_button").click(function(){dJ(dI)});$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);$("#id_filters").change(cs);$("#id_filter_text").keyup(function(){utils.countdown_filter(cs)});$("#id_filter_text").keydown(utils.stop_filter_timer);defnet.init_tooltip();utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function cs(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(defnet.list.select+dI,null,function(){$(".drag_zone").draggable(defnet.get_ui_opt().drag_opt);defnet.init_tooltip()})}function de(dJ,dH){var dK=$("#list-panel").dialog("isOpen");if(dK){$("#list-panel").dialog("close");return false}$("#leftcolumn").hide();var dI=utils.get_parent(dH,4);$("#list_body").load(defuser.list.panel,null,function(){$(".add_button").click(function(){dJ(dI)});$(".drag_zone").draggable(defuser.get_ui_opt().drag_opt);$("#id_filters").change(dr);$("#id_filter_text").keyup(function(){utils.countdown_filter(dr)});$("#id_filter_text").keydown(utils.stop_filter_timer);utils.bind_hover($(".add_button"));$("#list-panel").dialog("open")});return false}function dr(){var dJ="?find="+$("#id_filters").val();var dH=$("#id_filter_text").val();var dI=(dJ=="?find=0"&&dH==""?"":dJ+"&text="+dH);$("#panel_body").load(defuser.list.select+dI,null,function(){$(".drag_zone").draggable(defuser.get_ui_opt().drag_opt)})}function dz(){var dH=this;var dI={self:dH,scope:"schedule",level:1,prefix:"",func_save:co};defschedule.init_form(dI);return false}function dx(){var dH=this;var dI={self:dH,scope:"user",func_save:c1,func_show_all:cr,func_show_add:p};q(dI);return false}function dw(){var dH=this;var dI={self:dH,scope:"allowext",level:1,prefix:"",func_save:bL,func_show_import:ca,func_show_export:bA};wpext.init_form(dI);return false}function dv(){var dH=this;var dI={self:dH,scope:"blockext",level:1,prefix:"",func_save:aW,func_show_import:b8,func_show_export:bz};wpext.init_form(dI);return false}function du(){var dH=this;var dI={self:dH,scope:"allowmime",level:1,prefix:"",func_save:aV,func_show_import:b7,func_show_export:by};wpmime.init_form(dI);return false}function ds(){var dH=this;var dI={self:dH,scope:"blockmime",level:1,prefix:"",func_save:dF,func_show_import:b6,func_show_export:bx};wpmime.init_form(dI);return false}function dq(){var dH=this;var dI={self:dH,scope:"cat",level:1,prefix:"",func_save:cN,func_show_import:ce,func_show_export:bG};wpcat.init_form(dI);return false}function dp(){var dH=this;var dI={self:dH,scope:"whitelist",level:1,prefix:"",func_save:r,func_show_import:cd,func_show_export:bF};wpwhitelist.init_form(dI);return false}function dn(){var dH=this;var dI={self:dH,scope:"blacklist",level:1,prefix:"",func_save:bK,func_show_import:cc,func_show_export:bD};wpblacklist.init_form(dI);return false}function cL(){var dH=this;var dI={self:dH,scope:"content",level:1,prefix:"",func_save:c6};wpcontent.init_form(dI);return false}function cK(){var dH=this;var dI={self:dH,scope:"net",func_save:c5,func_show_all:a6,func_show_add:c};dl(dI);return false}function B(){var dH=this;var dI={self:dH,scope:"exceptnet",func_save:bB,func_show_all:c8,func_show_add:bs};dl(dI);return false}function A(){var dH=this;var dI={self:dH,scope:"exceptuser",func_save:ah,func_show_all:c7,func_show_add:bq};q(dI);return false}function p(){var dH=this;var dI={self:dH,scope:"user",func_show_all:cr,func_show_add:p};aO(dI);return false}function c(){var dH=this;var dI={self:dH,scope:"net",func_show_all:a6,func_show_add:c};cx(dI);return false}function bs(){var dH=this;var dI={self:dH,scope:"exceptnet",func_show_all:c8,func_show_add:bs};cx(dI);return false}function bq(){var dH=this;var dI={self:dH,scope:"exceptuser",func_show_all:c7,func_show_add:bq};aO(dI);return false}function aj(dJ,dK){var dM=1;var dL=$(dJ).offset();var dI=[dL.left,utils.get_elm_top(dL.top)];var dH="_"+dM;utils.remove_dialog("#dialog-add-"+dK.scope+dH);$("#dialog-add-"+dK.scope).dialog("option","position",dI);$("#dialog_body-"+dK.scope).load(dK.save_url+"?level="+dM+"&scope="+dK.scope,null,function(){var dN=$("#save-form-"+dK.scope+dH);utils.set_data(dN.find(dK.list_id),dK.key,[]);dN.find(dK.input_id).keypress(function(dO){if(dO.keyCode=="13"){dO.preventDefault();dO.stopPropagation();dK.func_add(dN)}});dN.find(dK.add_button).click(function(){return dK.func_add(dN)});dN.find(".save_button.save").click(dK.func_save);dN.find(".save_button.cancel").click(function(){I(dM,"#dialog-add-"+dK.scope)});utils.bind_hover(dN.find(dK.hover));$("#dialog-add-"+dK.scope).dialog("open")})}function dl(dH){dH.level=1;dH.prefix="";defnet.init_form(dH)}function cx(dH){var dI=defnet.get_level_data(dH.self);dH.level=dI.level;dH.prefix=dI.prefix;defnet.init_form(dH)}function q(dH){dH.level=1;dH.prefix="";defuser.init_form(dH)}function aO(dH){var dI=defuser.get_level_data(dH.self);dH.level=dI.level;dH.prefix=dI.prefix;defuser.init_form(dH)}function co(){var dH={level:1,scope:"schedule",func_add:ck};return defschedule.save_inner_form(dH)}function c1(){var dH={level:1,scope:"user",func_add:O};return defuser.save_inner_form(dH)}function bL(){var dH={level:1,scope:"allowext",func_add:L};return wpext.save_inner_form(dH)}function aW(){var dH={level:1,scope:"blockext",func_add:aJ};return wpext.save_inner_form(dH)}function aV(){var dH={level:1,scope:"allowmime",func_add:bZ};return wpmime.save_inner_form(dH)}function dF(){var dH={level:1,scope:"blockmime",func_add:aC};return wpmime.save_inner_form(dH)}function cN(){var dH={level:1,scope:"cat",func_add:dD};return wpcat.save_inner_form(dH)}function r(){var dH={level:1,scope:"whitelist",func_add:au};return wpwhitelist.save_inner_form(dH)}function bK(){var dH={level:1,scope:"blacklist",func_add:J};return wpblacklist.save_inner_form(dH)}function c6(){var dH={level:1,scope:"content",func_add:ct};return wpcontent.save_inner_form(dH)}function c5(){var dH={level:1,scope:"net",func_add:cu};return defnet.save_inner_form(dH)}function bB(){var dH={level:1,scope:"exceptnet",func_add:aM};return defnet.save_inner_form(dH)}function ah(){var dH={level:1,scope:"exceptuser",func_add:ar};return defuser.save_inner_form(dH)}function bp(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");c9(dJ,dL,dH)}function c9(dL,dN,dI){var dJ=parseInt(dN,10);var dH=dL.find("#id_schedules").data("schedules");if(!utils.item_exist(dJ,dH)){dH.push(dJ);utils.set_data(dL.find("#id_schedules"),"id_schedules",dH);var dM={id_prefix:"schedule_",id:dJ,click:"wpprofile.remove_schedule(this)",editclick:"wpprofile.edit_schedule(this)",name:dI};var dK=new EJS({url:"/media/tpl/list_item.ejs"}).render(dM);dL.find("#id_schedules").append(dK)}cH(dL,"#id_schedules")}function bt(dL,dN,dI){var dJ=parseInt(dN,10);var dH=dL.find("#id_schedules").data("schedules");if(!utils.item_exist(dJ,dH)){dH.push(dJ);utils.set_data(dL.find("#id_schedules"),"id_schedules",dH);var dM={id_prefix:"schedule_",id:dJ,click:"wpprofile.remove_schedule(this)",editclick:"wizard.edit_schedule(this)",name:dI};var dK=new EJS({url:"/media/tpl/list_item.ejs"}).render(dM);dL.find("#id_schedules").append(dK)}cH(dL,"#id_schedules")}function ck(dI,dH){c9($("#save-form"),dI,dH)}function cv(dK,dL){var dJ=$(dL);var dH=dJ.html();var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);if(dM.indexOf("userint")>=0){b1(dK,dI,dH)}else{T(dK,dI,dH)}}function b1(dK,dM,dI){var dH=dK.find("#id_users").data("userinternals");if(!utils.item_exist(dM,dH)){dH.push(dM);utils.set_data(dK.find("#id_users"),"userinternals",dH);var dL={id_prefix:"userint_",id:dM,click:"wpprofile.remove_userinternal(this)",editclick:"wpprofile.edit_userinternal(this)",name:dI};var dJ=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dK.find("#id_users").append(dJ)}cH(dK,"#id_users")}function T(dK,dM,dI){var dH=dK.find("#id_users").data("userexternals");if(!utils.item_exist(dM,dH)){dH.push(dM);utils.set_data(dK.find("#id_users"),"userexternals",dH);var dL={id_prefix:"userext_",id:dM,click:"wpprofile.remove_userexternal(this)",editclick:"false",name:dI};var dJ=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dK.find("#id_users").append(dJ)}cH(dK,"#id_users")}function O(dI,dH){b1($("#save-form"),dI,dH)}function m(dI,dH){T($("#save-form"),dI,dH)}function aN(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");cy(dJ,dL,dH)}function cy(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_allowext(this)":dO);var dN=dJ.find("#id_allowexts").data("allowexts");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_allowexts"),"allowexts",dN);var dL={id_prefix:"allowext_",id:dP,click:"wpprofile.remove_allowext(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_allowexts").append(dM)}cH(dJ,"#id_allowexts")}function L(dI,dH){cy($("#save-form"),dI,dH)}function ad(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");bU(dJ,dL,dH)}function bU(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_blockext(this)":dO);var dN=dJ.find("#id_blockexts").data("blockexts");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_blockexts"),"blockexts",dN);var dL={id_prefix:"blockext_",id:dP,click:"wpprofile.remove_blockext(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_blockexts").append(dM)}cH(dJ,"#id_blockexts")}function aJ(dI,dH){bU($("#save-form"),dI,dH)}function cD(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");G(dJ,dL,dH)}function G(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_allowmime(this)":dO);var dN=dJ.find("#id_allowmimes").data("allowmimes");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_allowmimes"),"allowmimes",dN);var dL={id_prefix:"allowmime_",id:dP,click:"wpprofile.remove_allowmime(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_allowmimes").append(dM)}cH(dJ,"#id_allowmimes")}function bZ(dI,dH){G($("#save-form"),dI,dH)}function aH(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");cn(dJ,dL,dH)}function cn(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_blockmime(this)":dO);var dN=dJ.find("#id_blockmimes").data("blockmimes");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_blockmimes"),"blockmimes",dN);var dL={id_prefix:"blockmime_",id:dP,click:"wpprofile.remove_blockmime(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_blockmimes").append(dM)}cH(dJ,"#id_blockmimes")}function aC(dI,dH){cn($("#save-form"),dI,dH)}function dh(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");aU(dJ,dL,dH)}function aU(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_cat(this)":dO);var dN=dJ.find("#id_categories").data("categories");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_categories"),"categories",dN);var dL={id_prefix:"cat_",id:dP,click:"wpprofile.remove_cat(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_categories").append(dM)}cH(dJ,"#id_categories")}function dD(dI,dH){aU($("#save-form"),dI,dH)}function aZ(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");cI(dJ,dL,dH)}function cI(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_whitelist(this)":dO);var dN=dJ.find("#id_whitelist").data("whitelist");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_whitelist"),"whitelist",dN);var dL={id_prefix:"whitelist_",id:dP,click:"wpprofile.remove_whitelist(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_whitelist").append(dM)}cH(dJ,"#id_whitelist")}function au(dI,dH){cI($("#save-form"),dI,dH)}function cY(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");Z(dJ,dL,dH)}function Z(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_blacklist(this)":dO);var dN=dJ.find("#id_blacklist").data("blacklist");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_blacklist"),"blacklist",dN);var dL={id_prefix:"blacklist_",id:dP,click:"wpprofile.remove_blacklist(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_blacklist").append(dM)}cH(dJ,"#id_blacklist")}function J(dI,dH){Z($("#save-form"),dI,dH)}function N(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");aS(dJ,dL,dH)}function aS(dJ,dI,dH,dO){var dP=parseInt(dI,10);var dK=(!dO?"wpprofile.edit_content(this)":dO);var dN=dJ.find("#id_contents").data("contents");if(!utils.item_exist(dP,dN)){dN.push(dP);utils.set_data(dJ.find("#id_contents"),"contents",dN);var dL={id_prefix:"content_",id:dP,click:"wpprofile.remove_content(this)",editclick:dK,name:dH};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dL);dJ.find("#id_contents").append(dM)}cH(dJ,"#id_contents")}function ct(dI,dH){aS($("#save-form"),dI,dH)}function d(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");ba(dJ,dL,dH)}function ba(dL,dN,dI){var dJ=parseInt(dN,10);var dH=dL.find("#id_nets").data("nets");if(!utils.item_exist(dJ,dH)){dH.push(dJ);utils.set_data(dL.find("#id_nets"),"nets",dH);var dM={id_prefix:"net_",id:dJ,click:"wpprofile.remove_net(this)",editclick:"wpprofile.edit_net(this)",name:dI};var dK=new EJS({url:"/media/tpl/list_item.ejs"}).render(dM);dL.find("#id_nets").append(dK)}cH(dL,"#id_nets")}function cu(dI,dH){ba($("#save-form"),dI,dH)}function cQ(dJ,dK){var dI=$(dK);var dH=dI.html();var dL=dI.parent().attr("id");U(dJ,dL,dH)}function U(dM,dO,dJ){var dI=dM.find("#except");var dK=parseInt(dO,10);var dH=dI.find("#id_exceptnets").data("exceptnets");if(!utils.item_exist(dK,dH)){dH.push(dK);utils.set_data(dI.find("#id_exceptnets"),"exceptnets",dH);var dN={id_prefix:"exceptnet_",id:dK,click:"wpprofile.remove_exceptnet(this)",editclick:"wpprofile.edit_exceptnet(this)",name:dJ};var dL=new EJS({url:"/media/tpl/list_item.ejs"}).render(dN);dI.find("#id_exceptnets").append(dL)}cH(dI,"#id_exceptnets")}function bm(dM,dO,dJ){var dI=dM.find("#except");var dK=parseInt(dO,10);var dH=dI.find("#id_exceptnets").data("exceptnets");if(!utils.item_exist(dK,dH)){dH.push(dK);utils.set_data(dI.find("#id_exceptnets"),"exceptnets",dH);var dN={id_prefix:"exceptnet_",id:dK,click:"wpprofile.remove_exceptnet(this)",editclick:"wizard.edit_exceptnet(this)",name:dJ};var dL=new EJS({url:"/media/tpl/list_item.ejs"}).render(dN);dI.find("#id_exceptnets").append(dL)}cH(dI,"#id_exceptnets")}function aM(dI,dH){U($("#save-form"),dI,dH)}function cX(dK,dL){var dJ=$(dL);var dH=dJ.html();var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);if(dM.indexOf("userint")>=0){bo(dK,dI,dH)}else{t(dK,dI,dH)}}function bo(dL,dN,dJ){var dI=dL.find("#except");var dH=dI.find("#id_exceptusers").data("exceptuserinternals");if(!utils.item_exist(dN,dH)){dH.push(dN);utils.set_data(dI.find("#id_exceptusers"),"exceptuserinternals",dH);var dM={id_prefix:"exceptuserint_",id:dN,click:"wpprofile.remove_exceptuserinternal(this)",editclick:"wpprofile.edit_exceptuserinternal(this)",name:dJ};var dK=new EJS({url:"/media/tpl/list_item.ejs"}).render(dM);dI.find("#id_exceptusers").append(dK)}cH(dI,"#id_exceptusers")}function cl(dL,dN,dJ){var dI=dL.find("#except");var dH=dI.find("#id_exceptusers").data("exceptuserinternals");if(!utils.item_exist(dN,dH)){dH.push(dN);utils.set_data(dI.find("#id_exceptusers"),"exceptuserinternals",dH);var dM={id_prefix:"exceptuserint_",id:dN,click:"wpprofile.remove_exceptuserinternal(this)",editclick:"wizard.edit_exceptuserinternal(this)",name:dJ};var dK=new EJS({url:"/media/tpl/list_item_2.ejs"}).render(dM);dI.find("#id_exceptusers").append(dK)}cH(dI,"#id_exceptusers")}function t(dL,dN,dJ){var dI=dL.find("#except");var dH=dI.find("#id_exceptusers").data("exceptuserexternals");if(!utils.item_exist(dN,dH)){dH.push(dN);utils.set_data(dI.find("#id_exceptusers"),"exceptuserexternals",dH);var dM={id_prefix:"exceptuserext_",id:dN,click:"wpprofile.remove_exceptuserexternal(this)",editclick:"wpprofile.edit_exceptuserexternal(this)",name:dJ};var dK=new EJS({url:"/media/tpl/list_item.ejs"}).render(dM);dI.find("#id_exceptusers").append(dK)}cH(dI,"#id_exceptusers")}function ar(dI,dH){bo($("#save-form"),dI,dH)}function D(dI,dH){t($("#save-form"),dI,dH)}function h(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();ck(dJ,dH)})}function dc(){$("input[name=chklist]:checked").each(function(){var dJ=$(this);var dK=dJ.parent().attr("id");var dH=dJ.next().html();var dI=utils.get_itemid(dK);if(dK.indexOf("userint")>=0){O(dI,dH)}else{m(dI,dH)}})}function Y(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();L(dJ,dH)})}function cG(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();aJ(dJ,dH)})}function cq(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();bZ(dJ,dH)})}function di(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();aC(dJ,dH)})}function aB(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();dD(dJ,dH)})}function dt(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();au(dJ,dH)})}function cm(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();J(dJ,dH)})}function aw(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();ct(dJ,dH)})}function b9(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();cu(dJ,dH)})}function cp(){$("input[name=chklist]:checked").each(function(){var dI=$(this);var dJ=dI.parent().attr("id");var dH=dI.next().html();aM(dJ,dH)})}function bu(){$("input[name=chklist]:checked").each(function(){var dJ=$(this);var dK=dJ.parent().attr("id");var dH=dJ.next().html();var dI=utils.get_itemid(dK);if(dK.indexOf("userint")>=0){ar(dI,dH)}else{D(dI,dH)}})}function ce(){var dJ=wpcat.get_level_data(this);var dH=this;var dI={self:dH,scope:"cat",level:dJ.level,prefix:dJ.prefix};wpcat.init_import_form(dI);return false}function bG(){var dJ=wpcat.get_level_data(this);var dH=this;var dI={self:dH,scope:"cat",level:dJ.level,prefix:dJ.prefix};wpcat.init_export_form(dI);return false}function cd(){var dJ=wpwhitelist.get_level_data(this);var dH=this;var dI={self:dH,scope:"whitelist",level:dJ.level,prefix:dJ.prefix};wpwhitelist.init_import_form(dI);return false}function bF(){var dJ=wpwhitelist.get_level_data(this);var dH=this;var dI={self:dH,scope:"whitelist",level:dJ.level,prefix:dJ.prefix};wpwhitelist.init_export_form(dI);return false}function cc(){var dJ=wpblacklist.get_level_data(this);var dH=this;var dI={self:dH,scope:"blacklist",level:dJ.level,prefix:dJ.prefix};wpblacklist.init_import_form(dI);return false}function bD(){var dJ=wpblacklist.get_level_data(this);var dH=this;var dI={self:dH,scope:"blacklist",level:dJ.level,prefix:dJ.prefix};wpblacklist.init_export_form(dI);return false}function ca(){var dJ=wpext.get_level_data(this);var dH=this;var dI={self:dH,scope:"allowext",level:dJ.level,prefix:dJ.prefix};wpext.init_import_form(dI);return false}function bA(){var dJ=wpext.get_level_data(this);var dH=this;var dI={self:dH,scope:"allowext",level:dJ.level,prefix:dJ.prefix};wpext.init_export_form(dI);return false}function b8(){var dJ=wpext.get_level_data(this);var dH=this;var dI={self:dH,scope:"blockext",level:dJ.level,prefix:dJ.prefix};wpext.init_import_form(dI);return false}function bz(){var dJ=wpext.get_level_data(this);var dH=this;var dI={self:dH,scope:"blockext",level:dJ.level,prefix:dJ.prefix};wpext.init_export_form(dI);return false}function b7(){var dJ=wpmime.get_level_data(this);var dH=this;var dI={self:dH,scope:"allowmime",level:dJ.level,prefix:dJ.prefix};wpmime.init_import_form(dI);return false}function by(){var dJ=wpmime.get_level_data(this);var dH=this;var dI={self:dH,scope:"allowmime",level:dJ.level,prefix:dJ.prefix};wpmime.init_export_form(dI);return false}function b6(){var dJ=wpmime.get_level_data(this);var dH=this;var dI={self:dH,scope:"blockmime",level:dJ.level,prefix:dJ.prefix};wpmime.init_import_form(dI);return false}function bx(){var dJ=wpmime.get_level_data(this);var dH=this;var dI={self:dH,scope:"blockmime",level:dJ.level,prefix:dJ.prefix};wpmime.init_export_form(dI);return false}function b5(){var dJ=wpcontent.get_level_data(this);var dH=this;var dI={self:dH,scope:"content",level:dJ.level,prefix:dJ.prefix};wpcontent.init_import_form(dI);return false}function bw(){var dJ=wpcontent.get_level_data(this);var dH=this;var dI={self:dH,scope:"content",level:dJ.level,prefix:dJ.prefix};wpcontent.init_export_form(dI);return false}function da(dH,dI){if(dH.keyCode=="13"){dH.preventDefault();dH.stopPropagation();a1(dI)}}function a1(dK){var dJ=dK.find("#except");var dI=dJ.find("#id_url").val();if(dI==""){return false}var dH=[dI];dC(dJ,dH);dJ.find("#id_url").val("");return false}function dC(dH,dP){var dN=dH.find("#id_excepturls").data("excepturls");var dJ=0;if(dP==null){return}else{if(dP.length>0){dJ=dP.length;var dI=dH.find("#id_excepturls");for(var dL=0;dL<dJ;dL++){var dO=dP[dL];if(dO==""){continue}if(!utils.item_exist(dO,dN)){dN.push(dO);var dK={id_prefix:"excepturl_",id:"item",click:"wpprofile.remove_excepturl(this)",editclick:"wpprofile.edit_excepturl(this)",name:dO};var dM=new EJS({url:"/media/tpl/list_item.ejs"}).render(dK);dI.append(dM)}}utils.set_data(dH.find("#id_excepturls"),"excepturls",dN);cH(dH,"#id_excepturls")}}}function w(dH,dI){if(dH.keyCode=="13"){dH.preventDefault();dH.stopPropagation();aq(dI)}}function aq(dK){var dJ=dK.find("#except");var dI=dJ.find("#id_url").val();if(dI==""){return false}var dH=[dI];aD(dJ,dH);dJ.find("#id_url").val("");return false}function aD(dH,dP){var dN=dH.find("#id_excepturls").data("excepturls");var dJ=0;if(dP==null){return}else{if(dP.length>0){dJ=dP.length;var dI=dH.find("#id_excepturls");for(var dL=0;dL<dJ;dL++){var dO=dP[dL];if(dO==""){continue}if(!utils.item_exist(dO,dN)){dN.push(dO);var dK={id_prefix:"excepturl_",id:"item",click:"wpprofile.remove_excepturl(this)",editclick:"wpprofile.edit_excepturl(this)",name:dO};var dM=new EJS({url:"/media/tpl/list_item_2.ejs"}).render(dK);dI.append(dM)}}utils.set_data(dH.find("#id_excepturls"),"excepturls",dN);cH(dH,"#id_excepturls")}}}function db(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,7);var dH=dK.find("#id_schedules").data("schedules");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_schedules"),"schedules",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_schedules");return false}function ax(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,7);var dH=dK.find("#id_users").data("userinternals");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_users"),"userinternals",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_users");return false}function cW(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,7);var dH=dK.find("#id_users").data("userexternals");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_users"),"userexternals",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_users");return false}function cB(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_allowexts").data("allowexts");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_allowexts"),"allowexts",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_allowexts");return false}function bY(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_blockexts").data("blockexts");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_blockexts"),"blockexts",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_blockexts");return false}function X(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_allowmimes").data("allowmimes");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_allowmimes"),"allowmimes",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_allowmimes");return false}function cF(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_blockmimes").data("blockmimes");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_blockmimes"),"blockmimes",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_blockmimes");return false}function a0(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_categories").data("categories");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_categories"),"categories",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_categories");return false}function c0(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_whitelist").data("whitelist");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_whitelist"),"whitelist",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_whitelist");return false}function aL(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_blacklist").data("blacklist");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_blacklist"),"blacklist",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_blacklist");return false}function cf(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,8);var dH=dK.find("#id_contents").data("contents");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_contents"),"contents",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_contents");return false}function br(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,7);var dH=dK.find("#id_nets").data("nets");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_nets"),"nets",dH)}dK.find("#"+dN).remove();utils.set_alt_css("#id_nets");return false}function aG(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,7);var dH=dK.find("#id_exceptnets").data("exceptnets");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_exceptnets"),"exceptnets",dH)}dK.find("#"+dN).remove();cH(dK,"#id_exceptnets");return false}function cw(dM){var dL=$(dM);var dI=dL.next().next().html();var dK=$("#except");var dH=dK.find("#id_excepturls").data("excepturls");var dJ=$.inArray(dI,dH);if(dJ>=0){dH.splice(dJ,1);utils.set_data(dK.find("#id_excepturls"),"excepturls",dH)}dL.parent().remove();cH(dK,"#id_excepturls");return false}function y(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,4);var dH=dK.find("#id_exceptusers").data("exceptuserinternals");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_exceptusers"),"exceptuserinternals",dH)}dK.find("#"+dN).remove();cH(dK,"#id_exceptusers");return false}function b4(dM){var dL=$(dM);var dN=dL.parent().attr("id");var dJ=utils.get_itemid(dN);var dK=utils.get_parent(dL,4);var dH=dK.find("#id_exceptusers").data("exceptuserexternals");var dI=$.inArray(dJ,dH);if(dI>=0){dH.splice(dI,1);utils.set_data(dK.find("#id_exceptusers"),"exceptuserxternals",dH)}dK.find("#"+dN).remove();cH(dK,"#id_exceptusers");return false}function cA(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"schedule",func_update:M};defschedule.init_edit_form(dK);return false}function M(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bX()}}function c3(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"user",func_update:cz,func_show_all:cr,func_show_add:p};defuser.init_edit_form(dK);return false}function cz(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bW()}}function b3(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"allowext",func_update:l,func_show_import:ca,func_show_export:bA};wpext.init_edit_form(dK);return false}function l(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bV()}}function a5(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"blockext",func_update:c2,func_show_import:b8,func_show_export:bz};wpext.init_edit_form(dK);return false}function c2(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bS()}}function cj(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"allowmime",func_update:aE,func_show_import:b7,func_show_export:by};wpmime.init_edit_form(dK);return false}function aE(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bR()}}function av(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"blockmime",func_update:cS,func_show_import:b6,func_show_export:bx};wpmime.init_edit_form(dK);return false}function cS(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bQ()}}function bn(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"cat",func_update:a3,func_show_import:ce,func_show_export:bG};wpcat.init_edit_form(dK);return false}function a3(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bO()}}function aI(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"whitelist",func_update:dd,func_show_import:cd,func_show_export:bF};wpwhitelist.init_edit_form(dK);return false}function dd(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bN()}}function cZ(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"blacklist",func_update:aY,func_show_import:cc,func_show_export:bD};wpblacklist.init_edit_form(dK);return false}function aY(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){bM()}}function bf(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"content",func_update:be,func_show_import:b5,func_show_export:bw};wpcontent.init_edit_form(dK);return false}function be(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){b2()}}function bP(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"net",func_update:bv};defnet.init_edit_form(dK);return false}function bv(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){b0()}}function cT(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"exceptnet",func_update:aR};defnet.init_edit_form(dK);return false}function aR(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){j()}}function am(dK){var dQ=$(dK);var dN=dQ.next().html();var dH=utils.get_parent(dQ,8);var dO=dH.attr("id");var dR=utils.get_form_scope(dO);var dM=dH.find("#except").find("#id_excepturls").data("excepturls");var dL=$.inArray(dN,dM);if(dL>=0){var dI=cP(dH);var dP=dQ;var dJ={self:dP,urlvalue:dN,level:dI.level,prefix:dI.prefix,scope:dR};ci(dJ);return false}return false}function cM(dH){var dJ=dH.level-1;var dP=(dH.scope==""?"":"-");var dL=(dH.level<1?"":"_"+dH.level);var dQ=(dJ<1?"":"_"+dJ);var dO=$("#save-urlform"+dP+dH.scope+dL);var dM=$("#save-form"+dP+dH.scope+dQ);var dN=dO.find("#id_url").val();if($.trim(dN)==""){return}var dK=dM.find("#id_excepturls").data("excepturls");var dI=$.inArray(dH.urlvalue,dK);if(dI>=0){dK[dI]=dN;$(dH.self).next().html(dN);utils.set_data(dM.find("#id_excepturls"),"excepturls",dK);utils.cancel_dialog(dH.level,"#dialog-edit-excepturl"+dP+dH.scope)}}function u(dL){var dJ=$(dL);var dM=dJ.parent().attr("id");var dI=utils.get_itemid(dM);var dH=dJ;var dK={self:dH,id:dI,level:1,prefix:"",scope:"exceptuser",func_update:al};defuser.init_edit_form(dK);return false}function al(dK,dI,dH){$(dH).next().html(dI);var dJ=$("#list-panel").dialog("isOpen");if(dJ){f()}}function cV(dJ){var dI="\n";var dH=dJ.find("#id_delimiter").val();if(dH=="1"){dI=";"}else{if(dH=="2"){dI=","}}return dI}function dg(dH){var dJ=dH.level-1;var dP=(dH.scope==""?"":"-");var dM=(dH.level<1?"":"_"+dH.level);var dQ=(dJ<1?"":"_"+dJ);var dO=$("#import-form"+dP+dH.scope+dM);var dN=$("#save-form"+dP+dH.scope+dQ);var dK=dO.find("#id_importtext").val();var dL=null;if($.trim(dK)==""){return}var dI=dK.indexOf("\n");if(dI>=0){dL=dK.split("\n");dC(dN,dL);utils.cancel_dialog(dH.level,"#dialog-import-excepturl"+dP+dH.scope);return}dI=dK.indexOf(",");if(dI>=0){dL=dK.split(",");dC(dN,dL);utils.cancel_dialog(dH.level,"#dialog-import-excepturl"+dP+dH.scope);return}dI=dK.indexOf(";");if(dI>=0){dL=dK.split(";");dC(dN,dL);utils.cancel_dialog(dH.level,"#dialog-import-excepturl"+dP+dH.scope);return}dL=[dK];dC(dN,dL);utils.cancel_dialog(dH.level,"#dialog-import-excepturl"+dP+dH.scope)}function cP(dI){var dH=dI.attr("id");var dK=utils.get_next_form_level(dH);var dJ=utils.get_prefix(dH);return{level:dK,prefix:dJ}}function cg(){var dH=$("#save-form");var dP=$("#except");if(dH.find("#id_scheduleon").attr("checked")=="checked"){$(".wpprofileschd").hide()}else{$(".wpprofileschd").show()}var dT=[];var dO=[];var dI=[];var dS=[];var dQ=[];var dK=[];var dM=[];var dN=[];var dY=[];var dX=[];var dW=[];var dL=[];var dJ=[];var dR=[];var dU=[];var dV=[];dH.find("#id_schedules > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dT)){dT.push(dZ)}});dH.find("#id_users > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(d0.indexOf("userint")>=0){if(!utils.item_exist(dZ,dO)){dO.push(dZ)}}else{if(!utils.item_exist(dZ,dI)){dI.push(dZ)}}});dH.find("#id_allowexts > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dS)){dS.push(dZ)}});dH.find("#id_blockexts > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dQ)){dQ.push(dZ)}});dH.find("#id_allowmimes > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dK)){dK.push(dZ)}});dH.find("#id_blockmimes > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dM)){dM.push(dZ)}});dH.find("#id_categories > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dN)){dN.push(dZ)}});dH.find("#id_whitelist > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dY)){dY.push(dZ)}});dH.find("#id_blacklist > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dX)){dX.push(dZ)}});dH.find("#id_contents > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dW)){dW.push(dZ)}});dH.find("#id_nets > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dL)){dL.push(dZ)}});dP.find("#id_exceptnets > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(!utils.item_exist(dZ,dJ)){dJ.push(dZ)}});dP.find("#id_excepturls > div").each(function(){var dZ=$(this).find(".item_edit").next().html();if(!utils.item_exist(dZ,dR)){dR.push(dZ)}});dP.find("#id_exceptusers > div").each(function(){var d0=$(this).attr("id");var dZ=utils.get_itemid(d0);if(d0.indexOf("userint")>=0){if(!utils.item_exist(dZ,dU)){dU.push(dZ)}}else{if(!utils.item_exist(dZ,dV)){dV.push(dZ)}}});utils.set_data(dH.find("#id_schedules"),"schedules",dT);utils.set_data(dH.find("#id_users"),"userinternals",dO);utils.set_data(dH.find("#id_users"),"userexternals",dI);utils.set_data(dH.find("#id_allowexts"),"allowexts",dS);utils.set_data(dH.find("#id_blockexts"),"blockexts",dQ);utils.set_data(dH.find("#id_allowmimes"),"allowmimes",dK);utils.set_data(dH.find("#id_blockmimes"),"blockmimes",dM);utils.set_data(dH.find("#id_categories"),"categories",dN);utils.set_data(dH.find("#id_whitelist"),"whitelist",dY);utils.set_data(dH.find("#id_blacklist"),"blacklist",dX);utils.set_data(dH.find("#id_contents"),"contents",dW);utils.set_data(dH.find("#id_nets"),"nets",dL);utils.set_data(dP.find("#id_exceptnets"),"exceptnets",dJ);utils.set_data(dP.find("#id_excepturls"),"excepturls",dR);utils.set_data(dP.find("#id_exceptusers"),"exceptuserinternals",dU);utils.set_data(dP.find("#id_exceptusers"),"exceptuserexternals",dV);utils.set_alt_css("#id_schedules");utils.set_alt_css("#id_users");utils.set_alt_css("#id_allowexts");utils.set_alt_css("#id_blockexts");utils.set_alt_css("#id_allowmimes");utils.set_alt_css("#id_blockmimes");utils.set_alt_css("#id_categories");utils.set_alt_css("#id_whitelist");utils.set_alt_css("#id_blacklist");utils.set_alt_css("#id_contents");utils.set_alt_css("#id_nets");cH(dP,"#id_exceptnets");cH(dP,"#id_excepturls");cH(dP,"#id_exceptusers")}function cH(dI,dH){dI.find(dH+" > div").removeClass("ui-state-default");dI.find(dH+" > div").removeClass("ui-state-hover");dI.find(dH+" > div:odd").addClass("ui-state-default");dI.find(dH+" > div:even").addClass("ui-state-hover")}function aP(){$(".list_button.edit").click(c4);$(".list_button.delete").click(bJ);$(".list_button.clone").click(aT);$(".switch_button > .sw-on").click(cb);$(".switch_button > .sw-off").click(cb);$(".list_table").sortable(a9)}function dk(){ap();$("#left_box").hide();$("#id_add").click(K);$("#id_find").click(nav_list.show_list);$("#id_display,#id_selection").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.remove_dialog("div[id^='dialog-add']");utils.remove_dialog("div[id^='dialog-edit']");utils.init_alert_dialog("#dialog-message");utils.init_list_panel("#list-panel",cE);utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=bE;nav_list.config.list_func=aP;nav_list.init()}function cC(){return menu.get("/wpprofile/",dk)}return{load:cC,add_schedule:c9,add_schedule_wizard:bt,edit_schedule:cA,remove_schedule:db,add_userinternal:b1,edit_userinternal:c3,remove_userinternal:ax,remove_userexternal:cW,add_allowext:cy,edit_allowext:b3,remove_allowext:cB,add_blockext:bU,edit_blockext:a5,remove_blockext:bY,add_allowmime:G,edit_allowmime:cj,remove_allowmime:X,add_blockmime:cn,edit_blockmime:av,remove_blockmime:cF,add_cat:aU,edit_cat:bn,remove_cat:a0,add_whitelist:cI,edit_whitelist:aI,remove_whitelist:c0,add_blacklist:Z,edit_blacklist:cZ,remove_blacklist:aL,add_content:aS,edit_content:bf,remove_content:cf,add_net:ba,edit_net:bP,remove_net:br,add_exceptnet:U,add_exceptnet_wizard:bm,edit_exceptnet:cT,remove_exceptnet:aG,edit_excepturl:am,remove_excepturl:cw,add_exceptuserinternal:bo,add_exceptuserinternal_wizard:cl,edit_exceptuserinternal:u,remove_exceptuserinternal:y,remove_exceptuserexternal:b4,init_form:H,show_form_dialog:bd,set_alt_css:cH,get_ui_opt:F}}());var wpwhitelist=(function(){var M="/wpwhitelist/save/";var ab="/wpwhitelist/delete/";var A="/wpwhitelist/list/";var y={panel:"/wpwhitelist/list/panel/",select:"/wpwhitelist/list/select/"};var ag="/wpwhitelist/save/temp/";var H={panel:"/wpwhitelist/list/panel/temp/",select:"/wpwhitelist/list/select/temp/"};var ah="/wpcat/url/save/";var B="/wpcat/import/";var r="/wpcat/export/";var ae=null;var Q=null;var n=null;var k=null;function V(){ae={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1001};Q={autoOpen:false,width:320,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};n={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002};k={autoOpen:false,width:350,resizable:false,draggable:false,modal:false,stack:true,zIndex:1002}}function U(){V();return{popup_dialog_opt:ae,popup_dialog_edit_url_opt:Q,popup_dialog_import_opt:n,popup_dialog_export_opt:k}}function j(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-add"+am+an.scope+aj);$("#dialog_edit_body"+am+an.scope+an.prefix).empty();$("#dialog-edit"+am+an.scope+an.prefix).dialog("close");var al=(an.url==null?M:an.url);$("#dialog-add"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-form"+am+an.scope+aj);utils.set_data(aq.find("#url_list"),"urls",[]);aq.find("#id_url").keypress(function(ar){F(ar,aq)});aq.find(".wpwhitelist_form1 .add_button").click(function(){return I(aq)});aq.find(".save_button.save").click(an.func_save);aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-add"+am+an.scope)});aq.find(".img_import").click(an.func_show_import);aq.find(".img_export").click(an.func_show_export);$("#dialog-editurl"+am+an.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+am+an.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+am+an.scope+aj).dialog(U().popup_dialog_export_opt);utils.bind_hover(aq.find(".save_button,.wpwhitelist_form1 .add_button"));$("#dialog-add"+am+an.scope+an.prefix).dialog("open")})}function m(ao){var aq=$(ao.self).offset();var ak=[aq.left,utils.get_elm_top(aq.top)];var aj="_"+ao.level;var an=(ao.scope==""?"":"-");var ap=(ao.scope==""?"":"&scope="+ao.scope);var al=(ao.url==null?"":"&wiz=1");utils.remove_dialog("#dialog-edit"+an+ao.scope+aj);$("#dialog_body"+an+ao.scope+ao.prefix).empty();$("#dialog-add"+an+ao.scope+ao.prefix).dialog("close");var am=(ao.url==null?M:ao.url);$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("option","position",ak);$("#dialog_edit_body"+an+ao.scope+ao.prefix).load(am+"?id="+ao.id+"&level="+ao.level+ap+al,null,function(){var ar=$("#save-form"+an+ao.scope+aj);ar.find("#id_url").keypress(function(at){F(at,ar)});ar.find(".wpwhitelist_form1 .add_button").click(function(){return I(ar)});ar.find(".save_button.save").click(function(){return c(ao)});ar.find(".save_button.cancel").click(function(){utils.cancel_dialog(ao.level,"#dialog-edit"+an+ao.scope)});ar.find(".img_import").click(ao.func_show_import);ar.find(".img_export").click(ao.func_show_export);$("#dialog-editurl"+an+ao.scope+aj).dialog(U().popup_dialog_edit_url_opt);$("#dialog-import"+an+ao.scope+aj).dialog(U().popup_dialog_import_opt);$("#dialog-export"+an+ao.scope+aj).dialog(U().popup_dialog_export_opt);L(ar);utils.bind_hover(ar.find(".save_button,.wpwhitelist_form1 .add_button"));$("#dialog-edit"+an+ao.scope+ao.prefix).dialog("open")})}function Y(an){var ap=$(an.self).offset();var ak=[ap.left,utils.get_elm_top(ap.top)];var aj="_"+an.level;var am=(an.scope==""?"":"-");var ao=(an.scope==""?"":"&scope="+an.scope);utils.remove_dialog("#dialog-editurl"+am+an.scope+aj);var al=(an.url==null?ah:an.url);$("#dialog-editurl"+am+an.scope+an.prefix).dialog("option","position",ak);$("#dialog_editurl_body"+am+an.scope+an.prefix).load(al+"?level="+an.level+ao,null,function(){var aq=$("#save-urlform"+am+an.scope+aj);aq.find("#id_url").val(an.urlvalue);aq.find(".save_button.save").click(function(){return w(an)});aq.find(".save_button.cancel").click(function(){utils.cancel_dialog(an.level,"#dialog-editurl"+am+an.scope)});utils.bind_hover(aq.find(".save_button"));$("#dialog-editurl"+am+an.scope+an.prefix).dialog("open")})}function ai(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-import"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_import_body"+al+am.scope+am.prefix).load(B+"?level="+am.level+an,null,function(){var ap=$("#import-form"+al+am.scope+aj);ap.find(".save_button.import").click(function(){return T(am)});ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-import"+al+am.scope)});utils.bind_hover(ap.find(".save_button"));$("#dialog-import"+al+am.scope+am.prefix).dialog("open")})}function E(am){var ao=$(am.self).offset();var ak=[ao.left,utils.get_elm_top(ao.top)];var aj="_"+am.level;var al=(am.scope==""?"":"-");var an=(am.scope==""?"":"&scope="+am.scope);$("#dialog-export"+al+am.scope+am.prefix).dialog("option","position",ak);$("#dialog_export_body"+al+am.scope+am.prefix).load(r+"?level="+am.level+an,null,function(){var ap=$("#export-form"+al+am.scope+aj);ap.find(".save_button.cancel").click(function(){utils.cancel_dialog(am.level,"#dialog-export"+al+am.scope)});ap.find("#id_delimiter").change(J);utils.bind_hover(ap.find(".save_button"));X(am,ap);$("#dialog-export"+al+am.scope+am.prefix).dialog("open")})}function D(){$("#left_box").load(M,null,function(){utils.set_data($("#save-form").find("#url_list"),"urls",[]);$("#left_box").css("width","300px");$("#id_url").keypress(function(aj){F(aj,$("#save-form"))});$(".wpwhitelist_form1 .add_button").click(function(){return I($("#save-form"))});$(".save_button.save").click(u);$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);utils.bind_hover($(".save_button,.form_title div.close,.wpwhitelist_form1 .add_button"));$("#left_box").show()});return false}function g(){utils.cancel_form();nav_list.show_list()}function l(al){var aj=$(al.self).parent().attr("id");var ak=(al.clone==null?"":"&clone=1");$("#left_box").load(M+"?id="+aj+ak,null,function(){var am=$("#save-form");$("#left_box").css("width","300px");$("#id_url").keypress(function(an){F(an,am)});$(".wpwhitelist_form1 .add_button").click(function(){return I(am)});$(".save_button.save").click(function(){if(al.clone==null){return p(aj)}else{return u()}});$(".save_button.cancel,.form_title div.close").click(utils.cancel_form);$(".img_import").click(R);$(".img_export").click(O);$("#dialog-editurl").dialog(Q);$("#dialog-import").dialog(n);$("#dialog-export").dialog(k);L(am);utils.bind_hover($(".save_button,.form_title div.close,.wpwhitelist_form1 .add_button"));$("#left_box").show()})}function u(){var aj=$("#save-form");var ak=h(aj,"","");var al={url:M,data:ak,func_success:g};return list_form.save(al)}function t(){var aj=this;l({self:aj,clone:null})}function p(aj){var ak=$("#save-form");var al=h(ak,aj,"update");var am={url:M,data:al,func_success:g};return list_form.save(am)}function v(){var ao=$(this).parent();var ak=ao.attr("id");var aq=$("#id_pg").val();var aj=aq.split(",");var am=parseInt(aj[3],10);--am;var an=$("#id_display").val();var al=$("#id_query").val();var ap={id:ak,pgnum:am,pgsize:an,text:al,confirm:""};d(ap,ao)}function q(){var aj=this;l({self:aj,clone:1})}function d(ak,aj){$.post(ab,ak,function(al){if(al.hasgroups==1){$("#confirm_delete_body").html(al.msg);var an=$("#confirm-delete");an.dialog("open");an.find(".save_button.save").click(function(){ak.confirm=1;an.dialog("close");d(ak,aj)});an.find(".save_button.cancel").click(function(){an.dialog("close")});utils.bind_hover(an.find(".save_button"))}else{if(al.success==1){nav_list.set_item_msg(al.itemscount);var am=aj.parent();am.remove();delete am}else{utils.show_dialog(2,al)}}})}function S(aj){aj.url=(aj.url==null?M:aj.url);aj.func_get_data=h;aj.func_show_dialog=utils.show_dialog;return wpfilter.save(aj)}function c(ak){var an=ak.level-1;var ar=(ak.scope==""?"":"-");var ao=(ak.level<1?"":"_"+ak.level);var at=(an<1?"":"_"+an);var aq=$("#save-form"+ar+ak.scope+ao);var ap=$("#save-form"+ar+ak.scope+at);var am=(ak.savetemp==null?"update":ak.savetemp);var al=h(aq,ak.id,am);al.level=ak.level;var aj=(ak.url==null?M:ak.url);$.post(aj,al,function(au){if(au.success==1){ak.func_update(au.id,au.name,ak.self);utils.cancel_dialog(ak.level,"#dialog-edit"+ar+ak.scope)}else{if(au.error==1){err=utils.get_errors(au.errors);utils.show_dialog(1,err)}else{utils.show_dialog(2,au)}}})}function X(ao,an){var am=ao.level-1;var ak=(ao.scope==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+ao.scope+aj);K(al,an)}function J(){var ao=utils.get_parent(this,2);var ap=ao.attr("id");var aq=utils.get_form_level(ap);var an=utils.get_form_scope(ap);var am=aq-1;var ak=(an==""?"":"-");var aj=(am<1?"":"_"+am);var al=$("#save-form"+ak+an+aj);K(al,ao)}function K(ao,am){var al=N(am);var aj=ao.find("#url_list").data("urls");if(aj!=null){var ak="";var ap=aj.length;for(var an=0;an<ap;an++){if($.trim(aj[an])==""){continue}if(an<ap-1){ak+=aj[an]+al}else{ak+=aj[an]}}am.find("#id_exporttext").val(ak)}}function R(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};ai(ak);return false}function O(){var al=G(this);var aj=this;var ak={self:aj,level:al.level,prefix:al.prefix,scope:""};E(ak);return false}function F(aj,ak){if(aj.keyCode=="13"){aj.preventDefault();aj.stopPropagation();I(ak)}}function I(al){var ak=al.find("#id_url").val();if(ak==""){return false}var aj=[ak];Z(al,aj);al.find("#id_url").val("");return false}function Z(aj,ar){var al=aj.find("#url_list");var ap=al.data("urls");var ak=0;if(ar==null){return}else{if(ar.length>0){ak=ar.length;for(var an=0;an<ak;an++){var aq=ar[an];if(aq==""){continue}if(!utils.item_exist(aq,ap)){ap.push(aq);var am={id_prefix:"url_",id:"item",click:"wpwhitelist.remove_url(this)",editclick:"wpwhitelist.edit_url(this)",name:aq};var ao=new EJS({url:"/media/tpl/list_item.ejs"}).render(am);al.append(ao)}}utils.set_data(aj.find("#url_list"),"urls",ap);f(aj,"#url_list")}}}function ad(ao){var an=$(ao);var ak=an.next().next().html();var am=utils.get_parent(an,4);var aj=am.find("#url_list").data("urls");var al=$.inArray(ak,aj);if(al>=0){aj.splice(al,1);utils.set_data(am.find("#url_list"),"urls",aj)}an.parent().remove();f(am,"#url_list");return false}function P(am){var at=$(am);var ap=at.next().html();var aj=utils.get_parent(at,5);var aq=aj.attr("id");var au=utils.get_form_scope(aq);var ao=aj.find("#url_list").data("urls");var an=$.inArray(ap,ao);if(an>=0){var ak=C(aj);var ar=at;var al={self:ar,urlvalue:ap,level:ak.level,prefix:ak.prefix,scope:au};Y(al);return false}return false}function w(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var an=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#save-urlform"+ar+aj.scope+an);var ao=$("#save-form"+ar+aj.scope+at);var ap=aq.find("#id_url").val();if($.trim(ap)==""){return}var am=ao.find("#url_list").data("urls");var ak=$.inArray(aj.urlvalue,am);if(ak>=0){am[ak]=ap;$(aj.self).next().html(ap);utils.set_data(ao.find("#url_list"),"urls",am);utils.cancel_dialog(aj.level,"#dialog-editurl"+ar+aj.scope)}}function N(al){var ak="\n";var aj=al.find("#id_delimiter").val();if(aj=="1"){ak=";"}else{if(aj=="2"){ak=","}}return ak}function T(aj){var al=aj.level-1;var ar=(aj.scope==""?"":"-");var ao=(aj.level<1?"":"_"+aj.level);var at=(al<1?"":"_"+al);var aq=$("#import-form"+ar+aj.scope+ao);var ap=$("#save-form"+ar+aj.scope+at);var am=aq.find("#id_importtext").val();var an=null;if($.trim(am)==""){return}var ak=am.indexOf("\n");if(ak>=0){an=am.split("\n");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(",");if(ak>=0){an=am.split(",");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}ak=am.indexOf(";");if(ak>=0){an=am.split(";");Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope);return}an=[am];Z(ap,an);utils.cancel_dialog(aj.level,"#dialog-import"+ar+aj.scope)}function h(am,ak,al){var aj=am.find("#url_list").data("urls");var an={name:am.find("#id_name").val(),comment:am.find("#id_comment").val(),urls:aj.join("||"),id:ak,save_type:al};return an}function G(aj){var ak=utils.get_parent(aj,4);return C(ak)}function C(ak){var aj=ak.attr("id");var am=utils.get_next_form_level(aj);var al=utils.get_prefix(aj);return{level:am,prefix:al}}function L(ak){var aj=[];ak.find("#url_list > div").each(function(){var al=$(this).find(".item_edit").next().html();if(!utils.item_exist(al,aj)){aj.push(al)}});utils.set_data(ak.find("#url_list"),"urls",aj);f(ak,"#url_list")}function f(ak,aj){ak.find(aj+" > div").removeClass("ui-state-default");ak.find(aj+" > div").removeClass("ui-state-hover");ak.find(aj+" > div:odd").addClass("ui-state-default");ak.find(aj+" > div:even").addClass("ui-state-hover")}function af(){$(".list_button.edit").click(t);$(".list_button.delete").click(v);$(".list_button.clone").click(q)}function ac(){V();$("#left_box").hide();$("#id_add").click(D);$("#id_find").click(nav_list.show_list);$("#id_display").change(nav_list.show_list);$("#id_query").keypress(nav_list.query_keypress);$("#id_query").keyup(nav_list.query_keyup);utils.init_alert_dialog("#dialog-message");utils.init_confirm_delete("#confirm-delete");utils.bind_hover($("#id_add,#id_find"));nav_list.config.list_url=A;nav_list.config.list_func=af;nav_list.init()}function W(){return menu.get("/wpwhitelist/",ac)}return{load:W,list:y,list_temp:H,init:ac,edit_url:P,remove_url:ad,get_level_data:G,init_form:j,init_edit_form:m,init_edit_url_form:Y,init_import_form:ai,init_export_form:E,save_inner_form:S,get_ui_opt:U,save_temp_url:ag}}());